(function(){if(window.CKEDITOR&&window.CKEDITOR.dom)return;window.CKEDITOR||(window.CKEDITOR=function(){var e=/(^|.*[\\\/])ckeditor\.js(?:\?.*|;.*)?$/i,c={timestamp:"F969",version:"4.5.4",revision:"d4677a3",rnd:Math.floor(900*Math.random())+100,_:{pending:[],basePathSrcPattern:e},status:"unloaded",basePath:function(){var a=window.CKEDITOR_BASEPATH||"";if(!a)for(var u=document.getElementsByTagName("script"),h=0;h<u.length;h++){var i=u[h].src.match(e);if(i){a=i[1];break}}if(a.indexOf(":/")==-1&&a.slice(0,2)!="//"&&(a=a.indexOf("/")===0?location.href.match(/^.*?:\/\/[^\/]*/)[0]+a:location.href.match(/^[^\?]*\/(?:)/)[0]+a),!a)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';return a}(),getUrl:function(a){return a.indexOf(":/")==-1&&a.indexOf("/")!==0&&(a=this.basePath+a),this.timestamp&&a.charAt(a.length-1)!="/"&&!/[&?]t=/.test(a)&&(a+=(0<=a.indexOf("?")?"&":"?")+"t="+this.timestamp),a},domReady:function(){function a(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",a,!1),u()):document.attachEvent&&document.readyState==="complete"&&(document.detachEvent("onreadystatechange",a),u())}catch{}}function u(){for(var i;i=h.shift();)i()}var h=[];return function(i){function o(){try{document.documentElement.doScroll("left")}catch{setTimeout(o,1);return}a()}if(h.push(i),document.readyState==="complete"&&setTimeout(a,1),h.length==1){if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",a),window.attachEvent("onload",a),i=!1;try{i=!window.frameElement}catch{}document.documentElement.doScroll&&i&&o()}}}}()},r=window.CKEDITOR_GETURL;if(r){var s=c.getUrl;c.getUrl=function(a){return r.call(c,a)||s.call(c,a)}}return c}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(e){var c=CKEDITOR.event.prototype,r;for(r in c)e[r]==null&&(e[r]=c[r])},CKEDITOR.event.prototype=function(){function e(s){var a=c(this);return a[s]||(a[s]=new r(s))}var c=function(s){return s=s.getPrivate&&s.getPrivate()||s._||(s._={}),s.events||(s.events={})},r=function(s){this.name=s,this.listeners=[]};return r.prototype={getListenerIndex:function(s){for(var a=0,u=this.listeners;a<u.length;a++)if(u[a].fn==s)return a;return-1}},{define:function(s,a){var u=e.call(this,s);CKEDITOR.tools.extend(u,a,!0)},on:function(s,a,u,h,i){function o(E,C,d,p){return E={name:s,sender:this,editor:E,data:C,listenerData:h,stop:d,cancel:p,removeListener:n},a.call(u,E)===!1?!1:E.data}function n(){l.removeListener(s,a)}var t=e.call(this,s);if(0>t.getListenerIndex(a)){t=t.listeners,u||(u=this),isNaN(i)&&(i=10);var l=this;o.fn=a,o.priority=i;for(var f=t.length-1;0<=f;f--)if(t[f].priority<=i)return t.splice(f+1,0,o),{removeListener:n};t.unshift(o)}return{removeListener:n}},once:function(){var s=Array.prototype.slice.call(arguments),a=s[1];return s[1]=function(u){return u.removeListener(),a.apply(this,arguments)},this.on.apply(this,s)},capture:function(){CKEDITOR.event.useCapture=1;var s=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,s},fire:function(){var s=0,a=function(){s=1},u=0,h=function(){u=1};return function(i,o,n){var t=c(this)[i];i=s;var l=u;if(s=u=0,t){var f=t.listeners;if(f.length)for(var f=f.slice(0),E,C=0;C<f.length;C++){if(t.errorProof)try{E=f[C].call(this,n,o,a,h)}catch{}else E=f[C].call(this,n,o,a,h);if(E===!1?u=1:typeof E<"u"&&(o=E),s||u)break}}return o=u?!1:typeof o>"u"?!0:o,s=i,u=l,o}}(),fireOnce:function(s,a,u){return a=this.fire(s,a,u),delete c(this)[s],a},removeListener:function(s,a){var u=c(this)[s];if(u){var h=u.getListenerIndex(a);0<=h&&u.listeners.splice(h,1)}},removeAllListeners:function(){var s=c(this),a;for(a in s)delete s[a]},hasListeners:function(s){return(s=c(this)[s])&&0<s.listeners.length}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(e,c){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fire.call(this,e,c,this)},CKEDITOR.editor.prototype.fireOnce=function(e,c){return e in{instanceReady:1,loaded:1}&&(this[e]=!0),CKEDITOR.event.prototype.fireOnce.call(this,e,c,this)},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var e=navigator.userAgent.toLowerCase(),c=e.match(/edge[ \/](\d+.?\d*)/),r=-1<e.indexOf("trident/"),r=!(!c&&!r),r={ie:r,edge:!!c,webkit:!r&&-1<e.indexOf(" applewebkit/"),air:-1<e.indexOf(" adobeair/"),mac:-1<e.indexOf("macintosh"),quirks:document.compatMode=="BackCompat"&&(!document.documentMode||10>document.documentMode),mobile:-1<e.indexOf("mobile"),iOS:/(ipad|iphone|ipod)/.test(e),isCustomDomain:function(){if(!this.ie)return!1;var a=document.domain,u=window.location.hostname;return a!=u&&a!="["+u+"]"},secure:location.protocol=="https:"};r.gecko=navigator.product=="Gecko"&&!r.webkit&&!r.ie,r.webkit&&(-1<e.indexOf("chrome")?r.chrome=!0:r.safari=!0);var s=0;return r.ie&&(s=c?parseFloat(c[1]):r.quirks||!document.documentMode?parseFloat(e.match(/msie (\d+)/)[1]):document.documentMode,r.ie9Compat=s==9,r.ie8Compat=s==8,r.ie7Compat=s==7,r.ie6Compat=7>s||r.quirks),r.gecko&&(c=e.match(/rv:([\d\.]+)/))&&(c=c[1].split("."),s=1e4*c[0]+100*(c[1]||0)+1*(c[2]||0)),r.air&&(s=parseFloat(e.match(/ adobeair\/(\d+)/)[1])),r.webkit&&(s=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),r.version=s,r.isCompatible=!(r.ie&&7>s)&&!(r.gecko&&4e4>s)&&!(r.webkit&&534>s),r.hidpi=2<=window.devicePixelRatio,r.needsBrFiller=r.gecko||r.webkit||r.ie&&10<s,r.needsNbspFiller=r.ie&&11>s,r.cssClass="cke_browser_"+(r.ie?"ie":r.gecko?"gecko":r.webkit?"webkit":"unknown"),r.quirks&&(r.cssClass+=" cke_browser_quirks"),r.ie&&(r.cssClass+=" cke_browser_ie"+(r.quirks?"6 cke_browser_iequirks":r.version)),r.air&&(r.cssClass+=" cke_browser_air"),r.iOS&&(r.cssClass+=" cke_browser_ios"),r.hidpi&&(r.cssClass+=" cke_hidpi"),r}()),CKEDITOR.status=="unloaded"&&function(){CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if(CKEDITOR.status!="basic_ready")CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var e=document.createElement("script");e.type="text/javascript",e.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(e)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(e){(this._.pending||(this._.pending=[])).push(e)},function(){CKEDITOR.domReady(function(){var e=CKEDITOR.loadFullCore,c=CKEDITOR.loadFullCoreTimeout;e&&(CKEDITOR.status="basic_ready",e&&e._load?e():c&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()},1e3*c))})}(),CKEDITOR.status="basic_loaded"}(),CKEDITOR.VERBOSITY_WARN=1,CKEDITOR.VERBOSITY_ERROR=2,CKEDITOR.verbosity=CKEDITOR.VERBOSITY_WARN|CKEDITOR.VERBOSITY_ERROR,CKEDITOR.warn=function(e,c){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_WARN&&CKEDITOR.fire("log",{type:"warn",errorCode:e,additionalData:c})},CKEDITOR.error=function(e,c){CKEDITOR.verbosity&CKEDITOR.VERBOSITY_ERROR&&CKEDITOR.fire("log",{type:"error",errorCode:e,additionalData:c})},CKEDITOR.on("log",function(e){if(window.console&&window.console.log){var c=console[e.data.type]?e.data.type:"log",r=e.data.errorCode;(e=e.data.additionalData)?console[c]("[CKEDITOR] "+r,e):console[c]("[CKEDITOR] "+r),console[c]("[CKEDITOR] For more information go to http://docs.ckeditor.com/#!/guide/dev_errors-section-"+r)}},null,null,999),CKEDITOR.dom={},function(){var e=[],c=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.ie?"-ms-":"",r=/&/g,s=/>/g,a=/</g,u=/"/g,h=/&(lt|gt|amp|quot|nbsp|shy|#\d{1,5});/g,i={lt:"<",gt:">",amp:"&",quot:'"',nbsp:" ",shy:"­"},o=function(n,t){return t[0]=="#"?String.fromCharCode(parseInt(t.slice(1),10)):i[t]};CKEDITOR.on("reset",function(){e=[]}),CKEDITOR.tools={arrayCompare:function(n,t){if(!n&&!t)return!0;if(!n||!t||n.length!=t.length)return!1;for(var l=0;l<n.length;l++)if(n[l]!=t[l])return!1;return!0},getIndex:function(n,t){for(var l=0;l<n.length;++l)if(t(n[l]))return l;return-1},clone:function(n){var t;if(n&&n instanceof Array){t=[];for(var l=0;l<n.length;l++)t[l]=CKEDITOR.tools.clone(n[l]);return t}if(n===null||typeof n!="object"||n instanceof String||n instanceof Number||n instanceof Boolean||n instanceof Date||n instanceof RegExp||n.nodeType||n.window===n)return n;t=new n.constructor;for(l in n)t[l]=CKEDITOR.tools.clone(n[l]);return t},capitalize:function(n,t){return n.charAt(0).toUpperCase()+(t?n.slice(1):n.slice(1).toLowerCase())},extend:function(n){var t=arguments.length,l,f;typeof(l=arguments[t-1])=="boolean"?t--:typeof(l=arguments[t-2])=="boolean"&&(f=arguments[t-1],t-=2);for(var E=1;E<t;E++){var C=arguments[E],d;for(d in C)(l===!0||n[d]==null)&&(!f||d in f)&&(n[d]=C[d])}return n},prototypedCopy:function(n){var t=function(){};return t.prototype=n,new t},copy:function(n){var t={},l;for(l in n)t[l]=n[l];return t},isArray:function(n){return Object.prototype.toString.call(n)=="[object Array]"},isEmpty:function(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0},cssVendorPrefix:function(n,t,l){return l?c+n+":"+t+";"+n+":"+t:(l={},l[n]=t,l[c+n]=t,l)},cssStyleToDomStyle:function(){var n=document.createElement("div").style,t=typeof n.cssFloat<"u"?"cssFloat":typeof n.styleFloat<"u"?"styleFloat":"float";return function(l){return l=="float"?t:l.replace(/-./g,function(f){return f.substr(1).toUpperCase()})}}(),buildStyleHtml:function(n){n=[].concat(n);for(var t,l=[],f=0;f<n.length;f++)(t=n[f])&&(/@import|[{}]/.test(t)?l.push("<style>"+t+"</style>"):l.push('<link type="text/css" rel=stylesheet href="'+t+'">'));return l.join("")},htmlEncode:function(n){return n==null?"":String(n).replace(r,"&amp;").replace(s,"&gt;").replace(a,"&lt;")},htmlDecode:function(n){return n.replace(h,o)},htmlEncodeAttr:function(n){return CKEDITOR.tools.htmlEncode(n).replace(u,"&quot;")},htmlDecodeAttr:function(n){return CKEDITOR.tools.htmlDecode(n)},transformPlainTextToHtml:function(n,t){var l=t==CKEDITOR.ENTER_BR,f=this.htmlEncode(n.replace(/\r\n/g,`
`)),f=f.replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),E=t==CKEDITOR.ENTER_P?"p":"div";if(!l){var C=/\n{2}/g;if(C.test(f))var d="<"+E+">",p="</"+E+">",f=d+f.replace(C,function(){return p+d})+p}return f=f.replace(/\n/g,"<br>"),l||(f=f.replace(new RegExp("<br>(?=</"+E+">)"),function(I){return CKEDITOR.tools.repeat(I,2)})),f=f.replace(/^ | $/g,"&nbsp;"),f=f.replace(/(>|\s) /g,function(I,_){return _+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;")},getNextNumber:function(){var n=0;return function(){return++n}}(),getNextId:function(){return"cke_"+this.getNextNumber()},getUniqueId:function(){for(var n="e",t=0;8>t;t++)n+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return n},override:function(n,t){var l=t(n);return l.prototype=n.prototype,l},setTimeout:function(n,t,l,f,E){return E||(E=window),l||(l=E),E.setTimeout(function(){f?n.apply(l,[].concat(f)):n.apply(l)},t||0)},trim:function(){var n=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(t){return t.replace(n,"")}}(),ltrim:function(){var n=/^[ \t\n\r]+/g;return function(t){return t.replace(n,"")}}(),rtrim:function(){var n=/[ \t\n\r]+$/g;return function(t){return t.replace(n,"")}}(),indexOf:function(n,t){if(typeof t=="function"){for(var l=0,f=n.length;l<f;l++)if(t(n[l]))return l}else{if(n.indexOf)return n.indexOf(t);for(l=0,f=n.length;l<f;l++)if(n[l]===t)return l}return-1},search:function(n,t){var l=CKEDITOR.tools.indexOf(n,t);return 0<=l?n[l]:null},bind:function(n,t){return function(){return n.apply(t,arguments)}},createClass:function(n){var C=n.$,t=n.base,l=n.privates||n._,f=n.proto;if(n=n.statics,!C&&(C=function(){t&&this.base.apply(this,arguments)}),l)var E=C,C=function(){var d=this._||(this._={}),p;for(p in l){var I=l[p];d[p]=typeof I=="function"?CKEDITOR.tools.bind(I,this):I}E.apply(this,arguments)};return t&&(C.prototype=this.prototypedCopy(t.prototype),C.prototype.constructor=C,C.base=t,C.baseProto=t.prototype,C.prototype.base=function(){this.base=t.prototype.base,t.apply(this,arguments),this.base=arguments.callee}),f&&this.extend(C.prototype,f,!0),n&&this.extend(C,n,!0),C},addFunction:function(n,t){return e.push(function(){return n.apply(t||this,arguments)})-1},removeFunction:function(n){e[n]=null},callFunction:function(n){var t=e[n];return t&&t.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var n=/^-?\d+\.?\d*px$/,t;return function(l){return t=CKEDITOR.tools.trim(l+"")+"px",n.test(t)?t:l||""}}(),convertToPx:function(){var n;return function(t){return n||(n=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(n)),/%$/.test(t)?t:(n.setStyle("width",t),n.$.clientWidth)}}(),repeat:function(n,t){return Array(t+1).join(n)},tryThese:function(){for(var n,t=0,l=arguments.length;t<l;t++){var f=arguments[t];try{n=f();break}catch{}}return n},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(n){return function(){var t=arguments,l=this;window.setTimeout(function(){n.apply(l,t)},0)}},normalizeCssText:function(n,t){var l=[],f,E=CKEDITOR.tools.parseCssText(n,!0,t);for(f in E)l.push(f+":"+E[f]);return l.sort(),l.length?l.join(";")+";":""},convertRgbToHex:function(n){return n.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(t,l,f,E){for(t=[l,f,E],l=0;3>l;l++)t[l]=("0"+parseInt(t[l],10).toString(16)).slice(-2);return"#"+t.join("")})},parseCssText:function(n,t,l){var f={};return l&&(l=new CKEDITOR.dom.element("span"),l.setAttribute("style",n),n=CKEDITOR.tools.convertRgbToHex(l.getAttribute("style")||"")),!n||n==";"||n.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(E,C,d){t&&(C=C.toLowerCase(),C=="font-family"&&(d=d.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,",")),d=CKEDITOR.tools.trim(d)),f[C]=d}),f},writeCssText:function(n,t){var l,f=[];for(l in n)f.push(l+":"+n[l]);return t&&f.sort(),f.join("; ")},objectCompare:function(n,t,l){var f;if(!n&&!t)return!0;if(!n||!t)return!1;for(f in n)if(n[f]!=t[f])return!1;if(!l){for(f in t)if(n[f]!=t[f])return!1}return!0},objectKeys:function(n){var t=[],l;for(l in n)t.push(l);return t},convertArrayToObject:function(n,t){var l={};arguments.length==1&&(t=!0);for(var f=0,E=n.length;f<E;++f)l[n[f]]=t;return l},fixDomain:function(){for(var n;;)try{n=window.parent.document.domain;break}catch{if(n=n?n.replace(/.+?(?:\.|$)/,""):document.domain,!n)break;document.domain=n}return!!n},eventsBuffer:function(n,t,l){function f(){C=new Date().getTime(),E=!1,l?t.call(l):t()}var E,C=0;return{input:function(){if(!E){var d=new Date().getTime()-C;d<n?E=setTimeout(f,n-d):f()}},reset:function(){E&&clearTimeout(E),E=C=0}}},enableHtml5Elements:function(n,t){for(var l="abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),f=l.length,E;f--;)E=n.createElement(l[f]),t&&n.appendChild(E)},checkIfAnyArrayItemMatches:function(n,t){for(var l=0,f=n.length;l<f;++l)if(n[l].match(t))return!0;return!1},checkIfAnyObjectPropertyMatches:function(n,t){for(var l in n)if(l.match(t))return!0;return!1},transparentImageData:"data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw=="}}(),CKEDITOR.dtd=function(){var e=CKEDITOR.tools.extend,c=function(n,t){for(var l=CKEDITOR.tools.clone(n),f=1;f<arguments.length;f++){t=arguments[f];for(var E in t)delete l[E]}return l},r={},s={},a={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},u={command:1,link:1,meta:1,noscript:1,script:1,style:1},h={},i={"#":1},o={center:1,dir:1,noframes:1};return e(r,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,var:1,video:1,wbr:1},i,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),e(s,a,r,o),c={a:c(r,{a:1,button:1}),abbr:r,address:s,area:h,article:s,aside:s,audio:e({source:1,track:1},s),b:r,base:h,bdi:r,bdo:r,blockquote:s,body:s,br:h,button:c(r,{a:1,button:1}),canvas:r,caption:s,cite:r,code:r,col:h,colgroup:{col:1},command:h,datalist:e({option:1},r),dd:s,del:r,details:e({summary:1},s),dfn:r,div:s,dl:{dt:1,dd:1},dt:s,em:r,embed:h,fieldset:e({legend:1},s),figcaption:s,figure:e({figcaption:1},s),footer:s,form:s,h1:r,h2:r,h3:r,h4:r,h5:r,h6:r,head:e({title:1,base:1},u),header:s,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:h,html:e({head:1,body:1},s,u),i:r,iframe:i,img:h,input:h,ins:r,kbd:r,keygen:h,label:r,legend:r,li:s,link:h,main:s,map:s,mark:r,menu:e({li:1},s),meta:h,meter:c(r,{meter:1}),nav:s,noscript:e({link:1,meta:1,style:1},r),object:e({param:1},r),ol:{li:1},optgroup:{option:1},option:i,output:r,p:r,param:h,pre:r,progress:c(r,{progress:1}),q:r,rp:r,rt:r,ruby:e({rp:1,rt:1},r),s:r,samp:r,script:i,section:s,select:{optgroup:1,option:1},small:r,source:h,span:r,strong:r,style:i,sub:r,summary:e({h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},r),sup:r,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:s,textarea:i,tfoot:{tr:1},th:s,thead:{tr:1},time:c(r,{time:1}),title:i,tr:{th:1,td:1},track:h,u:r,ul:{li:1},var:r,video:e({source:1,track:1},s),wbr:h,acronym:r,applet:e({param:1},s),basefont:h,big:r,center:s,dialog:h,dir:{li:1},font:r,isindex:h,noframes:s,strike:r,tt:r},e(c,{$block:e({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},a,o),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,main:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,main:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:r,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:e({body:1,head:1,html:1},c.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,var:1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),c}(),CKEDITOR.dom.event=function(e){this.$=e},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var e=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(e+=CKEDITOR.CTRL),this.$.shiftKey&&(e+=CKEDITOR.SHIFT),this.$.altKey&&(e+=CKEDITOR.ALT),e},preventDefault:function(e){var c=this.$;c.preventDefault?c.preventDefault():c.returnValue=!1,e&&this.stopPropagation()},stopPropagation:function(){var e=this.$;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},getTarget:function(){var e=this.$.target||this.$.srcElement;return e?new CKEDITOR.dom.node(e):null},getPhase:function(){return this.$.eventPhase||2},getPageOffset:function(){var e=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(e.documentElement.scrollLeft||e.body.scrollLeft),y:this.$.pageY||this.$.clientY+(e.documentElement.scrollTop||e.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(e){e&&(this.$=e)},CKEDITOR.dom.domObject.prototype=function(){var e=function(c,r){return function(s){typeof CKEDITOR<"u"&&c.fire(r,new CKEDITOR.dom.event(s))}};return{getPrivate:function(){var c;return(c=this.getCustomData("_"))||this.setCustomData("_",c={}),c},on:function(c){var r=this.getCustomData("_cke_nativeListeners");return r||(r={},this.setCustomData("_cke_nativeListeners",r)),r[c]||(r=r[c]=e(this,c),this.$.addEventListener?this.$.addEventListener(c,r,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+c,r)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(c){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(c)){var r=this.getCustomData("_cke_nativeListeners"),s=r&&r[c];s&&(this.$.removeEventListener?this.$.removeEventListener(c,s,!1):this.$.detachEvent&&this.$.detachEvent("on"+c,s),delete r[c])}},removeAllListeners:function(){var c=this.getCustomData("_cke_nativeListeners"),r;for(r in c){var s=c[r];this.$.detachEvent?this.$.detachEvent("on"+r,s):this.$.removeEventListener&&this.$.removeEventListener(r,s,!1),delete c[r]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(e){var c={};CKEDITOR.on("reset",function(){c={}}),e.equals=function(r){try{return r&&r.$===this.$}catch{return!1}},e.setCustomData=function(r,s){var a=this.getUniqueId();return(c[a]||(c[a]={}))[r]=s,this},e.getCustomData=function(r){var s=this.$["data-cke-expando"];return(s=s&&c[s])&&r in s?s[r]:null},e.removeCustomData=function(r){var s=this.$["data-cke-expando"],s=s&&c[s],a,u;return s&&(a=s[r],u=r in s,delete s[r]),u?a:null},e.clearCustomData=function(){this.removeAllListeners();var r=this.$["data-cke-expando"];r&&delete c[r]},e.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(e)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(e){return e?new CKEDITOR.dom[e.nodeType==CKEDITOR.NODE_DOCUMENT?"document":e.nodeType==CKEDITOR.NODE_ELEMENT?"element":e.nodeType==CKEDITOR.NODE_TEXT?"text":e.nodeType==CKEDITOR.NODE_COMMENT?"comment":e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](e):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(e,c){return e.append(this,c),e},clone:function(e,c){function r(u){if(u["data-cke-expando"]&&(u["data-cke-expando"]=!1),(u.nodeType==CKEDITOR.NODE_ELEMENT||u.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(c||u.nodeType!=CKEDITOR.NODE_ELEMENT||u.removeAttribute("id",!1),e)){u=u.childNodes;for(var h=0;h<u.length;h++)r(u[h])}}function s(u){if(u.type==CKEDITOR.NODE_ELEMENT||u.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT){if(u.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var h=u.getName();h[0]==":"&&u.renameNode(h.substring(1))}if(e)for(h=0;h<u.getChildCount();h++)s(u.getChild(h))}}var a=this.$.cloneNode(e);return r(a),a=new CKEDITOR.dom.node(a),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(this.type==CKEDITOR.NODE_ELEMENT||this.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&s(a),a},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(e){return e.$.parentNode.insertBefore(this.$,e.$.nextSibling),e},insertBefore:function(e){return e.$.parentNode.insertBefore(this.$,e.$),e},insertBeforeMe:function(e){return this.$.parentNode.insertBefore(e.$,this.$),e},getAddress:function(e){for(var c=[],r=this.getDocument().$.documentElement,s=this.$;s&&s!=r;){var a=s.parentNode;a&&c.unshift(this.getIndex.call({$:s},e)),s=a}return c},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(e){function c(u,h){var i=h?u.nextSibling:u.previousSibling;return i&&i.nodeType==CKEDITOR.NODE_TEXT?i.nodeValue?i:c(i,h):null}var r=this.$,s=-1,a;if(!this.$.parentNode||e&&r.nodeType==CKEDITOR.NODE_TEXT&&!r.nodeValue&&!c(r)&&!c(r,!0))return-1;do(!e||r==this.$||r.nodeType!=CKEDITOR.NODE_TEXT||!a&&r.nodeValue)&&(s++,a=r.nodeType==CKEDITOR.NODE_TEXT);while(r=r.previousSibling);return s},getNextSourceNode:function(e,c,r){if(r&&!r.call){var s=r;r=function(u){return!u.equals(s)}}e=!e&&this.getFirst&&this.getFirst();var a;if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&r&&r(this,!0)===!1)return null;e=this.getNext()}for(;!e&&(a=(a||this).getParent());){if(r&&r(a,!0)===!1)return null;e=a.getNext()}return!e||r&&r(e)===!1?null:c&&c!=e.type?e.getNextSourceNode(!1,c,r):e},getPreviousSourceNode:function(e,c,r){if(r&&!r.call){var s=r;r=function(u){return!u.equals(s)}}e=!e&&this.getLast&&this.getLast();var a;if(!e){if(this.type==CKEDITOR.NODE_ELEMENT&&r&&r(this,!0)===!1)return null;e=this.getPrevious()}for(;!e&&(a=(a||this).getParent());){if(r&&r(a,!0)===!1)return null;e=a.getPrevious()}return!e||r&&r(e)===!1?null:c&&e.type!=c?e.getPreviousSourceNode(!1,c,r):e},getPrevious:function(e){var c=this.$,r;do r=(c=c.previousSibling)&&c.nodeType!=10&&new CKEDITOR.dom.node(c);while(r&&e&&!e(r));return r},getNext:function(e){var c=this.$,r;do r=(c=c.nextSibling)&&new CKEDITOR.dom.node(c);while(r&&e&&!e(r));return r},getParent:function(e){var c=this.$.parentNode;return c&&(c.nodeType==CKEDITOR.NODE_ELEMENT||e&&c.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(c):null},getParents:function(e){var c=this,r=[];do r[e?"push":"unshift"](c);while(c=c.getParent());return r},getCommonAncestor:function(e){if(e.equals(this))return this;if(e.contains&&e.contains(this))return e;var c=this.contains?this:this.getParent();do if(c.contains(e))return c;while(c=c.getParent());return null},getPosition:function(e){var c=this.$,r=e.$;if(c.compareDocumentPosition)return c.compareDocumentPosition(r);if(c==r)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&e.type==CKEDITOR.NODE_ELEMENT){if(c.contains){if(c.contains(r))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;if(r.contains(c))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in c)return 0>c.sourceIndex||0>r.sourceIndex?CKEDITOR.POSITION_DISCONNECTED:c.sourceIndex<r.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}c=this.getAddress(),e=e.getAddress();for(var r=Math.min(c.length,e.length),s=0;s<r;s++)if(c[s]!=e[s])return c[s]<e[s]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;return c.length<e.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(e,c){var r=this.$,s,a;for(c||(r=r.parentNode),typeof e=="function"?(a=!0,s=e):(a=!1,s=function(u){return u=typeof u.nodeName=="string"?u.nodeName.toLowerCase():"",typeof e=="string"?u==e:u in e});r;){if(s(a?new CKEDITOR.dom.node(r):r))return new CKEDITOR.dom.node(r);try{r=r.parentNode}catch{r=null}}return null},hasAscendant:function(e,c){var r=this.$;for(c||(r=r.parentNode);r;){if(r.nodeName&&r.nodeName.toLowerCase()==e)return!0;r=r.parentNode}return!1},move:function(e,c){e.append(this.remove(),c)},remove:function(e){var c=this.$,r=c.parentNode;if(r){if(e)for(;e=c.firstChild;)r.insertBefore(c.removeChild(e),c);r.removeChild(c)}return this},replace:function(e){this.insertBefore(e),e.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var e;this.getFirst&&(e=this.getFirst());){if(e.type==CKEDITOR.NODE_TEXT){var c=CKEDITOR.tools.ltrim(e.getText()),r=e.getLength();if(c)c.length<r&&(e.split(r-c.length),this.$.removeChild(this.$.firstChild));else{e.remove();continue}}break}},rtrim:function(){for(var e;this.getLast&&(e=this.getLast());){if(e.type==CKEDITOR.NODE_TEXT){var c=CKEDITOR.tools.rtrim(e.getText()),r=e.getLength();if(c)c.length<r&&(e.split(c.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild));else{e.remove();continue}}break}CKEDITOR.env.needsBrFiller&&(e=this.$.lastChild)&&e.type==1&&e.nodeName.toLowerCase()=="br"&&e.parentNode.removeChild(e)},isReadOnly:function(e){var c=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(c=this.getParent()),CKEDITOR.env.edge&&c&&c.is("textarea")&&(e=!0),!e&&c&&typeof c.$.isContentEditable<"u")return!(c.$.isContentEditable||c.data("cke-editable"));for(;c;){if(c.data("cke-editable"))return!1;if(c.hasAttribute("contenteditable"))return c.getAttribute("contenteditable")=="false";c=c.getParent()}return!0}}),CKEDITOR.dom.window=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var e=this.$.document,c=e.compatMode=="CSS1Compat";return{width:(c?e.documentElement.clientWidth:e.body.clientWidth)||0,height:(c?e.documentElement.clientHeight:e.body.clientHeight)||0}},getScrollPosition:function(){var e=this.$;return"pageXOffset"in e?{x:e.pageXOffset||0,y:e.pageYOffset||0}:(e=e.document,{x:e.documentElement.scrollLeft||e.body.scrollLeft||0,y:e.documentElement.scrollTop||e.body.scrollTop||0})},getFrame:function(){var e=this.$.frameElement;return e?new CKEDITOR.dom.element.get(e):null}}),CKEDITOR.dom.document=function(e){CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(e){if(this.$.createStyleSheet)this.$.createStyleSheet(e);else{var c=new CKEDITOR.dom.element("link");c.setAttributes({rel:"stylesheet",type:"text/css",href:e}),this.getHead().append(c)}},appendStyleText:function(e){if(this.$.createStyleSheet){var c=this.$.createStyleSheet("");c.cssText=e}else{var r=new CKEDITOR.dom.element("style",this);r.append(new CKEDITOR.dom.text(e,this)),this.getHead().append(r)}return c||r.$.sheet},createElement:function(e,c){var r=new CKEDITOR.dom.element(e,this);return c&&(c.attributes&&r.setAttributes(c.attributes),c.styles&&r.setStyles(c.styles)),r},createText:function(e){return new CKEDITOR.dom.text(e,this)},focus:function(){this.getWindow().focus()},getActive:function(){var e;try{e=this.$.activeElement}catch{return null}return new CKEDITOR.dom.element(e)},getById:function(e){return(e=this.$.getElementById(e))?new CKEDITOR.dom.element(e):null},getByAddress:function(e,c){for(var r=this.$.documentElement,s=0;r&&s<e.length;s++){var a=e[s];if(c)for(var u=-1,h=0;h<r.childNodes.length;h++){var i=r.childNodes[h];if((c!==!0||i.nodeType!=3||!i.previousSibling||i.previousSibling.nodeType!=3)&&(u++,u==a)){r=i;break}}else r=r.childNodes[a]}return r?new CKEDITOR.dom.node(r):null},getElementsByTag:function(e,c){return CKEDITOR.env.ie&&8>=document.documentMode||!c||(e=c+":"+e),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(e))},getHead:function(){var e=this.$.getElementsByTagName("head")[0];return e=e?new CKEDITOR.dom.element(e):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)},write:function(e){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(e=e.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,`$&
<script data-cke-temp="1">(`+CKEDITOR.tools.fixDomain+")();<\/script>")),this.$.write(e),this.$.close()},find:function(e){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(e))},findOne:function(e){return(e=this.$.querySelector(e))?new CKEDITOR.dom.element(e):null},_getHtml5ShivFrag:function(){var e=this.getCustomData("html5ShivFrag");return e||(e=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(e,!0),this.setCustomData("html5ShivFrag",e)),e}}),CKEDITOR.dom.nodeList=function(e){this.$=e},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length},getItem:function(e){return 0>e||e>=this.$.length?null:(e=this.$[e])?new CKEDITOR.dom.node(e):null}},CKEDITOR.dom.element=function(e,c){typeof e=="string"&&(e=(c?c.$:document).createElement(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.element.get=function(e){return(e=typeof e=="string"?document.getElementById(e)||document.getElementsByName(e)[0]:e)&&(e.$?e:new CKEDITOR.dom.element(e))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(e,c){var r=new CKEDITOR.dom.element("div",c);return r.setHtml(e),r.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(e,c,r,s){var a=c.getCustomData("list_marker_id")||c.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),u=c.getCustomData("list_marker_names")||c.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");return e[a]=c,u[r]=1,c.setCustomData(r,s)},CKEDITOR.dom.element.clearAllMarkers=function(e){for(var c in e)CKEDITOR.dom.element.clearMarkers(e,e[c],1)},CKEDITOR.dom.element.clearMarkers=function(e,c,r){var s=c.getCustomData("list_marker_names"),a=c.getCustomData("list_marker_id"),u;for(u in s)c.removeCustomData(u);c.removeCustomData("list_marker_names"),r&&(c.removeCustomData("list_marker_id"),delete e[a])},function(){function e(i,o){return-1<(" "+i+" ").replace(u," ").indexOf(" "+o+" ")}function c(i){var o=!0;return i.$.id||(i.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),o=!1),function(){o||i.removeAttribute("id")}}function r(i,o){return"#"+i.$.id+" "+o.split(/,\s*/).join(", #"+i.$.id+" ")}function s(i){for(var o=0,n=0,t=h[i].length;n<t;n++)o+=parseInt(this.getComputedStyle(h[i][n])||0,10)||0;return o}var a=!!document.createElement("span").classList,u=/[\n\t\r]/g;CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:a?function(i){return this.$.classList.add(i),this}:function(i){var o=this.$.className;return o&&(e(o,i)||(o+=" "+i)),this.$.className=o||i,this},removeClass:a?function(i){var o=this.$;return o.classList.remove(i),o.className||o.removeAttribute("class"),this}:function(i){var o=this.getAttribute("class");return o&&e(o,i)&&((o=o.replace(new RegExp("(?:^|\\s+)"+i+"(?=\\s|$)"),"").replace(/^\s+/,""))?this.setAttribute("class",o):this.removeAttribute("class")),this},hasClass:function(i){return e(this.$.className,i)},append:function(i,o){return typeof i=="string"&&(i=this.getDocument().createElement(i)),o?this.$.insertBefore(i.$,this.$.firstChild):this.$.appendChild(i.$),i},appendHtml:function(i){if(this.$.childNodes.length){var o=new CKEDITOR.dom.element("div",this.getDocument());o.setHtml(i),o.moveChildren(this)}else this.setHtml(i)},appendText:function(i){this.$.text!=null&&CKEDITOR.env.ie&&9>CKEDITOR.env.version?this.$.text+=i:this.append(new CKEDITOR.dom.text(i))},appendBogus:function(i){if(i||CKEDITOR.env.needsBrFiller){for(i=this.getLast();i&&i.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(i.getText());)i=i.getPrevious();i&&i.is&&i.is("br")||(i=this.getDocument().createElement("br"),CKEDITOR.env.gecko&&i.setAttribute("type","_moz"),this.append(i))}},breakParent:function(i,o){var n=new CKEDITOR.dom.range(this.getDocument());n.setStartAfter(this),n.setEndAfter(i);var t=n.extractContents(!1,o||!1);n.insertNode(this.remove()),t.insertAfterNode(this)},contains:document.compareDocumentPosition?function(i){return!!(this.$.compareDocumentPosition(i.$)&16)}:function(i){var o=this.$;return i.type!=CKEDITOR.NODE_ELEMENT?o.contains(i.getParent().$):o!=i.$&&o.contains(i.$)},focus:function(){function i(){try{this.$.focus()}catch{}}return function(o){o?CKEDITOR.tools.setTimeout(i,100,this):i.call(this)}}(),getHtml:function(){var i=this.$.innerHTML;return CKEDITOR.env.ie?i.replace(/<\?[^>]*>/g,""):i},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var i=this.$.ownerDocument.createElement("div");return i.appendChild(this.$.cloneNode(!0)),i.innerHTML},getClientRect:function(){var i=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!i.width&&(i.width=i.right-i.left),!i.height&&(i.height=i.bottom-i.top),i},setHtml:CKEDITOR.env.ie&&9>CKEDITOR.env.version?function(i){try{var o=this.$;if(this.getParent())return o.innerHTML=i;var n=this.getDocument()._getHtml5ShivFrag();return n.appendChild(o),o.innerHTML=i,n.removeChild(o),i}catch{for(this.$.innerHTML="",o=new CKEDITOR.dom.element("body",this.getDocument()),o.$.innerHTML=i,o=o.getChildren();o.count();)this.append(o.getItem(0));return i}}:function(i){return this.$.innerHTML=i},setText:function(){var i=document.createElement("p");return i.innerHTML="x",i=i.textContent,function(o){this.$[i?"textContent":"innerText"]=o}}(),getAttribute:function(){var i=function(o){return this.$.getAttribute(o,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(o){switch(o){case"class":o="className";break;case"http-equiv":o="httpEquiv";break;case"name":return this.$.name;case"tabindex":return o=this.$.getAttribute(o,2),o!==0&&this.$.tabIndex===0&&(o=null),o;case"checked":return o=this.$.attributes.getNamedItem(o),(o.specified?o.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[o];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null}return this.$.getAttribute(o,2)}:i}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:document.defaultView&&document.defaultView.getComputedStyle?function(i){var o=this.getWindow().$.getComputedStyle(this.$,null);return o?o.getPropertyValue(i):""}:function(i){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(i)]},getDtd:function(){var i=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return i},i},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:function(){var i=this.$.tabIndex;return i!==0||CKEDITOR.dtd.$tabIndex[this.getName()]||parseInt(this.getAttribute("tabindex"),10)===0?i:-1},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var i=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&8>=document.documentMode){var o=this.$.scopeName;o!="HTML"&&(i=o.toLowerCase()+":"+i)}return this.getName=function(){return i},this.getName()},getValue:function(){return this.$.value},getFirst:function(i){var o=this.$.firstChild;return(o=o&&new CKEDITOR.dom.node(o))&&i&&!i(o)&&(o=o.getNext(i)),o},getLast:function(i){var o=this.$.lastChild;return(o=o&&new CKEDITOR.dom.node(o))&&i&&!i(o)&&(o=o.getPrevious(i)),o},getStyle:function(i){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(i)]},is:function(){var i=this.getName();if(typeof arguments[0]=="object")return!!arguments[0][i];for(var o=0;o<arguments.length;o++)if(arguments[o]==i)return!0;return!1},isEditable:function(i){var o=this.getName();return this.isReadOnly()||this.getComputedStyle("display")=="none"||this.getComputedStyle("visibility")=="hidden"||CKEDITOR.dtd.$nonEditable[o]||CKEDITOR.dtd.$empty[o]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:i!==!1?(i=CKEDITOR.dtd[o]||CKEDITOR.dtd.span,!(!i||!i["#"])):!0},isIdentical:function(i){var o=this.clone(0,1);if(i=i.clone(0,1),o.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),i.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),o.$.isEqualNode)return o.$.style.cssText=CKEDITOR.tools.normalizeCssText(o.$.style.cssText),i.$.style.cssText=CKEDITOR.tools.normalizeCssText(i.$.style.cssText),o.$.isEqualNode(i.$);if(o=o.getOuterHtml(),i=i.getOuterHtml(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&this.is("a")){var n=this.getParent();n.type==CKEDITOR.NODE_ELEMENT&&(n=n.clone(),n.setHtml(o),o=n.getHtml(),n.setHtml(i),i=n.getHtml())}return o==i},isVisible:function(){var i=(this.$.offsetHeight||this.$.offsetWidth)&&this.getComputedStyle("visibility")!="hidden",o,n;return i&&CKEDITOR.env.webkit&&(o=this.getWindow(),!o.equals(CKEDITOR.document.getWindow())&&(n=o.$.frameElement)&&(i=new CKEDITOR.dom.element(n).isVisible())),!!i},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var i=this.getChildren(),o=0,n=i.count();o<n;o++){var t=i.getItem(o);if((t.type!=CKEDITOR.NODE_ELEMENT||!t.data("cke-bookmark"))&&(t.type==CKEDITOR.NODE_ELEMENT&&!t.isEmptyInlineRemoveable()||t.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(t.getText())))return!1}return!0},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(){for(var i=this.$.attributes,o=0;o<i.length;o++){var n=i[o];switch(n.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(n.specified)return!0}}return!1}:function(){var i=this.$.attributes,o=i.length,n={"data-cke-expando":1,_moz_dirty:1};return 0<o&&(2<o||!n[i[0].nodeName]||o==2&&!n[i[1].nodeName])},hasAttribute:function(){function i(o){var n=this.$.attributes.getNamedItem(o);if(this.getName()=="input")switch(o){case"class":return 0<this.$.className.length;case"checked":return!!this.$.checked;case"value":return o=this.getAttribute("type"),o=="checkbox"||o=="radio"?this.$.value!="on":!!this.$.value}return n?n.specified:!1}return CKEDITOR.env.ie?8>CKEDITOR.env.version?function(o){return o=="name"?!!this.$.name:i.call(this,o)}:i:function(o){return!!this.$.attributes.getNamedItem(o)}}(),hide:function(){this.setStyle("display","none")},moveChildren:function(i,o){var n=this.$;if(i=i.$,n!=i){var t;if(o)for(;t=n.lastChild;)i.insertBefore(n.removeChild(t),i.firstChild);else for(;t=n.firstChild;)i.appendChild(n.removeChild(t))}},mergeSiblings:function(){function i(o,n,t){if(n&&n.type==CKEDITOR.NODE_ELEMENT){for(var l=[];n.data("cke-bookmark")||n.isEmptyInlineRemoveable();)if(l.push(n),n=t?n.getNext():n.getPrevious(),!n||n.type!=CKEDITOR.NODE_ELEMENT)return;if(o.isIdentical(n)){for(var f=t?o.getLast():o.getFirst();l.length;)l.shift().move(o,!t);n.moveChildren(o,!t),n.remove(),f&&f.type==CKEDITOR.NODE_ELEMENT&&f.mergeSiblings()}}}return function(o){(o===!1||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(i(this,this.getNext(),!0),i(this,this.getPrevious()))}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var i=function(o,n){return this.$.setAttribute(o,n),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(o,n){return o=="class"?this.$.className=n:o=="style"?this.$.style.cssText=n:o=="tabindex"?this.$.tabIndex=n:o=="checked"?this.$.checked=n:o=="contenteditable"?i.call(this,"contentEditable",n):i.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(o,n){if(o=="src"&&n.match(/^http:\/\//))try{i.apply(this,arguments)}catch{}else i.apply(this,arguments);return this}:i}(),setAttributes:function(i){for(var o in i)this.setAttribute(o,i[o]);return this},setValue:function(i){return this.$.value=i,this},removeAttribute:function(){var i=function(o){this.$.removeAttribute(o)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)?function(o){o=="class"?o="className":o=="tabindex"?o="tabIndex":o=="contenteditable"&&(o="contentEditable"),this.$.removeAttribute(o)}:i}(),removeAttributes:function(i){if(CKEDITOR.tools.isArray(i))for(var o=0;o<i.length;o++)this.removeAttribute(i[o]);else for(o in i)i.hasOwnProperty(o)&&this.removeAttribute(o)},removeStyle:function(i){var o=this.$.style;if(o.removeProperty||i!="border"&&i!="margin"&&i!="padding")o.removeProperty?o.removeProperty(i):o.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(i)),this.$.style.cssText||this.removeAttribute("style");else{var n=["top","left","right","bottom"],t;i=="border"&&(t=["color","style","width"]);for(var o=[],l=0;l<n.length;l++)if(t)for(var f=0;f<t.length;f++)o.push([i,n[l],t[f]].join("-"));else o.push([i,n[l]].join("-"));for(i=0;i<o.length;i++)this.removeStyle(o[i])}},setStyle:function(i,o){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(i)]=o,this},setStyles:function(i){for(var o in i)this.setStyle(o,i[o]);return this},setOpacity:function(i){CKEDITOR.env.ie&&9>CKEDITOR.env.version?(i=Math.round(100*i),this.setStyle("filter",100<=i?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+i+")")):this.setStyle("opacity",i)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie){this.setAttribute("unselectable","on");for(var i,o=this.getElementsByTag("*"),n=0,t=o.count();n<t;n++)i=o.getItem(n),i.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var i=this;i.getName()!="html";){if(i.getComputedStyle("position")!="static")return i;i=i.getParent()}return null},getDocumentPosition:function(i){var o=0,n=0,t=this.getDocument(),l=t.getBody(),f=t.$.compatMode=="BackCompat";if(document.documentElement.getBoundingClientRect){var E=this.$.getBoundingClientRect(),C=t.$.documentElement,d=C.clientTop||l.$.clientTop||0,p=C.clientLeft||l.$.clientLeft||0,I=!0;CKEDITOR.env.ie&&(I=t.getDocumentElement().contains(this),t=t.getBody().contains(this),I=f&&t||!f&&I),I&&(CKEDITOR.env.webkit||CKEDITOR.env.ie&&12<=CKEDITOR.env.version?(o=l.$.scrollLeft||C.scrollLeft,n=l.$.scrollTop||C.scrollTop):(n=f?l.$:C,o=n.scrollLeft,n=n.scrollTop),o=E.left+o-p,n=E.top+n-d)}else for(d=this,p=null;d&&d.getName()!="body"&&d.getName()!="html";){for(o+=d.$.offsetLeft-d.$.scrollLeft,n+=d.$.offsetTop-d.$.scrollTop,d.equals(this)||(o+=d.$.clientLeft||0,n+=d.$.clientTop||0);p&&!p.equals(d);)o-=p.$.scrollLeft,n-=p.$.scrollTop,p=p.getParent();p=d,d=(E=d.$.offsetParent)?new CKEDITOR.dom.element(E):null}return i&&(E=this.getWindow(),d=i.getWindow(),!E.equals(d)&&E.$.frameElement&&(i=new CKEDITOR.dom.element(E.$.frameElement).getDocumentPosition(i),o+=i.x,n+=i.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||f||(o+=this.$.clientLeft?1:0,n+=this.$.clientTop?1:0),{x:o,y:n}},scrollIntoView:function(i){var o=this.getParent();if(o)do if((o.$.clientWidth&&o.$.clientWidth<o.$.scrollWidth||o.$.clientHeight&&o.$.clientHeight<o.$.scrollHeight)&&!o.is("body")&&this.scrollIntoParent(o,i,1),o.is("html")){var n=o.getWindow();try{var t=n.$.frameElement;t&&(o=new CKEDITOR.dom.element(t))}catch{}}while(o=o.getParent())},scrollIntoParent:function(i,o,n){var t,l,f,E;function C(O,v){/body|html/.test(i.getName())?i.getWindow().$.scrollBy(O,v):(i.$.scrollLeft+=O,i.$.scrollTop+=v)}function d(O,v){var K={x:0,y:0};if(!O.is(I?"body":"html")){var k=O.$.getBoundingClientRect();K.x=k.left,K.y=k.top}return k=O.getWindow(),k.equals(v)||(k=d(CKEDITOR.dom.element.get(k.$.frameElement),v),K.x+=k.x,K.y+=k.y),K}function p(O,v){return parseInt(O.getComputedStyle("margin-"+v)||0,10)||0}!i&&(i=this.getWindow()),f=i.getDocument();var I=f.$.compatMode=="BackCompat";i instanceof CKEDITOR.dom.window&&(i=I?f.getBody():f.getDocumentElement()),f=i.getWindow(),l=d(this,f);var _=d(i,f),m=this.$.offsetHeight;t=this.$.offsetWidth;var g=i.$.clientHeight,D=i.$.clientWidth;f=l.x-p(this,"left")-_.x||0,E=l.y-p(this,"top")-_.y||0,t=l.x+t+p(this,"right")-(_.x+D)||0,l=l.y+m+p(this,"bottom")-(_.y+g)||0,(0>E||0<l)&&C(0,o===!0?E:o===!1?l:0>E?E:l),n&&(0>f||0<t)&&C(0>f?f:t,0)},setState:function(i,o,n){switch(o=o||"cke",i){case CKEDITOR.TRISTATE_ON:this.addClass(o+"_on"),this.removeClass(o+"_off"),this.removeClass(o+"_disabled"),n&&this.setAttribute("aria-pressed",!0),n&&this.removeAttribute("aria-disabled");break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(o+"_disabled"),this.removeClass(o+"_off"),this.removeClass(o+"_on"),n&&this.setAttribute("aria-disabled",!0),n&&this.removeAttribute("aria-pressed");break;default:this.addClass(o+"_off"),this.removeClass(o+"_on"),this.removeClass(o+"_disabled"),n&&this.removeAttribute("aria-pressed"),n&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var i=this.$;try{i.contentWindow.document}catch{i.src=i.src}return i&&new CKEDITOR.dom.document(i.contentWindow.document)},copyAttributes:function(i,o){var n=this.$.attributes;o=o||{};for(var t=0;t<n.length;t++){var l=n[t],f=l.nodeName.toLowerCase(),E;f in o||(f=="checked"&&(E=this.getAttribute(f))?i.setAttribute(f,E):(!CKEDITOR.env.ie||this.hasAttribute(f))&&(E=this.getAttribute(f),E===null&&(E=l.nodeValue),i.setAttribute(f,E)))}this.$.style.cssText!==""&&(i.$.style.cssText=this.$.style.cssText)},renameNode:function(i){if(this.getName()!=i){var o=this.getDocument();i=new CKEDITOR.dom.element(i,o),this.copyAttributes(i),this.moveChildren(i),this.getParent(!0)&&this.$.parentNode.replaceChild(i.$,this.$),i.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=i.$,delete this.getName}},getChild:function(){function i(o,n){var t=o.childNodes;if(0<=n&&n<t.length)return t[n]}return function(o){var n=this.$;if(o.slice)for(o=o.slice();0<o.length&&n;)n=i(n,o.shift());else n=i(n,o);return n?new CKEDITOR.dom.node(n):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){function i(o){return o.type==CKEDITOR.NODE_ELEMENT&&o.hasClass("cke_enable_context_menu")}this.on("contextmenu",function(o){o.data.getTarget().getAscendant(i,!0)||o.data.preventDefault()})},getDirection:function(i){return i?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(i,o){return i="data-"+i,o===void 0?this.getAttribute(i):(o===!1?this.removeAttribute(i):this.setAttribute(i,o),null)},getEditor:function(){var i=CKEDITOR.instances,o,n;for(o in i)if(n=i[o],n.element.equals(this)&&n.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO)return n;return null},find:function(i){var o=c(this);return i=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(r(this,i))),o(),i},findOne:function(i){var o=c(this);return i=this.$.querySelector(r(this,i)),o(),i?new CKEDITOR.dom.element(i):null},forEach:function(i,o,n){if(!(n||o&&this.type!=o))var t=i(this);if(t!==!1){n=this.getChildren();for(var l=0;l<n.count();l++)t=n.getItem(l),t.type==CKEDITOR.NODE_ELEMENT?t.forEach(i,o):o&&t.type!=o||i(t)}}});var h={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(i,o,n){typeof o=="number"&&(!n||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(o-=s.call(this,i)),this.setStyle(i,o+"px"))},CKEDITOR.dom.element.prototype.getSize=function(i,o){var n=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(i)],this.$["client"+CKEDITOR.tools.capitalize(i)])||0;return o&&(n-=s.call(this,i)),n}}(),CKEDITOR.dom.documentFragment=function(e){e=e||CKEDITOR.document,this.$=e.type==CKEDITOR.NODE_DOCUMENT?e.$.createDocumentFragment():e},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(e){e=e.$,e.parentNode.insertBefore(this.$,e.nextSibling)},getHtml:function(){var e=new CKEDITOR.dom.element("div");return this.clone(1,1).appendTo(e),e.getHtml().replace(/\s*data-cke-expando=".*?"/g,"")}},!0,{append:1,appendBogus:1,clone:1,getFirst:1,getHtml:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function e(f,E){var C=this.range;if(this._.end)return null;if(!this._.start){if(this._.start=1,C.collapsed)return this.end(),null;C.optimize()}var d,p=C.startContainer;d=C.endContainer;var I=C.startOffset,_=C.endOffset,m,g=this.guard,D=this.type,O=f?"getPreviousSourceNode":"getNextSourceNode";if(!f&&!this._.guardLTR){var v=d.type==CKEDITOR.NODE_ELEMENT?d:d.getParent(),K=d.type==CKEDITOR.NODE_ELEMENT?d.getChild(_):d.getNext();this._.guardLTR=function(F,H){return(!H||!v.equals(F))&&(!K||!F.equals(K))&&(F.type!=CKEDITOR.NODE_ELEMENT||!H||!F.equals(C.root))}}if(f&&!this._.guardRTL){var k=p.type==CKEDITOR.NODE_ELEMENT?p:p.getParent(),L=p.type==CKEDITOR.NODE_ELEMENT?I?p.getChild(I-1):null:p.getPrevious();this._.guardRTL=function(F,H){return(!H||!k.equals(F))&&(!L||!F.equals(L))&&(F.type!=CKEDITOR.NODE_ELEMENT||!H||!F.equals(C.root))}}var B=f?this._.guardRTL:this._.guardLTR;for(m=g?function(F,H){return B(F,H)===!1?!1:g(F,H)}:B,this.current?d=this.current[O](!1,D,m):(f?d.type==CKEDITOR.NODE_ELEMENT&&(d=0<_?d.getChild(_-1):m(d,!0)===!1?null:d.getPreviousSourceNode(!0,D,m)):(d=p,d.type==CKEDITOR.NODE_ELEMENT&&((d=d.getChild(I))||(d=m(p,!0)===!1?null:p.getNextSourceNode(!0,D,m)))),d&&m(d)===!1&&(d=null));d&&!this._.end;){if(this.current=d,!this.evaluator||this.evaluator(d)!==!1){if(!E)return d}else if(E&&this.evaluator)return!1;d=d[O](!1,D,m)}return this.end(),this.current=null}function c(f){for(var E,C=null;E=e.call(this,f);)C=E;return C}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(f){this.range=f,this._={}},proto:{end:function(){this._.end=1},next:function(){return e.call(this)},previous:function(){return e.call(this,1)},checkForward:function(){return e.call(this,0,1)!==!1},checkBackward:function(){return e.call(this,1,1)!==!1},lastForward:function(){return c.call(this)},lastBackward:function(){return c.call(this,1)},reset:function(){delete this.current,this._={}}}});var r={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},s={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(f){return this.getComputedStyle("float")!="none"||this.getComputedStyle("position")in s||!r[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||f&&this.is(f)):!0},CKEDITOR.dom.walker.blockBoundary=function(f){return function(E){return!(E.type==CKEDITOR.NODE_ELEMENT&&E.isBlockBoundary(f))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})},CKEDITOR.dom.walker.bookmark=function(f,E){function C(d){return d&&d.getName&&d.getName()=="span"&&d.data("cke-bookmark")}return function(d){var p,I;return p=d&&d.type!=CKEDITOR.NODE_ELEMENT&&(I=d.getParent())&&C(I),p=f?p:p||C(d),!!(E^p)}},CKEDITOR.dom.walker.whitespaces=function(f){return function(E){var C;return E&&E.type==CKEDITOR.NODE_TEXT&&(C=!CKEDITOR.tools.trim(E.getText())||CKEDITOR.env.webkit&&E.getText()=="​"),!!(f^C)}},CKEDITOR.dom.walker.invisible=function(f){var E=CKEDITOR.dom.walker.whitespaces(),C=CKEDITOR.env.webkit?1:0;return function(d){return E(d)?d=1:(d.type==CKEDITOR.NODE_TEXT&&(d=d.getParent()),d=d.$.offsetWidth<=C),!!(f^d)}},CKEDITOR.dom.walker.nodeType=function(f,E){return function(C){return!!(E^C.type==f)}},CKEDITOR.dom.walker.bogus=function(f){function E(C){return!u(C)&&!h(C)}return function(C){var d=CKEDITOR.env.needsBrFiller?C.is&&C.is("br"):C.getText&&a.test(C.getText());return d&&(d=C.getParent(),C=C.getNext(E),d=d.isBlockBoundary()&&(!C||C.type==CKEDITOR.NODE_ELEMENT&&C.isBlockBoundary())),!!(f^d)}},CKEDITOR.dom.walker.temp=function(f){return function(E){return E.type!=CKEDITOR.NODE_ELEMENT&&(E=E.getParent()),E=E&&E.hasAttribute("data-cke-temp"),!!(f^E)}};var a=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,u=CKEDITOR.dom.walker.whitespaces(),h=CKEDITOR.dom.walker.bookmark(),i=CKEDITOR.dom.walker.temp(),o=function(f){return h(f)||u(f)||f.type==CKEDITOR.NODE_ELEMENT&&f.is(CKEDITOR.dtd.$inline)&&!f.is(CKEDITOR.dtd.$empty)};CKEDITOR.dom.walker.ignored=function(f){return function(E){return E=u(E)||h(E)||i(E),!!(f^E)}};var n=CKEDITOR.dom.walker.ignored();CKEDITOR.dom.walker.empty=function(f){return function(E){for(var C=0,d=E.getChildCount();C<d;++C)if(!n(E.getChild(C)))return!!f;return!f}};var t=CKEDITOR.dom.walker.empty(),l=CKEDITOR.dom.walker.validEmptyBlockContainers=CKEDITOR.tools.extend(function(f){var E={},C;for(C in f)CKEDITOR.dtd[C]["#"]&&(E[C]=1);return E}(CKEDITOR.dtd.$block),{caption:1,td:1,th:1});CKEDITOR.dom.walker.editable=function(f){return function(E){return E=n(E)?!1:!!(E.type==CKEDITOR.NODE_TEXT||E.type==CKEDITOR.NODE_ELEMENT&&(E.is(CKEDITOR.dtd.$inline)||E.is("hr")||E.getAttribute("contenteditable")=="false"||!CKEDITOR.env.needsBrFiller&&E.is(l)&&t(E))),!!(f^E)}},CKEDITOR.dom.element.prototype.getBogus=function(){var f=this;do f=f.getPreviousSourceNode();while(o(f));return f&&(CKEDITOR.env.needsBrFiller?f.is&&f.is("br"):f.getText&&a.test(f.getText()))?f:!1}}(),CKEDITOR.dom.range=function(e){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var c=e instanceof CKEDITOR.dom.document;this.document=c?e:e.getDocument(),this.root=c?e.getBody():e},function(){function e(t){t.collapsed=t.startContainer&&t.endContainer&&t.startContainer.equals(t.endContainer)&&t.startOffset==t.endOffset}function c(t,l,f,E,C){function d(M,U,V,W){var Y=V?M.getPrevious():M.getNext();return W&&_||(g||W?U.append(M.clone(!0,C),V):(M.remove(),m&&U.append(M))),Y}function p(){var M,U,V,W=Math.min(T.length,x.length);for(M=0;M<W;M++)if(U=T[M],V=x[M],!U.equals(V))return M;return M-1}function I(){var M=S-1,U=B&&F&&!D.equals(O);M<y-1||M<N-1||U?(U?t.moveToPosition(O,CKEDITOR.POSITION_BEFORE_START):N==M+1&&L?t.moveToPosition(x[M],CKEDITOR.POSITION_BEFORE_END):t.moveToPosition(x[M+1],CKEDITOR.POSITION_BEFORE_START),E&&(M=T[M+1])&&M.type==CKEDITOR.NODE_ELEMENT&&(U=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',t.document),U.insertAfter(M),M.mergeSiblings(!1),t.moveToBookmark({startNode:U}))):t.collapse(!0)}t.optimizeBookmark();var _=l===0,m=l==1,g=l==2;l=g||m;var D=t.startContainer,O=t.endContainer,v=t.startOffset,K=t.endOffset,k,L,B,F,H,z;if(g&&O.type==CKEDITOR.NODE_TEXT&&D.equals(O))D=t.document.createText(D.substring(v,K)),f.append(D);else{O.type==CKEDITOR.NODE_TEXT?g?z=!0:O=O.split(K):0<O.getChildCount()?K>=O.getChildCount()?(O=O.getChild(K-1),L=!0):O=O.getChild(K):F=L=!0,D.type==CKEDITOR.NODE_TEXT?g?H=!0:D.split(v):0<D.getChildCount()?v===0?(D=D.getChild(v),k=!0):D=D.getChild(v-1):B=k=!0;for(var T=D.getParents(),x=O.getParents(),S=p(),y=T.length-1,N=x.length-1,w=f,R,b,A,P=-1,$=S;$<=y;$++){for(b=T[$],A=b.getNext(),$!=y||b.equals(x[$])&&y<N?l&&(R=w.append(b.clone(0,C))):k?d(b,w,!1,B):H&&w.append(t.document.createText(b.substring(v)));A;){if(A.equals(x[$])){P=$;break}A=d(A,w)}w=R}for(w=f,$=S;$<=N;$++)if(f=x[$],A=f.getPrevious(),f.equals(T[$]))l&&(w=w.getChild(0));else{if($!=N||f.equals(T[$])&&N<y?l&&(R=w.append(f.clone(0,C))):L?d(f,w,!1,F):z&&w.append(t.document.createText(f.substring(0,K))),$>P)for(;A;)A=d(A,w,!0);w=R}g||I()}}function r(){var t=!1,l=CKEDITOR.dom.walker.whitespaces(),f=CKEDITOR.dom.walker.bookmark(!0),E=CKEDITOR.dom.walker.bogus();return function(C){return f(C)||l(C)?!0:E(C)&&!t?t=!0:!(C.type==CKEDITOR.NODE_TEXT&&(C.hasAscendant("pre")||CKEDITOR.tools.trim(C.getText()).length)||C.type==CKEDITOR.NODE_ELEMENT&&!C.is(u))}}function s(t){var l=CKEDITOR.dom.walker.whitespaces(),f=CKEDITOR.dom.walker.bookmark(1);return function(E){return f(E)||l(E)?!0:!t&&h(E)||E.type==CKEDITOR.NODE_ELEMENT&&E.is(CKEDITOR.dtd.$removeEmpty)}}function a(t){return function(){var l;return this[t?"getPreviousNode":"getNextNode"](function(f){return!l&&n(f)&&(l=f),o(f)&&!(h(f)&&f.equals(l))})}}var u={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1},h=CKEDITOR.dom.walker.bogus(),i=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,o=CKEDITOR.dom.walker.editable(),n=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var t=new CKEDITOR.dom.range(this.root);return t._setStartContainer(this.startContainer),t.startOffset=this.startOffset,t._setEndContainer(this.endContainer),t.endOffset=this.endOffset,t.collapsed=this.collapsed,t},collapse:function(t){t?(this._setEndContainer(this.startContainer),this.endOffset=this.startOffset):(this._setStartContainer(this.endContainer),this.startOffset=this.endOffset),this.collapsed=!0},cloneContents:function(t){var l=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||c(this,2,l,!1,typeof t>"u"?!0:t),l},deleteContents:function(t){this.collapsed||c(this,0,null,t)},extractContents:function(t,l){var f=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||c(this,1,f,t,typeof l>"u"?!0:l),f},createBookmark:function(t){var l,f,E,C,d=this.collapsed;return l=this.document.createElement("span"),l.data("cke-bookmark",1),l.setStyle("display","none"),l.setHtml("&nbsp;"),t&&(E="cke_bm_"+CKEDITOR.tools.getNextNumber(),l.setAttribute("id",E+(d?"C":"S"))),d||(f=l.clone(),f.setHtml("&nbsp;"),t&&f.setAttribute("id",E+"E"),C=this.clone(),C.collapse(),C.insertNode(f)),C=this.clone(),C.collapse(!0),C.insertNode(l),f?(this.setStartAfter(l),this.setEndBefore(f)):this.moveToPosition(l,CKEDITOR.POSITION_AFTER_END),{startNode:t?E+(d?"C":"S"):l,endNode:t?E+"E":f,serializable:t,collapsed:d}},createBookmark2:function(){function t(f){var E=f.container,C=f.offset,d;d=E;var p=C;if(d=d.type!=CKEDITOR.NODE_ELEMENT||p===0||p==d.getChildCount()?0:d.getChild(p-1).type==CKEDITOR.NODE_TEXT&&d.getChild(p).type==CKEDITOR.NODE_TEXT,d&&(E=E.getChild(C-1),C=E.getLength()),E.type==CKEDITOR.NODE_ELEMENT&&1<C&&(C=E.getChild(C-1).getIndex(!0)+1),E.type==CKEDITOR.NODE_TEXT){for(d=E,p=0;(d=d.getPrevious())&&d.type==CKEDITOR.NODE_TEXT;)p+=d.getLength();d=p,E.getText()?C+=d:(p=E.getPrevious(l),d?(C=d,E=p?p.getNext():E.getParent().getFirst()):(E=E.getParent(),C=p?p.getIndex(!0)+1:0))}f.container=E,f.offset=C}var l=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_TEXT,!0);return function(f){var E=this.collapsed,C={container:this.startContainer,offset:this.startOffset},d={container:this.endContainer,offset:this.endOffset};return f&&(t(C),E||t(d)),{start:C.container.getAddress(f),end:E?null:d.container.getAddress(f),startOffset:C.offset,endOffset:d.offset,normalized:f,collapsed:E,is2:!0}}}(),moveToBookmark:function(t){if(t.is2){var l=this.document.getByAddress(t.start,t.normalized),f=t.startOffset,E=t.end&&this.document.getByAddress(t.end,t.normalized);t=t.endOffset,this.setStart(l,f),E?this.setEnd(E,t):this.collapse(!0)}else l=(f=t.serializable)?this.document.getById(t.startNode):t.startNode,t=f?this.document.getById(t.endNode):t.endNode,this.setStartBefore(l),l.remove(),t?(this.setEndBefore(t),t.remove()):this.collapse(!0)},getBoundaryNodes:function(){var t=this.startContainer,l=this.endContainer,f=this.startOffset,E=this.endOffset,C;if(t.type==CKEDITOR.NODE_ELEMENT)if(C=t.getChildCount(),C>f)t=t.getChild(f);else if(1>C)t=t.getPreviousSourceNode();else{for(t=t.$;t.lastChild;)t=t.lastChild;t=new CKEDITOR.dom.node(t),t=t.getNextSourceNode()||t}if(l.type==CKEDITOR.NODE_ELEMENT)if(C=l.getChildCount(),C>E)l=l.getChild(E).getPreviousSourceNode(!0);else if(1>C)l=l.getPreviousSourceNode();else{for(l=l.$;l.lastChild;)l=l.lastChild;l=new CKEDITOR.dom.node(l)}return t.getPosition(l)&CKEDITOR.POSITION_FOLLOWING&&(t=l),{startNode:t,endNode:l}},getCommonAncestor:function(t,l){var E=this.startContainer,f=this.endContainer,E=E.equals(f)?t&&E.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?E.getChild(this.startOffset):E:E.getCommonAncestor(f);return l&&!E.is?E.getParent():E},optimize:function(){var t=this.startContainer,l=this.startOffset;t.type!=CKEDITOR.NODE_ELEMENT&&(l?l>=t.getLength()&&this.setStartAfter(t):this.setStartBefore(t)),t=this.endContainer,l=this.endOffset,t.type!=CKEDITOR.NODE_ELEMENT&&(l?l>=t.getLength()&&this.setEndAfter(t):this.setEndBefore(t))},optimizeBookmark:function(){var t=this.startContainer,l=this.endContainer;t.is&&t.is("span")&&t.data("cke-bookmark")&&this.setStartAt(t,CKEDITOR.POSITION_BEFORE_START),l&&l.is&&l.is("span")&&l.data("cke-bookmark")&&this.setEndAt(l,CKEDITOR.POSITION_AFTER_END)},trim:function(t,l){var f=this.startContainer,E=this.startOffset,C=this.collapsed;if((!t||C)&&f&&f.type==CKEDITOR.NODE_TEXT){if(E)if(E>=f.getLength())E=f.getIndex()+1,f=f.getParent();else{var d=f.split(E),E=f.getIndex()+1,f=f.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(d,this.endOffset-this.startOffset):f.equals(this.endContainer)&&(this.endOffset+=1)}else E=f.getIndex(),f=f.getParent();if(this.setStart(f,E),C){this.collapse(!0);return}}f=this.endContainer,E=this.endOffset,l||C||!f||f.type!=CKEDITOR.NODE_TEXT||(E?(E>=f.getLength()||f.split(E),E=f.getIndex()+1):E=f.getIndex(),f=f.getParent(),this.setEnd(f,E))},enlarge:function(t,l){function f(w){return w&&w.type==CKEDITOR.NODE_ELEMENT&&w.hasAttribute("contenteditable")?null:w}var E=new RegExp(/[^\s\ufeff]/);switch(t){case CKEDITOR.ENLARGE_INLINE:var S=1;case CKEDITOR.ENLARGE_ELEMENT:var C=function(w,R){var b=new CKEDITOR.dom.range(p);b.setStart(w,R),b.setEndAt(p,CKEDITOR.POSITION_BEFORE_END);var b=new CKEDITOR.dom.walker(b),A;for(b.guard=function(P){return!(P.type==CKEDITOR.NODE_ELEMENT&&P.isBlockBoundary())};A=b.next();)if(A.type!=CKEDITOR.NODE_TEXT||(K=A!=w?A.getText():A.substring(R),E.test(K)))return!1;return!0};if(this.collapsed)break;var d=this.getCommonAncestor(),p=this.root,I,_,m,g,D,O=!1,v,K;v=this.startContainer;var k=this.startOffset;for(v.type==CKEDITOR.NODE_TEXT?(k&&(v=!CKEDITOR.tools.trim(v.substring(0,k)).length&&v,O=!!v),v&&((g=v.getPrevious())||(m=v.getParent()))):(k&&(g=v.getChild(k-1)||v.getLast()),g||(m=v)),m=f(m);m||g;){if(m&&!g){if(!D&&m.equals(d)&&(D=!0),S?m.isBlockBoundary():!p.contains(m))break;O&&m.getComputedStyle("display")=="inline"||(O=!1,D?I=m:this.setStartBefore(m)),g=m.getPrevious()}for(;g;)if(v=!1,g.type==CKEDITOR.NODE_COMMENT)g=g.getPrevious();else{if(g.type==CKEDITOR.NODE_TEXT)K=g.getText(),E.test(K)&&(g=null),v=/[\s\ufeff]$/.test(K);else if((g.$.offsetWidth>(CKEDITOR.env.webkit?1:0)||l&&g.is("br"))&&!g.data("cke-bookmark"))if(O&&CKEDITOR.dtd.$removeEmpty[g.getName()]){if(K=g.getText(),E.test(K))g=null;else for(var k=g.$.getElementsByTagName("*"),L=0,B;B=k[L++];)if(!CKEDITOR.dtd.$removeEmpty[B.nodeName.toLowerCase()]){g=null;break}g&&(v=!!K.length)}else g=null;if(v&&(O?D?I=m:m&&this.setStartBefore(m):O=!0),g){if(v=g.getPrevious(),!m&&!v){m=g,g=null;break}g=v}else m=null}m&&(m=f(m.getParent()))}for(v=this.endContainer,k=this.endOffset,m=g=null,D=O=!1,v.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(v.substring(k)).length?O=!0:(O=!v.getLength(),k==v.getLength()?(g=v.getNext())||(m=v.getParent()):C(v,k)&&(m=v.getParent())):(g=v.getChild(k))||(m=v);m||g;){if(m&&!g){if(!D&&m.equals(d)&&(D=!0),S?m.isBlockBoundary():!p.contains(m))break;O&&m.getComputedStyle("display")=="inline"||(O=!1,D?_=m:m&&this.setEndAfter(m)),g=m.getNext()}for(;g;){if(v=!1,g.type==CKEDITOR.NODE_TEXT)K=g.getText(),C(g,0)||(g=null),v=/^[\s\ufeff]/.test(K);else if(g.type==CKEDITOR.NODE_ELEMENT){if((0<g.$.offsetWidth||l&&g.is("br"))&&!g.data("cke-bookmark"))if(O&&CKEDITOR.dtd.$removeEmpty[g.getName()]){if(K=g.getText(),E.test(K))g=null;else for(k=g.$.getElementsByTagName("*"),L=0;B=k[L++];)if(!CKEDITOR.dtd.$removeEmpty[B.nodeName.toLowerCase()]){g=null;break}g&&(v=!!K.length)}else g=null}else v=1;if(v&&O&&(D?_=m:this.setEndAfter(m)),g){if(v=g.getNext(),!m&&!v){m=g,g=null;break}g=v}else m=null}m&&(m=f(m.getParent()))}I&&_&&(d=I.contains(_)?_:I,this.setStartBefore(d),this.setEndAfter(d));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:m=new CKEDITOR.dom.range(this.root),p=this.root,m.setStartAt(p,CKEDITOR.POSITION_AFTER_START),m.setEnd(this.startContainer,this.startOffset),m=new CKEDITOR.dom.walker(m);var F,H,z=CKEDITOR.dom.walker.blockBoundary(t==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),T=null,x=function(w){if(w.type==CKEDITOR.NODE_ELEMENT&&w.getAttribute("contenteditable")=="false")if(T){if(T.equals(w)){T=null;return}}else T=w;else if(T)return;var R=z(w);return R||(F=w),R},S=function(w){var R=x(w);return!R&&w.is&&w.is("br")&&(H=w),R};if(m.guard=x,m=m.lastBackward(),F=F||p,this.setStartAt(F,!F.is("br")&&(!m&&this.checkStartOfBlock()||m&&F.contains(m))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),t==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){m=this.clone(),m=new CKEDITOR.dom.walker(m);var y=CKEDITOR.dom.walker.whitespaces(),N=CKEDITOR.dom.walker.bookmark();if(m.evaluator=function(w){return!y(w)&&!N(w)},(m=m.previous())&&m.type==CKEDITOR.NODE_ELEMENT&&m.is("br"))break}m=this.clone(),m.collapse(),m.setEndAt(p,CKEDITOR.POSITION_BEFORE_END),m=new CKEDITOR.dom.walker(m),m.guard=t==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?S:x,F=T=H=null,m=m.lastForward(),F=F||p,this.setEndAt(F,!m&&this.checkEndOfBlock()||m&&F.contains(m)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),H&&this.setEndAfter(H)}},shrink:function(t,l,f){if(!this.collapsed){t=t||CKEDITOR.SHRINK_TEXT;var m=this.clone(),E=this.startContainer,C=this.endContainer,d=this.startOffset,p=this.endOffset,I=1,_=1;E&&E.type==CKEDITOR.NODE_TEXT&&(d?d>=E.getLength()?m.setStartAfter(E):(m.setStartBefore(E),I=0):m.setStartBefore(E)),C&&C.type==CKEDITOR.NODE_TEXT&&(p?p>=C.getLength()?m.setEndAfter(C):(m.setEndAfter(C),_=0):m.setEndBefore(C));var m=new CKEDITOR.dom.walker(m),g=CKEDITOR.dom.walker.bookmark();m.evaluator=function(O){return O.type==(t==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var D;return m.guard=function(O,v){return g(O)?!0:t==CKEDITOR.SHRINK_ELEMENT&&O.type==CKEDITOR.NODE_TEXT||v&&O.equals(D)||f===!1&&O.type==CKEDITOR.NODE_ELEMENT&&O.isBlockBoundary()||O.type==CKEDITOR.NODE_ELEMENT&&O.hasAttribute("contenteditable")?!1:(v||O.type!=CKEDITOR.NODE_ELEMENT||(D=O),!0)},I&&(E=m[t==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(E,l?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),_&&(m.reset(),(m=m[t==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(m,l?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!I&&!_)}},insertNode:function(t){this.optimizeBookmark(),this.trim(!1,!0);var l=this.startContainer,f=l.getChild(this.startOffset);f?t.insertBefore(f):l.append(t),t.getParent()&&t.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(t)},moveToPosition:function(t,l){this.setStartAt(t,l),this.collapse(!0)},moveToRange:function(t){this.setStart(t.startContainer,t.startOffset),this.setEnd(t.endContainer,t.endOffset)},selectNodeContents:function(t){this.setStart(t,0),this.setEnd(t,t.type==CKEDITOR.NODE_TEXT?t.getLength():t.getChildCount())},setStart:function(t,l){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(l=t.getIndex(),t=t.getParent()),this._setStartContainer(t),this.startOffset=l,this.endContainer||(this._setEndContainer(t),this.endOffset=l),e(this)},setEnd:function(t,l){t.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[t.getName()]&&(l=t.getIndex()+1,t=t.getParent()),this._setEndContainer(t),this.endOffset=l,this.startContainer||(this._setStartContainer(t),this.startOffset=l),e(this)},setStartAfter:function(t){this.setStart(t.getParent(),t.getIndex()+1)},setStartBefore:function(t){this.setStart(t.getParent(),t.getIndex())},setEndAfter:function(t){this.setEnd(t.getParent(),t.getIndex()+1)},setEndBefore:function(t){this.setEnd(t.getParent(),t.getIndex())},setStartAt:function(t,l){switch(l){case CKEDITOR.POSITION_AFTER_START:this.setStart(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setStart(t,t.getLength()):this.setStart(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(t)}e(this)},setEndAt:function(t,l){switch(l){case CKEDITOR.POSITION_AFTER_START:this.setEnd(t,0);break;case CKEDITOR.POSITION_BEFORE_END:t.type==CKEDITOR.NODE_TEXT?this.setEnd(t,t.getLength()):this.setEnd(t,t.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(t);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(t)}e(this)},fixBlock:function(t,l){var f=this.createBookmark(),E=this.document.createElement(l);this.collapse(t),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(E),E.trim(),this.insertNode(E);var C=E.getBogus();return C&&C.remove(),E.appendBogus(),this.moveToBookmark(f),E},splitBlock:function(t,l){var f=new CKEDITOR.dom.elementPath(this.startContainer,this.root),E=new CKEDITOR.dom.elementPath(this.endContainer,this.root),C=f.block,d=E.block,p=null;return f.blockLimit.equals(E.blockLimit)?(t!="br"&&(C||(C=this.fixBlock(!0,t),d=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),d||(d=this.fixBlock(!1,t))),f=C&&this.checkStartOfBlock(),E=d&&this.checkEndOfBlock(),this.deleteContents(),C&&C.equals(d)&&(E?(p=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(d,CKEDITOR.POSITION_AFTER_END),d=null):f?(p=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(C,CKEDITOR.POSITION_BEFORE_START),C=null):(d=this.splitElement(C,l||!1),C.is("ul","ol")||C.appendBogus())),{previousBlock:C,nextBlock:d,wasStartOfBlock:f,wasEndOfBlock:E,elementPath:p}):null},splitElement:function(t,l){if(!this.collapsed)return null;this.setEndAt(t,CKEDITOR.POSITION_BEFORE_END);var f=this.extractContents(!1,l||!1),E=t.clone(!1,l||!1);return f.appendTo(E),E.insertAfter(t),this.moveToPosition(t,CKEDITOR.POSITION_AFTER_END),E},removeEmptyBlocksAtEnd:function(){function t(E){return function(C){return!(l(C)||f(C)||C.type==CKEDITOR.NODE_ELEMENT&&C.isEmptyInlineRemoveable()||E.is("table")&&C.is("caption"))}}var l=CKEDITOR.dom.walker.whitespaces(),f=CKEDITOR.dom.walker.bookmark(!1);return function(E){for(var C=this.createBookmark(),d=this[E?"endPath":"startPath"](),p=d.block||d.blockLimit,I;p&&!p.equals(d.root)&&!p.getFirst(t(p));)I=p.getParent(),this[E?"setEndAt":"setStartAt"](p,CKEDITOR.POSITION_AFTER_END),p.remove(1),p=I;this.moveToBookmark(C)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(t,l){var f=l==CKEDITOR.START,E=this.clone();return E.collapse(f),E[f?"setStartAt":"setEndAt"](t,f?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),E=new CKEDITOR.dom.walker(E),E.evaluator=s(f),E[f?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var t=this.startContainer,l=this.startOffset;return CKEDITOR.env.ie&&l&&t.type==CKEDITOR.NODE_TEXT&&(t=CKEDITOR.tools.ltrim(t.substring(0,l)),i.test(t)&&this.trim(0,1)),this.trim(),t=new CKEDITOR.dom.elementPath(this.startContainer,this.root),l=this.clone(),l.collapse(!0),l.setStartAt(t.block||t.blockLimit,CKEDITOR.POSITION_AFTER_START),t=new CKEDITOR.dom.walker(l),t.evaluator=r(),t.checkBackward()},checkEndOfBlock:function(){var t=this.endContainer,l=this.endOffset;return CKEDITOR.env.ie&&t.type==CKEDITOR.NODE_TEXT&&(t=CKEDITOR.tools.rtrim(t.substring(l)),i.test(t)&&this.trim(1,0)),this.trim(),t=new CKEDITOR.dom.elementPath(this.endContainer,this.root),l=this.clone(),l.collapse(!1),l.setEndAt(t.block||t.blockLimit,CKEDITOR.POSITION_BEFORE_END),t=new CKEDITOR.dom.walker(l),t.evaluator=r(),t.checkForward()},getPreviousNode:function(t,l,f){var E=this.clone();return E.collapse(1),E.setStartAt(f||this.root,CKEDITOR.POSITION_AFTER_START),f=new CKEDITOR.dom.walker(E),f.evaluator=t,f.guard=l,f.previous()},getNextNode:function(t,l,f){var E=this.clone();return E.collapse(),E.setEndAt(f||this.root,CKEDITOR.POSITION_BEFORE_END),f=new CKEDITOR.dom.walker(E),f.evaluator=t,f.guard=l,f.next()},checkReadOnly:function(){function t(l,f){for(;l;){if(l.type==CKEDITOR.NODE_ELEMENT){if(l.getAttribute("contentEditable")=="false"&&!l.data("cke-editable"))return 0;if(l.is("html")||l.getAttribute("contentEditable")=="true"&&(l.contains(f)||l.equals(f)))break}l=l.getParent()}return 1}return function(){var l=this.startContainer,f=this.endContainer;return!(t(l,f)&&t(f,l))}}(),moveToElementEditablePosition:function(t,l){if(t.type==CKEDITOR.NODE_ELEMENT&&!t.isEditable(!1))return this.moveToPosition(t,l?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var f=0;t;){if(t.type==CKEDITOR.NODE_TEXT){l&&this.endContainer&&this.checkEndOfBlock()&&i.test(t.getText())?this.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(t,l?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),f=1;break}if(t.type==CKEDITOR.NODE_ELEMENT){if(t.isEditable())this.moveToPosition(t,l?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),f=1;else if(l&&t.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(t,CKEDITOR.POSITION_BEFORE_START);else if(t.getAttribute("contenteditable")=="false"&&t.is(CKEDITOR.dtd.$block))return this.setStartBefore(t),this.setEndAfter(t),!0}var E=t,C=f,d=void 0;E.type==CKEDITOR.NODE_ELEMENT&&E.isEditable(!1)&&(d=E[l?"getLast":"getFirst"](n)),C||d||(d=E[l?"getPrevious":"getNext"](n)),t=d}return!!f},moveToClosestEditablePosition:function(t,l){var f,E=0,C,d,p=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];return t?(f=new CKEDITOR.dom.range(this.root),f.moveToPosition(t,p[l?0:1])):f=this.clone(),t&&!t.is(CKEDITOR.dtd.$block)?E=1:(C=f[l?"getNextEditableNode":"getPreviousEditableNode"]())&&(E=1,(d=C.type==CKEDITOR.NODE_ELEMENT)&&C.is(CKEDITOR.dtd.$block)&&C.getAttribute("contenteditable")=="false"?(f.setStartAt(C,CKEDITOR.POSITION_BEFORE_START),f.setEndAt(C,CKEDITOR.POSITION_AFTER_END)):!CKEDITOR.env.needsBrFiller&&d&&C.is(CKEDITOR.dom.walker.validEmptyBlockContainers)?(f.setEnd(C,0),f.collapse()):f.moveToPosition(C,p[l?1:0])),E&&this.moveToRange(f),!!E},moveToElementEditStart:function(t){return this.moveToElementEditablePosition(t)},moveToElementEditEnd:function(t){return this.moveToElementEditablePosition(t,!0)},getEnclosedNode:function(){var t=this.clone();if(t.optimize(),t.startContainer.type!=CKEDITOR.NODE_ELEMENT||t.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;var t=new CKEDITOR.dom.walker(t),l=CKEDITOR.dom.walker.bookmark(!1,!0),f=CKEDITOR.dom.walker.whitespaces(!0);t.evaluator=function(C){return f(C)&&l(C)};var E=t.next();return t.reset(),E&&E.equals(t.previous())?E:null},getTouchedStartNode:function(){var t=this.startContainer;return this.collapsed||t.type!=CKEDITOR.NODE_ELEMENT?t:t.getChild(this.startOffset)||t},getTouchedEndNode:function(){var t=this.endContainer;return this.collapsed||t.type!=CKEDITOR.NODE_ELEMENT?t:t.getChild(this.endOffset-1)||t},getNextEditableNode:a(),getPreviousEditableNode:a(1),scrollIntoView:function(){var t=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),l,f,E,C=this.clone();C.optimize(),(E=C.startContainer.type==CKEDITOR.NODE_TEXT)?(f=C.startContainer.getText(),l=C.startContainer.split(C.startOffset),t.insertAfter(C.startContainer)):C.insertNode(t),t.scrollIntoView(),E&&(C.startContainer.setText(f),l.remove()),t.remove()},_setStartContainer:function(t){this.startContainer=t},_setEndContainer:function(t){this.endContainer=t}}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function e(n){1>arguments.length||(this.range=n,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))}function c(n){var t=[];return n.forEach(function(l){if(l.getAttribute("contenteditable")=="true")return t.push(l),!1},CKEDITOR.NODE_ELEMENT,!0),t}function r(n,t,l,f){e:{f==null&&(f=c(l));for(var E;E=f.shift();)if(E.getDtd().p){f={element:E,remaining:f};break e}f=null}return f?(E=CKEDITOR.filter.instances[f.element.data("cke-filter")])&&!E.check(t)?r(n,t,l,f.remaining):(t=new CKEDITOR.dom.range(f.element),t.selectNodeContents(f.element),t=t.createIterator(),t.enlargeBr=n.enlargeBr,t.enforceRealBlocks=n.enforceRealBlocks,t.activeFilter=t.filter=E,n._.nestedEditable={element:f.element,container:l,remaining:f.remaining,iterator:t},1):0}function s(n,t,l){return t?(n=n.clone(),n.collapse(!l),n.checkBoundaryOfElement(t,l?CKEDITOR.START:CKEDITOR.END)):!1}var a=/^[\r\n\t ]+$/,u=CKEDITOR.dom.walker.bookmark(!1,!0),h=CKEDITOR.dom.walker.whitespaces(!0),i=function(n){return u(n)&&h(n)},o={dd:1,dt:1,li:1};e.prototype={getNextParagraph:function(n){var t,l,f,E,C;if(n=n||"p",this._.nestedEditable){if(t=this._.nestedEditable.iterator.getNextParagraph(n))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,t;if(this.activeFilter=this.filter,r(this,n,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(n);this._.nestedEditable=null}if(!this.range.root.getDtd()[n])return null;if(!this._.started){var d=this.range.clone();l=d.startPath();var p=d.endPath(),I=!d.collapsed&&s(d,l.block),_=!d.collapsed&&s(d,p.block,1);d.shrink(CKEDITOR.SHRINK_ELEMENT,!0),I&&d.setStartAt(l.block,CKEDITOR.POSITION_BEFORE_END),_&&d.setEndAt(p.block,CKEDITOR.POSITION_AFTER_START),l=d.endContainer.hasAscendant("pre",!0)||d.startContainer.hasAscendant("pre",!0),d.enlarge(this.forceBrBreak&&!l||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),d.collapsed||(l=new CKEDITOR.dom.walker(d.clone()),p=CKEDITOR.dom.walker.bookmark(!0,!0),l.evaluator=p,this._.nextNode=l.next(),l=new CKEDITOR.dom.walker(d.clone()),l.evaluator=p,l=l.previous(),this._.lastNode=l.getNextSourceNode(!0,null,d.root),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(p=this.range.clone(),p.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),p.checkEndOfBlock()&&(p=new CKEDITOR.dom.elementPath(p.endContainer,p.root),this._.lastNode=(p.block||p.blockLimit).getNextSourceNode(!0))),this._.lastNode&&d.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=d.document.createText(""),this._.lastNode.insertAfter(l)),d=null),this._.started=1,l=d}for(p=this._.nextNode,d=this._.lastNode,this._.nextNode=null;p;){var I=0,_=p.hasAscendant("pre"),m=p.type!=CKEDITOR.NODE_ELEMENT,g=0;if(m)p.type==CKEDITOR.NODE_TEXT&&a.test(p.getText())&&(m=0);else{var D=p.getName();if(CKEDITOR.dtd.$block[D]&&p.getAttribute("contenteditable")=="false"){t=p,r(this,n,t);break}else if(p.isBlockBoundary(this.forceBrBreak&&!_&&{br:1})){if(D=="br")m=1;else if(!l&&!p.getChildCount()&&D!="hr"){t=p,f=p.equals(d);break}l&&(l.setEndAt(p,CKEDITOR.POSITION_BEFORE_START),D!="br"&&(this._.nextNode=p)),I=1}else{if(p.getFirst()){l||(l=this.range.clone(),l.setStartAt(p,CKEDITOR.POSITION_BEFORE_START)),p=p.getFirst();continue}m=1}}if(m&&!l&&(l=this.range.clone(),l.setStartAt(p,CKEDITOR.POSITION_BEFORE_START)),f=(!I||m)&&p.equals(d),l&&!I)for(;!p.getNext(i)&&!f;){if(D=p.getParent(),D.isBlockBoundary(this.forceBrBreak&&!_&&{br:1})){I=1,m=0,f||D.equals(d),l.setEndAt(D,CKEDITOR.POSITION_BEFORE_END);break}p=D,m=1,f=p.equals(d),g=1}if(m&&l.setEndAt(p,CKEDITOR.POSITION_AFTER_END),p=this._getNextSourceNode(p,g,d),(f=!p)||I&&l)break}if(!t){if(!l)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;t=new CKEDITOR.dom.elementPath(l.startContainer,l.root),p=t.blockLimit,I={div:1,th:1,td:1},t=t.block,!t&&p&&!this.enforceRealBlocks&&I[p.getName()]&&l.checkStartOfBlock()&&l.checkEndOfBlock()&&!p.equals(l.root)?t=p:!t||this.enforceRealBlocks&&t.is(o)?(t=this.range.document.createElement(n),l.extractContents().appendTo(t),t.trim(),l.insertNode(t),E=C=!0):t.getName()!="li"?l.checkStartOfBlock()&&l.checkEndOfBlock()||(t=t.clone(!1),l.extractContents().appendTo(t),t.trim(),C=l.splitBlock(),E=!C.wasStartOfBlock,C=!C.wasEndOfBlock,l.insertNode(t)):f||(this._.nextNode=t.equals(d)?null:this._getNextSourceNode(l.getBoundaryNodes().endNode,1,d))}return E&&(E=t.getPrevious())&&E.type==CKEDITOR.NODE_ELEMENT&&(E.getName()=="br"?E.remove():E.getLast()&&E.getLast().$.nodeName.toLowerCase()=="br"&&E.getLast().remove()),C&&(E=t.getLast())&&E.type==CKEDITOR.NODE_ELEMENT&&E.getName()=="br"&&(!CKEDITOR.env.needsBrFiller||E.getPrevious(u)||E.getNext(u))&&E.remove(),this._.nextNode||(this._.nextNode=f||t.equals(d)||!d?null:this._getNextSourceNode(t,1,d)),t},_getNextSourceNode:function(n,t,l){function f(C){return!(C.equals(l)||C.equals(E))}var E=this.range.root;for(n=n.getNextSourceNode(t,null,f);!u(n);)n=n.getNextSourceNode(t,null,f);return n}},CKEDITOR.dom.range.prototype.createIterator=function(){return new e(this)}}(),CKEDITOR.command=function(e,c){this.uiItems=[],this.exec=function(s){return this.state==CKEDITOR.TRISTATE_DISABLED||!this.checkAllowed()?!1:(this.editorFocus&&e.focus(),this.fire("exec")===!1?!0:c.exec.call(this,e,s)!==!1)},this.refresh=function(s,a){return!this.readOnly&&s.readOnly?!0:this.context&&!a.isContextFor(this.context)||!this.checkAllowed(!0)?(this.disable(),!0):(this.startDisabled||this.enable(),this.modes&&!this.modes[s.mode]&&this.disable(),this.fire("refresh",{editor:s,path:a})===!1?!0:c.refresh&&c.refresh.apply(this,arguments)!==!1)};var r;this.checkAllowed=function(s){return s||typeof r!="boolean"?r=e.activeFilter.checkFeature(this):r},CKEDITOR.tools.extend(this,c,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!c.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&typeof this.previousState<"u"?this.previousState:CKEDITOR.TRISTATE_OFF)},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(e){return this.state==e||e!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()?!1:(this.previousState=this.state,this.state=e,this.fire("state"),!0)},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85]},function(){function e(R,b,A,P,$){var M,U;R=[];for(M in b){U=b[M],U=typeof U=="boolean"?{}:typeof U=="function"?{match:U}:B(U),M.charAt(0)!="$"&&(U.elements=M),A&&(U.featureName=A.toLowerCase());var V=U;V.elements=h(V.elements,/\s+/)||null,V.propertiesOnly=V.propertiesOnly||V.elements===!0;var W=/\s*,\s*/,Y=void 0;for(Y in z){V[Y]=h(V[Y],W)||null;var te=V,Q=T[Y],J=h(V[T[Y]],W),re=V[Y],ne=[],q=!0,G=void 0;J?q=!1:J={};for(G in re)G.charAt(0)=="!"&&(G=G.slice(1),ne.push(G),J[G]=!0,q=!1);for(;G=ne.pop();)re[G]=re["!"+G],delete re["!"+G];te[Q]=(q?!1:J)||null}V.match=V.match||null,P.push(U),R.push(U)}b=$.elements,$=$.generic;var X;for(A=0,P=R.length;A<P;++A){M=B(R[A]),U=M.classes===!0||M.styles===!0||M.attributes===!0,V=M,Y=Q=W=void 0;for(W in z)V[W]=I(V[W]);te=!0;for(Y in T){W=T[Y],Q=V[W],J=[],re=void 0;for(re in Q)-1<re.indexOf("*")?J.push(new RegExp("^"+re.replace(/\*/g,".*")+"$")):J.push(re);Q=J,Q.length&&(V[W]=Q,te=!1)}if(V.nothingRequired=te,V.noProperties=!(V.attributes||V.classes||V.styles),M.elements===!0||M.elements===null)$[U?"unshift":"push"](M);else for(X in V=M.elements,delete M.elements,V)b[X]?b[X][U?"unshift":"push"](M):b[X]=[M]}}function c(R,b,A,P){if((!R.match||R.match(b))&&(P||i(R,b))&&(R.propertiesOnly||(A.valid=!0),A.allAttributes||(A.allAttributes=r(R.attributes,b.attributes,A.validAttributes)),A.allStyles||(A.allStyles=r(R.styles,b.styles,A.validStyles)),!A.allClasses)){if(R=R.classes,b=b.classes,P=A.validClasses,R)if(R===!0)R=!0;else{for(var $=0,M=b.length,U;$<M;++$)U=b[$],P[U]||(P[U]=R(U));R=!1}else R=!1;A.allClasses=R}}function r(R,b,A){if(!R)return!1;if(R===!0)return!0;for(var P in b)A[P]||(A[P]=R(P));return!1}function s(R,b,A){if(!R.match||R.match(b)){if(R.noProperties)return!1;if(A.hadInvalidAttribute=a(R.attributes,b.attributes)||A.hadInvalidAttribute,A.hadInvalidStyle=a(R.styles,b.styles)||A.hadInvalidStyle,R=R.classes,b=b.classes,R){for(var P=!1,$=R===!0,M=b.length;M--;)($||R(b[M]))&&(b.splice(M,1),P=!0);R=P}else R=!1;A.hadInvalidClass=R||A.hadInvalidClass}}function a(R,b){if(!R)return!1;var A=!1,P=R===!0,$;for($ in b)(P||R($))&&(delete b[$],A=!0);return A}function u(R,b,A){return R.disabled||R.customConfig&&!A||!b?!1:(R._.cachedChecks={},!0)}function h(R,b){if(!R)return!1;if(R===!0)return R;if(typeof R=="string")return R=F(R),R=="*"?!0:CKEDITOR.tools.convertArrayToObject(R.split(b));if(CKEDITOR.tools.isArray(R))return R.length?CKEDITOR.tools.convertArrayToObject(R):!1;var A={},P=0,$;for($ in R)A[$]=R[$],P++;return P?A:!1}function i(R,b){if(R.nothingRequired)return!0;var A,P,$,M;if($=R.requiredClasses){for(M=b.classes,A=0;A<$.length;++A)if(P=$[A],typeof P=="string"){if(CKEDITOR.tools.indexOf(M,P)==-1)return!1}else if(!CKEDITOR.tools.checkIfAnyArrayItemMatches(M,P))return!1}return o(b.styles,R.requiredStyles)&&o(b.attributes,R.requiredAttributes)}function o(R,b){if(!b)return!0;for(var A=0,P;A<b.length;++A)if(P=b[A],typeof P=="string"){if(!(P in R))return!1}else if(!CKEDITOR.tools.checkIfAnyObjectPropertyMatches(R,P))return!1;return!0}function n(R){if(!R)return{};R=R.split(/\s*,\s*/).sort();for(var b={};R.length;)b[R.shift()]="cke-test";return b}function t(R){var b,A,P,$,M={},U=1;for(R=F(R);b=R.match(x);)(A=b[2])?(P=l(A,"styles"),$=l(A,"attrs"),A=l(A,"classes")):P=$=A=null,M["$"+U++]={elements:b[1],classes:A,styles:P,attributes:$},R=R.slice(b[0].length);return M}function l(R,b){var A=R.match(S[b]);return A?F(A[1]):null}function f(R){var b=R.styleBackup=R.attributes.style,A=R.classBackup=R.attributes.class;R.styles||(R.styles=CKEDITOR.tools.parseCssText(b||"",1)),R.classes||(R.classes=A?A.split(/\s+/):[])}function E(R,b,A,P){var $=0,M;if(P.toHtml&&(b.name=b.name.replace(y,"$1")),P.doCallbacks&&R.elementCallbacks){e:{M=R.elementCallbacks;for(var U=0,V=M.length,W;U<V;++U)if(W=M[U](b)){M=W;break e}M=void 0}if(M)return M}if(P.doTransform&&(M=R._.transformations[b.name])){for(f(b),U=0;U<M.length;++U)D(R,b,M[U]);d(b)}if(P.doFilter){e:{U=b.name,V=R._,R=V.allowedRules.elements[U],M=V.allowedRules.generic,U=V.disallowedRules.elements[U],V=V.disallowedRules.generic,W=P.skipRequired;var X={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1,hadInvalidAttribute:!1,hadInvalidClass:!1,hadInvalidStyle:!1},Y,te;if(R||M){if(f(b),U){for(Y=0,te=U.length;Y<te;++Y)if(s(U[Y],b,X)===!1){R=null;break e}}if(V)for(Y=0,te=V.length;Y<te;++Y)s(V[Y],b,X);if(R)for(Y=0,te=R.length;Y<te;++Y)c(R[Y],b,X,W);if(M)for(Y=0,te=M.length;Y<te;++Y)c(M[Y],b,X,W);R=X}else R=null}if(!R||!R.valid)return A.push(b),1;te=R.validAttributes;var Q=R.validStyles;M=R.validClasses;var U=b.attributes,J=b.styles,V=b.classes;W=b.classBackup;var re=b.styleBackup,ne,q,G=[],X=[],j=/^data-cke-/;if(Y=!1,delete U.style,delete U.class,delete b.classBackup,delete b.styleBackup,!R.allAttributes)for(ne in U)te[ne]||j.test(ne)&&(ne==(q=ne.replace(/^data-cke-saved-/,""))||te[q])||(delete U[ne],Y=!0);if(!R.allStyles||R.hadInvalidStyle){for(ne in J)R.allStyles||Q[ne]?G.push(ne+":"+J[ne]):Y=!0;G.length&&(U.style=G.sort().join("; "))}else re&&(U.style=re);if(!R.allClasses||R.hadInvalidClass){for(ne=0;ne<V.length;++ne)(R.allClasses||M[V[ne]])&&X.push(V[ne]);X.length&&(U.class=X.sort().join(" ")),W&&X.length<W.split(/\s+/).length&&(Y=!0)}else W&&(U.class=W);if(Y&&($=1),!P.skipFinalValidation&&!p(b))return A.push(b),1}return P.toHtml&&(b.name=b.name.replace(N,"cke:$1")),$}function C(R){var b=[],A;for(A in R)-1<A.indexOf("*")&&b.push(A.replace(/\*/g,".*"));return b.length?new RegExp("^(?:"+b.join("|")+")$"):null}function d(R){var b=R.attributes,A;delete b.style,delete b.class,(A=CKEDITOR.tools.writeCssText(R.styles,!0))&&(b.style=A),R.classes.length&&(b.class=R.classes.sort().join(" "))}function p(R){switch(R.name){case"a":if(!(R.children.length||R.attributes.name||R.attributes.id))return!1;break;case"img":if(!R.attributes.src)return!1}return!0}function I(R){if(!R)return!1;if(R===!0)return!0;var b=C(R);return function(A){return A in R||b&&A.match(b)}}function _(){return new CKEDITOR.htmlParser.element("br")}function m(R){return R.type==CKEDITOR.NODE_ELEMENT&&(R.name=="br"||L.$block[R.name])}function g(R,b,A){var P=R.name;if(L.$empty[P]||!R.children.length)P=="hr"&&b=="br"?R.replaceWith(_()):(R.parent&&A.push({check:"it",el:R.parent}),R.remove());else if(L.$block[P]||P=="tr")if(b=="br")R.previous&&!m(R.previous)&&(b=_(),b.insertBefore(R)),R.next&&!m(R.next)&&(b=_(),b.insertAfter(R)),R.replaceWithChildren();else{var P=R.children,$;e:{$=L[b];for(var M=0,U=P.length,V;M<U;++M)if(V=P[M],V.type==CKEDITOR.NODE_ELEMENT&&!$[V.name]){$=!1;break e}$=!0}if($)R.name=b,R.attributes={},A.push({check:"parent-down",el:R});else{$=R.parent;for(var M=$.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||$.name=="body",W,Y,U=P.length;0<U;)V=P[--U],M&&(V.type==CKEDITOR.NODE_TEXT||V.type==CKEDITOR.NODE_ELEMENT&&L.$inline[V.name])?(W||(W=new CKEDITOR.htmlParser.element(b),W.insertAfter(R),A.push({check:"parent-down",el:W})),W.add(V,0)):(W=null,Y=L[$.name]||L.span,V.insertAfter(R),$.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||V.type!=CKEDITOR.NODE_ELEMENT||Y[V.name]||A.push({check:"el-up",el:V}));R.remove()}}else P in{style:1,script:1}?R.remove():(R.parent&&A.push({check:"it",el:R.parent}),R.replaceWithChildren())}function D(R,b,A){var P,$;for(P=0;P<A.length;++P)if($=A[P],!($.check&&!R.check($.check,!1)||$.left&&!$.left(b))){$.right(b,w);break}}function O(R,b){var A=b.getDefinition(),P=A.attributes,$=A.styles,M,U,V,W;if(R.name!=A.element)return!1;for(M in P)if(M=="class"){for(A=P[M].split(/\s+/),V=R.classes.join("|");W=A.pop();)if(V.indexOf(W)==-1)return!1}else if(R.attributes[M]!=P[M])return!1;for(U in $)if(R.styles[U]!=$[U])return!1;return!0}function v(R,b){var A,P;return typeof R=="string"?A=R:R instanceof CKEDITOR.style?P=R:(A=R[0],P=R[1]),[{element:A,left:P,right:function($,M){M.transform($,b)}}]}function K(R){return function(b){return O(b,R)}}function k(R){return function(b,A){A[R](b)}}var L=CKEDITOR.dtd,B=CKEDITOR.tools.copy,F=CKEDITOR.tools.trim,H=["","p","br","div"];CKEDITOR.FILTER_SKIP_TREE=2,CKEDITOR.filter=function(R){if(this.allowedContent=[],this.disallowedContent=[],this.elementCallbacks=null,this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={allowedRules:{elements:{},generic:[]},disallowedRules:{elements:{},generic:[]},transformations:{},cachedTests:{}},CKEDITOR.filter.instances[this.id]=this,R instanceof CKEDITOR.editor){R=this.editor=R,this.customConfig=!0;var b=R.config.allowedContent;b===!0?this.disabled=!0:(b||(this.customConfig=!1),this.allow(b,"config",1),this.allow(R.config.extraAllowedContent,"extra",1),this.allow(H[R.enterMode]+" "+H[R.shiftEnterMode],"default",1),this.disallow(R.config.disallowedContent))}else this.customConfig=!1,this.allow(R,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(R,b,A){if(!u(this,R,A))return!1;var P,$;if(typeof R=="string")R=t(R);else if(R instanceof CKEDITOR.style){if(R.toAllowedContentRules)return this.allow(R.toAllowedContentRules(this.editor),b,A);P=R.getDefinition(),R={},A=P.attributes,R[P.element]=P={styles:P.styles,requiredStyles:P.styles&&CKEDITOR.tools.objectKeys(P.styles)},A&&(A=B(A),P.classes=A.class?A.class.split(/\s+/):null,P.requiredClasses=P.classes,delete A.class,P.attributes=A,P.requiredAttributes=A&&CKEDITOR.tools.objectKeys(A))}else if(CKEDITOR.tools.isArray(R)){for(P=0;P<R.length;++P)$=this.allow(R[P],b,A);return $}return e(this,R,b,this.allowedContent,this._.allowedRules),!0},applyTo:function(R,b,A,P){if(this.disabled)return!1;var $=this,M=[],U=this.editor&&this.editor.config.protectedSource,V,W=!1,Y={doFilter:!A,doTransform:!0,doCallbacks:!0,toHtml:b};R.forEach(function(J){if(J.type==CKEDITOR.NODE_ELEMENT){if(J.attributes["data-cke-filter"]=="off")return!1;if(!b||J.name!="span"||!~CKEDITOR.tools.objectKeys(J.attributes).join("|").indexOf("data-cke-")){if(V=E($,J,M,Y),V&1)W=!0;else if(V&2)return!1}}else if(J.type==CKEDITOR.NODE_COMMENT&&J.value.match(/^\{cke_protected\}(?!\{C\})/)){var re;e:{var ne=decodeURIComponent(J.value.replace(/^\{cke_protected\}/,""));re=[];var q,G,X;if(U){for(G=0;G<U.length;++G)if((X=ne.match(U[G]))&&X[0].length==ne.length){re=!0;break e}}ne=CKEDITOR.htmlParser.fragment.fromHtml(ne),ne.children.length==1&&(q=ne.children[0]).type==CKEDITOR.NODE_ELEMENT&&E($,q,re,Y),re=!re.length}re||M.push(J)}},null,!0),M.length&&(W=!0);var te;R=[],P=H[P||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];for(var Q;A=M.pop();)A.type==CKEDITOR.NODE_ELEMENT?g(A,P,R):A.remove();for(;te=R.pop();)if(A=te.el,A.parent)switch(Q=L[A.parent.name]||L.span,te.check){case"it":L.$removeEmpty[A.name]&&!A.children.length?g(A,P,R):p(A)||g(A,P,R);break;case"el-up":A.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||Q[A.name]||g(A,P,R);break;case"parent-down":A.parent.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||Q[A.name]||g(A.parent,P,R)}return W},checkFeature:function(R){return this.disabled||!R?!0:(R.toFeature&&(R=R.toFeature(this.editor)),!R.requiredContent||this.check(R.requiredContent))},disable:function(){this.disabled=!0},disallow:function(R){return u(this,R,!0)?(typeof R=="string"&&(R=t(R)),e(this,R,null,this.disallowedContent,this._.disallowedRules),!0):!1},addContentForms:function(R){if(!this.disabled&&R){var b,A,P=[],$;for(b=0;b<R.length&&!$;++b)A=R[b],(typeof A=="string"||A instanceof CKEDITOR.style)&&this.check(A)&&($=A);if($){for(b=0;b<R.length;++b)P.push(v(R[b],$));this.addTransformations(P)}}},addElementCallback:function(R){this.elementCallbacks||(this.elementCallbacks=[]),this.elementCallbacks.push(R)},addFeature:function(R){return this.disabled||!R?!0:(R.toFeature&&(R=R.toFeature(this.editor)),this.allow(R.allowedContent,R.name),this.addTransformations(R.contentTransformations),this.addContentForms(R.contentForms),R.requiredContent&&(this.customConfig||this.disallowedContent.length)?this.check(R.requiredContent):!0)},addTransformations:function(R){var b,A;if(!this.disabled&&R){var P=this._.transformations,$;for($=0;$<R.length;++$){b=R[$];var M=void 0,U=void 0,V=void 0,W=void 0,Y=void 0,te=void 0;for(A=[],U=0;U<b.length;++U)V=b[U],typeof V=="string"?(V=V.split(/\s*:\s*/),W=V[0],Y=null,te=V[1]):(W=V.check,Y=V.left,te=V.right),M||(M=V,M=M.element?M.element:W?W.match(/^([a-z0-9]+)/i)[0]:M.left.getDefinition().element),Y instanceof CKEDITOR.style&&(Y=K(Y)),A.push({check:W==M?null:W,left:Y,right:typeof te=="string"?k(te):te});b=M,P[b]||(P[b]=[]),P[b].push(A)}}},check:function(R,b,A){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(R)){for(var P=R.length;P--;)if(this.check(R[P],b,A))return!0;return!1}var $,M;if(typeof R=="string"){if(M=R+"<"+(b===!1?"0":"1")+(A?"1":"0")+">",M in this._.cachedChecks)return this._.cachedChecks[M];P=t(R).$1,$=P.styles;var U=P.classes;P.name=P.elements,P.classes=U=U?U.split(/\s*,\s*/):[],P.styles=n($),P.attributes=n(P.attributes),P.children=[],U.length&&(P.attributes.class=U.join(" ")),$&&(P.attributes.style=CKEDITOR.tools.writeCssText(P.styles)),$=P}else P=R.getDefinition(),$=P.styles,U=P.attributes||{},$?($=B($),U.style=CKEDITOR.tools.writeCssText($,!0)):$={},$={name:P.element,attributes:U,classes:U.class?U.class.split(/\s+/):[],styles:$,children:[]};var U=CKEDITOR.tools.clone($),V=[],W;if(b!==!1&&(W=this._.transformations[$.name])){for(P=0;P<W.length;++P)D(this,$,W[P]);d($)}return E(this,U,V,{doFilter:!0,doTransform:b!==!1,skipRequired:!A,skipFinalValidation:!A}),b=0<V.length?!1:!!CKEDITOR.tools.objectCompare($.attributes,U.attributes,!0),typeof R=="string"&&(this._.cachedChecks[M]=b),b},getAllowedEnterMode:function(){var R=["p","div","br"],b={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(A,P){var $=R.slice(),M;if(this.check(H[A]))return A;for(P||($=$.reverse());M=$.pop();)if(this.check(M))return b[M];return CKEDITOR.ENTER_BR}}(),destroy:function(){delete CKEDITOR.filter.instances[this.id],delete this._,delete this.allowedContent,delete this.disallowedContent}};var z={styles:1,attributes:1,classes:1},T={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},x=/^([a-z0-9\-*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,S={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},y=/^cke:(object|embed|param)$/,N=/^(object|embed|param)$/,w=CKEDITOR.filter.transformationsTools={sizeToStyle:function(R){this.lengthToStyle(R,"width"),this.lengthToStyle(R,"height")},sizeToAttribute:function(R){this.lengthToAttribute(R,"width"),this.lengthToAttribute(R,"height")},lengthToStyle:function(R,b,A){if(A=A||b,!(A in R.styles)){var P=R.attributes[b];P&&(/^\d+$/.test(P)&&(P+="px"),R.styles[A]=P)}delete R.attributes[b]},lengthToAttribute:function(R,b,A){if(A=A||b,!(A in R.attributes)){var P=R.styles[b],$=P&&P.match(/^(\d+)(?:\.\d*)?px$/);$?R.attributes[A]=$[1]:P=="cke-test"&&(R.attributes[A]="cke-test")}delete R.styles[b]},alignmentToStyle:function(R){if(!("float"in R.styles)){var b=R.attributes.align;(b=="left"||b=="right")&&(R.styles.float=b)}delete R.attributes.align},alignmentToAttribute:function(R){if(!("align"in R.attributes)){var b=R.styles.float;(b=="left"||b=="right")&&(R.attributes.align=b)}delete R.styles.float},matchesStyle:O,transform:function(R,b){if(typeof b=="string")R.name=b;else{var A=b.getDefinition(),P=A.styles,$=A.attributes,M,U,V,W;R.name=A.element;for(M in $)if(M=="class")for(A=R.classes.join("|"),V=$[M].split(/\s+/);W=V.pop();)A.indexOf(W)==-1&&R.classes.push(W);else R.attributes[M]=$[M];for(U in P)R.styles[U]=P[U]}}}}(),function(){CKEDITOR.focusManager=function(e){return e.focusManager?e.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:e},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(e){this._.timer&&clearTimeout(this._.timer),e&&(this.currentActive=e),this.hasFocus||this._.locked||((e=CKEDITOR.currentInstance)&&e.focusManager.blur(1),this.hasFocus=!0,(e=this._.editor.container)&&e.addClass("cke_focus"),this._.editor.fire("focus"))},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(e){function c(){if(this.hasFocus){this.hasFocus=!1;var s=this._.editor.container;s&&s.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var r=CKEDITOR.focusManager._.blurDelay;e||!r?c.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,c.call(this)},r,this)}},add:function(e,c){var r=e.getCustomData("focusmanager");if(!r||r!=this){r&&r.remove(e);var r="focus",s="blur";c&&(CKEDITOR.env.ie?(r="focusin",s="focusout"):CKEDITOR.event.useCapture=1);var a={blur:function(){e.equals(this.currentActive)&&this.blur()},focus:function(){this.focus(e)}};e.on(r,a.focus,this),e.on(s,a.blur,this),c&&(CKEDITOR.event.useCapture=0),e.setCustomData("focusmanager",this),e.setCustomData("focusmanager_handlers",a)}},remove:function(e){e.removeCustomData("focusmanager");var c=e.removeCustomData("focusmanager_handlers");e.removeListener("blur",c.blur),e.removeListener("focus",c.focus)}}}(),CKEDITOR.keystrokeHandler=function(e){return e.keystrokeHandler?e.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:e},this)},function(){var e,c=function(s){s=s.data;var a=s.getKeystroke(),u=this.keystrokes[a],h=this._.editor;return e=h.fire("key",{keyCode:a,domEvent:s})===!1,e||(u&&(e=h.execCommand(u,{from:"keystrokeHandler"})!==!1),e||(e=!!this.blockedKeystrokes[a])),e&&s.preventDefault(!0),!e},r=function(s){e&&(e=!1,s.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(s){s.on("keydown",c,this),CKEDITOR.env.gecko&&CKEDITOR.env.mac&&s.on("keypress",r,this)}}}(),function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(e,c,r){e&&CKEDITOR.lang.languages[e]||(e=this.detect(c,e));var s=this;c=function(){s[e].dir=s.rtl[e]?"rtl":"ltr",r(e,s[e])},this[e]?c():CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+e+".js"),c,this)},detect:function(e,c){var r=this.languages;c=c||navigator.userLanguage||navigator.language||e;var a=c.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),s=a[1],a=a[2];return r[s+"-"+a]?s=s+"-"+a:r[s]||(s=null),CKEDITOR.lang.detect=s?function(){return s}:function(u){return u},s||e}}}(),CKEDITOR.scriptLoader=function(){var e={},c={};return{load:function(r,s,a,u){var h=typeof r=="string";h&&(r=[r]),a||(a=CKEDITOR);var i=r.length,o=[],n=[],t=function(d){s&&(h?s.call(a,d):s.call(a,o,n))};if(i===0)t(!0);else{var l=function(d,p){(p?o:n).push(d),0>=--i&&(u&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),t(p))},f=function(d,p){e[d]=1;var I=c[d];delete c[d];for(var _=0;_<I.length;_++)I[_](d,p)},E=function(d){if(e[d])l(d,!0);else{var p=c[d]||(c[d]=[]);if(p.push(l),!(1<p.length)){var I=new CKEDITOR.dom.element("script");I.setAttributes({type:"text/javascript",src:d}),s&&(CKEDITOR.env.ie&&11>CKEDITOR.env.version?I.$.onreadystatechange=function(){(I.$.readyState=="loaded"||I.$.readyState=="complete")&&(I.$.onreadystatechange=null,f(d,!0))}:(I.$.onload=function(){setTimeout(function(){f(d,!0)},0)},I.$.onerror=function(){f(d,!1)})),I.appendTo(CKEDITOR.document.getHead())}}};u&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var C=0;C<i;C++)E(r[C])}},queue:function(){function r(){var a;(a=s[0])&&this.load(a.scriptUrl,a.callback,CKEDITOR,0)}var s=[];return function(a,u){var h=this;s.push({scriptUrl:a,callback:function(){u&&u.apply(this,arguments),s.shift(),r.call(h)}}),s.length==1&&r.call(this)}}()}}(),CKEDITOR.resourceManager=function(e,c){this.basePath=e,this.fileName=c,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(e,c){if(this.registered[e])throw Error('[CKEDITOR.resourceManager.add] The resource name "'+e+'" is already registered.');var r=this.registered[e]=c||{};return r.name=e,r.path=this.getPath(e),CKEDITOR.fire(e+CKEDITOR.tools.capitalize(this.fileName)+"Ready",r),this.get(e)},get:function(e){return this.registered[e]||null},getPath:function(e){var c=this.externals[e];return CKEDITOR.getUrl(c&&c.dir||this.basePath+e+"/")},getFilePath:function(e){var c=this.externals[e];return CKEDITOR.getUrl(this.getPath(e)+(c?c.file:this.fileName+".js"))},addExternal:function(e,c,r){e=e.split(",");for(var s=0;s<e.length;s++){var a=e[s];r||(c=c.replace(/[^\/]+$/,function(u){return r=u,""})),this.externals[a]={dir:c,file:r||this.fileName+".js"}}},load:function(e,c,r){CKEDITOR.tools.isArray(e)||(e=e?[e]:[]);for(var s=this.loaded,a=this.registered,u=[],h={},i={},o=0;o<e.length;o++){var n=e[o];if(n)if(s[n]||a[n])i[n]=this.get(n);else{var t=this.getFilePath(n);u.push(t),t in h||(h[t]=[]),h[t].push(n)}}CKEDITOR.scriptLoader.load(u,function(l,f){if(f.length)throw Error('[CKEDITOR.resourceManager.load] Resource name "'+h[f[0]].join(",")+'" was not found at "'+f[0]+'".');for(var E=0;E<l.length;E++)for(var C=h[l[E]],d=0;d<C.length;d++){var p=C[d];i[p]=this.get(p),s[p]=1}c.call(r,i)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(e){var c={};return function(r,s,a){var u={},h=function(i){e.call(this,i,function(o){CKEDITOR.tools.extend(u,o);var n=[],t;for(t in o){var l=o[t],f=l&&l.requires;if(!c[t]){if(l.icons)for(var E=l.icons.split(","),C=E.length;C--;)CKEDITOR.skin.addIcon(E[C],l.path+"icons/"+(CKEDITOR.env.hidpi&&l.hidpi?"hidpi/":"")+E[C]+".png");c[t]=1}if(f)for(f.split&&(f=f.split(",")),l=0;l<f.length;l++)u[f[l]]||n.push(f[l])}if(n.length)h.call(this,n);else{for(t in u)l=u[t],l.onLoad&&!l.onLoad._called&&(l.onLoad()===!1&&delete u[t],l.onLoad._called=1);s&&s.call(a||window,u)}},this)};h.call(this,r)}}),CKEDITOR.plugins.setLang=function(e,c,r){var s=this.get(e);e=s.langEntries||(s.langEntries={}),s=s.lang||(s.lang=[]),s.split&&(s=s.split(",")),CKEDITOR.tools.indexOf(s,c)==-1&&s.push(c),e[c]=r},CKEDITOR.ui=function(e){return e.ui?e.ui:(this.items={},this.instances={},this.editor=e,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(e,c,r){r.name=e.toLowerCase();var s=this.items[e]={type:c,command:r.command||null,args:Array.prototype.slice.call(arguments,2)};CKEDITOR.tools.extend(s,r)},get:function(e){return this.instances[e]},create:function(e){var c=this.items[e],s=c&&this._.handlers[c.type],r=c&&c.command&&this.editor.getCommand(c.command),s=s&&s.create.apply(this,c.args);return this.instances[e]=s,r&&r.uiItems.push(s),s&&!s.type&&(s.type=c.type),s},addHandler:function(e,c){this._.handlers[e]=c},space:function(e){return CKEDITOR.document.getById(this.spaceId(e))},spaceId:function(e){return this.editor.id+"_"+e}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function e(d,p,I){if(CKEDITOR.event.call(this),d=d&&CKEDITOR.tools.clone(d),p!==void 0){if(!(p instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");if(!I)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&I==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!r(p,I))throw Error('The specified element mode is not supported on element: "'+p.getName()+'".');this.element=p,this.elementMode=I,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(p.getId()||p.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||c(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",s),this.on("selectionChange",function(_){u(this,_.data.path)}),this.on("activeFilterChange",function(){u(this,this.elementPath(),!0)}),this.on("mode",s),this.on("instanceReady",function(){this.config.startupFocus&&this.focus()}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){i(this,d)},0,this)}function c(){do var d="editor"+ ++E;while(CKEDITOR.instances[d]);return d}function r(d,p){return p==CKEDITOR.ELEMENT_MODE_INLINE?d.is(CKEDITOR.dtd.$editable)||d.is("textarea"):p==CKEDITOR.ELEMENT_MODE_REPLACE?!d.is(CKEDITOR.dtd.$nonBodyContent):1}function s(){var d=this.commands,p;for(p in d)a(this,d[p])}function a(d,p){p[p.startDisabled||d.readOnly&&!p.readOnly?"disable":p.modes[d.mode]?"enable":"disable"]()}function u(d,p,I){if(p){var _,m,g=d.commands;for(m in g)_=g[m],(I||_.contextSensitive)&&_.refresh(d,p)}}function h(d){var p=d.config.customConfig;if(!p)return!1;var p=CKEDITOR.getUrl(p),I=C[p]||(C[p]={});return I.fn?(I.fn.call(d,d.config),CKEDITOR.getUrl(d.config.customConfig)!=p&&h(d)||d.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(p,function(){I.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},h(d)}),!0}function i(d,p){d.on("customConfigLoaded",function(){if(p){if(p.on)for(var I in p.on)d.on(I,p.on[I]);CKEDITOR.tools.extend(d.config,p,!0),delete d.config.on}I=d.config,d.readOnly=I.readOnly?!0:d.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?d.element.is("textarea")?d.element.hasAttribute("disabled")||d.element.hasAttribute("readonly"):d.element.isReadOnly():d.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?d.element.hasAttribute("disabled")||d.element.hasAttribute("readonly"):!1,d.blockless=d.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(d.element.is("textarea")||CKEDITOR.dtd[d.element.getName()].p):!1,d.tabIndex=I.tabIndex||d.element&&d.element.getAttribute("tabindex")||0,d.activeEnterMode=d.enterMode=d.blockless?CKEDITOR.ENTER_BR:I.enterMode,d.activeShiftEnterMode=d.shiftEnterMode=d.blockless?CKEDITOR.ENTER_BR:I.shiftEnterMode,I.skin&&(CKEDITOR.skinName=I.skin),d.fireOnce("configLoaded"),d.dataProcessor=new CKEDITOR.htmlDataProcessor(d),d.filter=d.activeFilter=new CKEDITOR.filter(d),o(d)}),p&&p.customConfig!=null&&(d.config.customConfig=p.customConfig),h(d)||d.fireOnce("customConfigLoaded")}function o(d){CKEDITOR.skin.loadPart("editor",function(){n(d)})}function n(d){CKEDITOR.lang.load(d.config.language,d.config.defaultLanguage,function(p,I){var _=d.config.title;d.langCode=p,d.lang=CKEDITOR.tools.prototypedCopy(I),d.title=typeof _=="string"||_===!1?_:[d.lang.editor,d.name].join(", "),d.config.contentsLangDirection||(d.config.contentsLangDirection=d.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?d.element.getDirection(1):d.lang.dir),d.fire("langLoaded"),t(d)})}function t(d){d.getStylesSet(function(p){d.once("loaded",function(){d.fire("stylesSet",{styles:p})},null,null,1),l(d)})}function l(d){var p=d.config,D=p.plugins,I=p.extraPlugins,_=p.removePlugins;if(I)var m=new RegExp("(?:^|,)(?:"+I.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),D=D.replace(m,""),D=D+(","+I);if(_)var g=new RegExp("(?:^|,)(?:"+_.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),D=D.replace(g,"");CKEDITOR.env.air&&(D+=",adobeair"),CKEDITOR.plugins.load(D.split(","),function(O){var v=[],K=[],k=[];d.plugins=O;for(var L in O){var B=O[L],F=B.lang,H=null,z=B.requires,T;if(CKEDITOR.tools.isArray(z)&&(z=z.join(",")),z&&(T=z.match(g)))for(;z=T.pop();)CKEDITOR.error("editor-plugin-required",{plugin:z.replace(",",""),requiredBy:L});F&&!d.lang[L]&&(F.split&&(F=F.split(",")),0<=CKEDITOR.tools.indexOf(F,d.langCode)?H=d.langCode:(H=d.langCode.replace(/-.*/,""),H=H!=d.langCode&&0<=CKEDITOR.tools.indexOf(F,H)?H:0<=CKEDITOR.tools.indexOf(F,"en")?"en":F[0]),B.langEntries&&B.langEntries[H]?(d.lang[L]=B.langEntries[H],H=null):k.push(CKEDITOR.getUrl(B.path+"lang/"+H+".js"))),K.push(H),v.push(B)}CKEDITOR.scriptLoader.load(k,function(){for(var x=["beforeInit","init","afterInit"],S=0;S<x.length;S++)for(var y=0;y<v.length;y++){var N=v[y];S===0&&K[y]&&N.lang&&N.langEntries&&(d.lang[N.name]=N.langEntries[K[y]]),N[x[S]]&&N[x[S]](d)}for(d.fireOnce("pluginsLoaded"),p.keystrokes&&d.setKeystroke(d.config.keystrokes),y=0;y<d.config.blockedKeystrokes.length;y++)d.keystrokeHandler.blockedKeystrokes[d.config.blockedKeystrokes[y]]=1;d.status="loaded",d.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,d)})})}function f(){var d=this.element;if(d&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var p=this.getData();return this.config.htmlEncodeOutput&&(p=CKEDITOR.tools.htmlEncode(p)),d.is("textarea")?d.setValue(p):d.setHtml(p),!0}return!1}e.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=e;var E=0,C={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(d,p){p.name=d.toLowerCase();var I=new CKEDITOR.command(this,p);return this.mode&&a(this,I),this.commands[d]=I},_attachToForm:function(){function d(g){I.updateElement(),I._.required&&!_.getValue()&&I.fire("required")===!1&&g.data.preventDefault()}function p(g){return!!(g&&g.call&&g.apply)}var I=this,_=I.element,m=new CKEDITOR.dom.element(_.$.form);_.is("textarea")&&m&&(m.on("submit",d),p(m.$.submit)&&(m.$.submit=CKEDITOR.tools.override(m.$.submit,function(g){return function(){d(),g.apply?g.apply(this):g()}})),I.on("destroy",function(){m.removeListener("submit",d)}))},destroy:function(d){this.fire("beforeDestroy"),!d&&f.call(this),this.editable(null),this.filter.destroy(),delete this.filter,delete this.activeFilter,this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(d){if(!d){if(d=this.getSelection(),!d)return null;d=d.getStartElement()}return d?new CKEDITOR.dom.elementPath(d,this.editable()):null},createRange:function(){var d=this.editable();return d?new CKEDITOR.dom.range(d):null},execCommand:function(d,p){var I=this.getCommand(d),_={name:d,commandData:p,command:I};return I&&I.state!=CKEDITOR.TRISTATE_DISABLED&&this.fire("beforeCommandExec",_)!==!1&&(_.returnValue=I.exec(_.commandData),!I.async&&this.fire("afterCommandExec",_)!==!1)?_.returnValue:!1},getCommand:function(d){return this.commands[d]},getData:function(d){!d&&this.fire("beforeGetData");var p=this._.data;return typeof p!="string"&&(p=(p=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?p.is("textarea")?p.getValue():p.getHtml():""),p={dataValue:p},!d&&this.fire("getData",p),p.dataValue},getSnapshot:function(){var d=this.fire("getSnapshot");return typeof d!="string"&&(d=(d=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?d.is("textarea")?d.getValue():d.getHtml():""),d},loadSnapshot:function(d){this.fire("loadSnapshot",d)},setData:function(d,p,I){var _=!0,m=p;p&&typeof p=="object"&&(I=p.internal,m=p.callback,_=!p.noSnapshot),!I&&_&&this.fire("saveSnapshot"),(m||!I)&&this.once("dataReady",function(g){!I&&_&&this.fire("saveSnapshot"),m&&m.call(g.editor)}),d={dataValue:d},!I&&this.fire("setData",d),this._.data=d.dataValue,!I&&this.fire("afterSetData",d)},setReadOnly:function(d){d=d==null||d,this.readOnly!=d&&(this.readOnly=d,this.keystrokeHandler.blockedKeystrokes[8]=+d,this.editable().setReadOnly(d),this.fire("readOnly"))},insertHtml:function(d,p,I){this.fire("insertHtml",{dataValue:d,mode:p,range:I})},insertText:function(d){this.fire("insertText",d)},insertElement:function(d){this.fire("insertElement",d)},getSelectedHtml:function(d){var p=this.editable(),I=this.getSelection(),I=I&&I.getRanges();return!p||!I||I.length===0?null:(p=p.getHtmlFromRange(I[0]),d?p.getHtml():p)},extractSelectedHtml:function(d,p){var I=this.editable(),_=this.getSelection().getRanges();return!I||_.length===0?null:(_=_[0],I=I.extractHtmlFromRange(_,p),p||this.getSelection().selectRanges([_]),d?I.getHtml():I)},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return this.status=="ready"&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return f.call(this)},setKeystroke:function(){for(var d=this.keystrokeHandler.keystrokes,p=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],I,_,m=p.length;m--;)I=p[m],_=0,CKEDITOR.tools.isArray(I)&&(_=I[1],I=I[0]),_?d[I]=_:delete d[I]},addFeature:function(d){return this.filter.addFeature(d)},setActiveFilter:function(d){d||(d=this.filter),this.activeFilter!==d&&(this.activeFilter=d,this.fire("activeFilterChange"),d===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(d.getAllowedEnterMode(this.enterMode),d.getAllowedEnterMode(this.shiftEnterMode,!0)))},setActiveEnterMode:function(d,p){d=d?this.blockless?CKEDITOR.ENTER_BR:d:this.enterMode,p=p?this.blockless?CKEDITOR.ENTER_BR:p:this.shiftEnterMode,(this.activeEnterMode!=d||this.activeShiftEnterMode!=p)&&(this.activeEnterMode=d,this.activeShiftEnterMode=p,this.fire("activeEnterModeChange"))},showNotification:function(d){alert(d)}})}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g}},function(){var e=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,c={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(r){for(var s,a,u=0,h;s=this._.htmlPartsRegex.exec(r);){if(a=s.index,a>u&&(u=r.substring(u,a),h?h.push(u):this.onText(u)),u=this._.htmlPartsRegex.lastIndex,(a=s[1])&&(a=a.toLowerCase(),h&&CKEDITOR.dtd.$cdata[a]&&(this.onCDATA(h.join("")),h=null),!h)){this.onTagClose(a);continue}if(h)h.push(s[0]);else if(a=s[3]){if(a=a.toLowerCase(),!/="/.test(a)){var i={},o,n=s[4];if(s=!!s[5],n)for(;o=e.exec(n);){var t=o[1].toLowerCase();o=o[2]||o[3]||o[4]||"",i[t]=!o&&c[t]?t:CKEDITOR.tools.htmlDecodeAttr(o)}this.onTagOpen(a,i,s),!h&&CKEDITOR.dtd.$cdata[a]&&(h=[])}}else(a=s[2])&&this.onComment(a)}r.length>u&&this.onText(r.substring(u,r.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(e){this._.output.push("<",e)},openTagClose:function(e,c){c?this._.output.push(" />"):this._.output.push(">")},attribute:function(e,c){typeof c=="string"&&(c=CKEDITOR.tools.htmlEncodeAttr(c)),this._.output.push(" ",e,'="',c,'"')},closeTag:function(e){this._.output.push("</",e,">")},text:function(e){this._.output.push(e)},comment:function(e){this._.output.push("<!--",e,"-->")},write:function(e){this._.output.push(e)},reset:function(){this._.output=[],this._.indent=!1},getHtml:function(e){var c=this._.output.join("");return e&&this.reset(),c}}}),function(){CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var e=this.parent.children,c=CKEDITOR.tools.indexOf(e,this),r=this.previous,s=this.next;r&&(r.next=s),s&&(s.previous=r),e.splice(c,1),this.parent=null},replaceWith:function(e){var c=this.parent.children,r=CKEDITOR.tools.indexOf(c,this),s=e.previous=this.previous,a=e.next=this.next;s&&(s.next=e),a&&(a.previous=e),c[r]=e,e.parent=this.parent,this.parent=null},insertAfter:function(e){var c=e.parent.children,r=CKEDITOR.tools.indexOf(c,e),s=e.next;c.splice(r+1,0,this),this.next=e.next,this.previous=e,e.next=this,s&&(s.previous=this),this.parent=e.parent},insertBefore:function(e){var c=e.parent.children,r=CKEDITOR.tools.indexOf(c,e);c.splice(r,0,this),this.next=e,(this.previous=e.previous)&&(e.previous.next=this),e.previous=this,this.parent=e.parent},getAscendant:function(e){for(var c=typeof e=="function"?e:typeof e=="string"?function(s){return s.name==e}:function(s){return s.name in e},r=this.parent;r&&r.type==CKEDITOR.NODE_ELEMENT;){if(c(r))return r;r=r.parent}return null},wrapWith:function(e){return this.replaceWith(e),e.add(this),e},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(e){return e||{}}}}(),CKEDITOR.htmlParser.comment=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(e,c){var r=this.value;return(r=e.onComment(c,r,this))?typeof r!="string"?(this.replaceWith(r),!1):(this.value=r,!0):(this.remove(),!1)},writeHtml:function(e,c){c&&this.filter(c),e.comment(this.value)}}),function(){CKEDITOR.htmlParser.text=function(e){this.value=e,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(e,c){if(!(this.value=e.onText(c,this.value,this)))return this.remove(),!1},writeHtml:function(e,c){c&&this.filter(c),e.text(this.value)}})}(),function(){CKEDITOR.htmlParser.cdata=function(e){this.value=e},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(e){e.write(this.value)}})}(),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function e(u){return u.attributes["data-cke-survive"]?!1:u.name=="a"&&u.attributes.href||CKEDITOR.dtd.$removeEmpty[u.name]}var c=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),r={ol:1,ul:1},s=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),a={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};CKEDITOR.htmlParser.fragment.fromHtml=function(u,h,i){function o(D){var O;if(0<p.length)for(var v=0;v<p.length;v++){var K=p[v],k=K.name,L=CKEDITOR.dtd[k],B=_.name&&CKEDITOR.dtd[_.name];B&&!B[k]||D&&L&&!L[D]&&CKEDITOR.dtd[D]?k==_.name&&(l(_,_.parent,1),v--):(O||(n(),O=1),K=K.clone(),K.parent=_,_=K,p.splice(v,1),v--)}}function n(){for(;I.length;)l(I.shift(),_)}function t(D){if(D._.isBlockLike&&D.name!="pre"&&D.name!="textarea"){var O=D.children.length,v=D.children[O-1],K;v&&v.type==CKEDITOR.NODE_TEXT&&((K=CKEDITOR.tools.rtrim(v.value))?v.value=K:D.children.length=O-1)}}function l(D,O,v){O=O||_||d;var K=_;D.previous===void 0&&(f(O,D)&&(_=O,C.onTagOpen(i,{}),D.returnPoint=O=_),t(D),e(D)&&!D.children.length||O.add(D),D.name=="pre"&&(g=!1),D.name=="textarea"&&(m=!1)),D.returnPoint?(_=D.returnPoint,delete D.returnPoint):_=v?O:K}function f(D,O){if((D==d||D.name=="body")&&i&&(!D.name||CKEDITOR.dtd[D.name][i])){var v,K;return(v=O.attributes&&(K=O.attributes["data-cke-real-element-type"])?K:O.name)&&v in CKEDITOR.dtd.$inline&&!(v in CKEDITOR.dtd.head)&&!O.isOrphan||O.type==CKEDITOR.NODE_TEXT}}function E(D,O){return D in CKEDITOR.dtd.$listItem||D in CKEDITOR.dtd.$tableContent?D==O||D=="dt"&&O=="dd"||D=="dd"&&O=="dt":!1}var C=new CKEDITOR.htmlParser,d=h instanceof CKEDITOR.htmlParser.element?h:typeof h=="string"?new CKEDITOR.htmlParser.element(h):new CKEDITOR.htmlParser.fragment,p=[],I=[],_=d,m=d.name=="textarea",g=d.name=="pre";for(C.onTagOpen=function(D,O,v,K){if(O=new CKEDITOR.htmlParser.element(D,O),O.isUnknown&&v&&(O.isEmpty=!0),O.isOptionalClose=K,e(O))p.push(O);else{if(D=="pre")g=!0;else{if(D=="br"&&g){_.add(new CKEDITOR.htmlParser.text(`
`));return}D=="textarea"&&(m=!0)}if(D=="br")I.push(O);else{for(;K=(v=_.name)?CKEDITOR.dtd[v]||(_._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):s,!(O.isUnknown||_.isUnknown||K[D]);)if(_.isOptionalClose)C.onTagClose(v);else if(D in r&&v in r)v=_.children,(v=v[v.length-1])&&v.name=="li"||l(v=new CKEDITOR.htmlParser.element("li"),_),!O.returnPoint&&(O.returnPoint=_),_=v;else if(D in CKEDITOR.dtd.$listItem&&!E(D,v))C.onTagOpen(D=="li"?"ul":"dl",{},0,1);else if(v in c&&!E(D,v))!O.returnPoint&&(O.returnPoint=_),_=_.parent;else if(v in CKEDITOR.dtd.$inline&&p.unshift(_),_.parent)l(_,_.parent,1);else{O.isOrphan=1;break}o(D),n(),O.parent=_,O.isEmpty?l(O):_=O}}},C.onTagClose=function(D){for(var O=p.length-1;0<=O;O--)if(D==p[O].name){p.splice(O,1);return}for(var v=[],K=[],k=_;k!=d&&k.name!=D;)k._.isBlockLike||K.unshift(k),v.push(k),k=k.returnPoint||k.parent;if(k!=d){for(O=0;O<v.length;O++){var L=v[O];l(L,L.parent)}_=k,k._.isBlockLike&&n(),l(k,k.parent),k==_&&(_=_.parent),p=p.concat(K)}D=="body"&&(i=!1)},C.onText=function(D){if(!(!(_._.hasInlineStarted&&!I.length||g||m)&&(D=CKEDITOR.tools.ltrim(D),D.length===0))){var O=_.name,v=O?CKEDITOR.dtd[O]||(_._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):s;!m&&!v["#"]&&O in c?(C.onTagOpen(a[O]||""),C.onText(D)):(n(),o(),g||m||(D=D.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),D=new CKEDITOR.htmlParser.text(D),f(_,D)&&this.onTagOpen(i,{},0,1),_.add(D))}},C.onCDATA=function(D){_.add(new CKEDITOR.htmlParser.cdata(D))},C.onComment=function(D){n(),o(),_.add(new CKEDITOR.htmlParser.comment(D))},C.parse(u),n();_!=d;)l(_,_.parent,1);return t(d),d},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(u,h){isNaN(h)&&(h=this.children.length);var i=0<h?this.children[h-1]:null;if(i){if(u._.isBlockLike&&i.type==CKEDITOR.NODE_TEXT&&(i.value=CKEDITOR.tools.rtrim(i.value),i.value.length===0)){this.children.pop(),this.add(u);return}i.next=u}u.previous=i,u.parent=this,this.children.splice(h,0,u),this._.hasInlineStarted||(this._.hasInlineStarted=u.type==CKEDITOR.NODE_TEXT||u.type==CKEDITOR.NODE_ELEMENT&&!u._.isBlockLike)},filter:function(u,h){h=this.getFilterContext(h),u.onRoot(h,this),this.filterChildren(u,!1,h)},filterChildren:function(u,h,i){if(this.childrenFilteredBy!=u.id)for(i=this.getFilterContext(i),h&&!this.parent&&u.onRoot(i,this),this.childrenFilteredBy=u.id,h=0;h<this.children.length;h++)this.children[h].filter(u,i)===!1&&h--},writeHtml:function(u,h){h&&this.filter(h),this.writeChildrenHtml(u)},writeChildrenHtml:function(u,h,i){var o=this.getFilterContext();for(i&&!this.parent&&h&&h.onRoot(o,this),h&&this.filterChildren(h,!1,o),h=0,i=this.children,o=i.length;h<o;h++)i[h].writeHtml(u)},forEach:function(u,h,i){if(!(i||h&&this.type!=h))var o=u(this);if(o!==!1){i=this.children;for(var n=0;n<i.length;n++)o=i[n],o.type==CKEDITOR.NODE_ELEMENT?o.forEach(u,h):h&&o.type!=h||u(o)}},getFilterContext:function(u){return u||{}}}}(),function(){function e(){this.rules=[]}function c(r,s,a,u){var h,i;for(h in s)(i=r[h])||(i=r[h]=new e),i.add(s[h],a,u)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(r){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new e,this.attributeNameRules=new e,this.elementsRules={},this.attributesRules={},this.textRules=new e,this.commentRules=new e,this.rootRules=new e,r&&this.addRules(r,10)},proto:{addRules:function(r,s){var a;typeof s=="number"?a=s:s&&"priority"in s&&(a=s.priority),typeof a!="number"&&(a=10),typeof s!="object"&&(s={}),r.elementNames&&this.elementNameRules.addMany(r.elementNames,a,s),r.attributeNames&&this.attributeNameRules.addMany(r.attributeNames,a,s),r.elements&&c(this.elementsRules,r.elements,a,s),r.attributes&&c(this.attributesRules,r.attributes,a,s),r.text&&this.textRules.add(r.text,a,s),r.comment&&this.commentRules.add(r.comment,a,s),r.root&&this.rootRules.add(r.root,a,s)},applyTo:function(r){r.filter(this)},onElementName:function(r,s){return this.elementNameRules.execOnName(r,s)},onAttributeName:function(r,s){return this.attributeNameRules.execOnName(r,s)},onText:function(r,s,a){return this.textRules.exec(r,s,a)},onComment:function(r,s,a){return this.commentRules.exec(r,s,a)},onRoot:function(r,s){return this.rootRules.exec(r,s)},onElement:function(r,s){for(var a=[this.elementsRules["^"],this.elementsRules[s.name],this.elementsRules.$],u,h=0;3>h;h++)if(u=a[h]){if(u=u.exec(r,s,this),u===!1)return null;if(u&&u!=s)return this.onNode(r,u);if(s.parent&&!s.name)break}return s},onNode:function(r,s){var a=s.type;return a==CKEDITOR.NODE_ELEMENT?this.onElement(r,s):a==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(r,s.value)):a==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(r,s.value)):null},onAttribute:function(r,s,a,u){return(a=this.attributesRules[a])?a.exec(r,u,s,this):u}}}),CKEDITOR.htmlParser.filterRulesGroup=e,e.prototype={add:function(r,s,a){this.rules.splice(this.findIndex(s),0,{value:r,priority:s,options:a})},addMany:function(r,s,a){for(var u=[this.findIndex(s),0],h=0,i=r.length;h<i;h++)u.push({value:r[h],priority:s,options:a});this.rules.splice.apply(this.rules,u)},findIndex:function(r){for(var s=this.rules,a=s.length-1;0<=a&&r<s[a].priority;)a--;return a+1},exec:function(r,s){var a=s instanceof CKEDITOR.htmlParser.node||s instanceof CKEDITOR.htmlParser.fragment,u=Array.prototype.slice.call(arguments,1),h=this.rules,i=h.length,o,n,t,l;for(l=0;l<i;l++)if(a&&(o=s.type,n=s.name),t=h[l],!(r.nonEditable&&!t.options.applyToAll||r.nestedEditable&&t.options.excludeNestedEditable)){if(t=t.value.apply(null,u),t===!1||a&&t&&(t.name!=n||t.type!=o))return t;t!=null&&(u[0]=s=t)}return s},execOnName:function(r,s){for(var a=0,u=this.rules,h=u.length,i;s&&a<h;a++)i=u[a],r.nonEditable&&!i.options.applyToAll||r.nestedEditable&&i.options.excludeNestedEditable||(s=s.replace(i.value[0],i.value[1]));return s}}}(),function(){function e(y,N){function w(U){return U||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text(" "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function R(U,V){return function(W){if(W.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var Y=[],te=r(W),Q,J;if(te)for(b(te,1)&&Y.push(te);te;)u(te)&&(Q=s(te))&&b(Q)&&((J=s(Q))&&!u(J)?Y.push(Q):(w(P).insertAfter(Q),Q.remove())),te=te.previous;for(te=0;te<Y.length;te++)Y[te].remove();(Y=!U||(typeof V=="function"?V(W):V)!==!1)&&((P||CKEDITOR.env.needsBrFiller||W.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(P||CKEDITOR.env.needsBrFiller||!(7<document.documentMode||W.name in CKEDITOR.dtd.tr||W.name in CKEDITOR.dtd.$listItem))?(Y=r(W),Y=!Y||W.name=="form"&&Y.name=="input"):Y=!1),Y&&W.add(w(U))}}}function b(U,V){if((!P||CKEDITOR.env.needsBrFiller)&&U.type==CKEDITOR.NODE_ELEMENT&&U.name=="br"&&!U.attributes["data-cke-eol"])return!0;var W;return!!(U.type==CKEDITOR.NODE_TEXT&&(W=U.value.match(p))&&(W.index&&(new CKEDITOR.htmlParser.text(U.value.substring(0,W.index)).insertBefore(U),U.value=W[0]),!CKEDITOR.env.needsBrFiller&&P&&(!V||U.parent.name in $)||!P&&((W=U.previous)&&W.name=="br"||!W||u(W))))}var A={elements:{}},P=N=="html",$=CKEDITOR.tools.extend({},g),M;for(M in $)"#"in _[M]||delete $[M];for(M in $)A.elements[M]=R(P,y.config.fillEmptyBlocks);return A.root=R(P,!1),A.elements.br=function(U){return function(V){if(V.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var W=V.attributes;if("data-cke-bogus"in W||"data-cke-eol"in W)delete W["data-cke-bogus"];else{for(W=V.next;W&&a(W);)W=W.next;var Y=s(V);!W&&u(V.parent)?h(V.parent,w(U)):u(W)&&Y&&!u(Y)&&w(U).insertBefore(W)}}}}(P),A}function c(y,N){return y!=CKEDITOR.ENTER_BR&&N!==!1?y==CKEDITOR.ENTER_DIV?"div":"p":!1}function r(y){for(y=y.children[y.children.length-1];y&&a(y);)y=y.previous;return y}function s(y){for(y=y.previous;y&&a(y);)y=y.previous;return y}function a(y){return y.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(y.value)||y.type==CKEDITOR.NODE_ELEMENT&&y.attributes["data-cke-bookmark"]}function u(y){return y&&(y.type==CKEDITOR.NODE_ELEMENT&&y.name in g||y.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function h(y,N){var w=y.children[y.children.length-1];y.children.push(N),N.parent=y,w&&(w.next=N,N.previous=w)}function i(y){y=y.attributes,y.contenteditable!="false"&&(y["data-cke-editable"]=y.contenteditable?"true":1),y.contenteditable="false"}function o(y){switch(y=y.attributes,y["data-cke-editable"]){case"true":y.contenteditable="true";break;case"1":delete y.contenteditable}}function n(y){return y.replace(k,function(N,w,R){return"<"+w+R.replace(L,function(b,A){return B.test(A)&&R.indexOf("data-cke-saved-"+A)==-1?" data-cke-saved-"+b+" data-cke-"+CKEDITOR.rnd+"-"+b:b})+">"})}function t(y,N){return y.replace(N,function(w,R,b){return w.indexOf("<textarea")===0&&(w=R+E(b).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(w)+"</cke:encoded>"})}function l(y){return y.replace(z,function(N,w){return decodeURIComponent(w)})}function f(y){return y.replace(/\x3c!--(?!{cke_protected})[\s\S]+?--\x3e/g,function(N){return"<!--"+I+"{C}"+encodeURIComponent(N).replace(/--/g,"%2D%2D")+"-->"})}function E(y){return y.replace(/\x3c!--\{cke_protected\}\{C\}([\s\S]+?)--\x3e/g,function(N,w){return decodeURIComponent(w)})}function C(y,N){var w=N._.dataStore;return y.replace(/\x3c!--\{cke_protected\}([\s\S]+?)--\x3e/g,function(R,b){return decodeURIComponent(b)}).replace(/\{cke_protected_(\d+)\}/g,function(R,b){return w&&w[b]||""})}function d(y,N){var w=[],A=N.config.protectedSource,R=N._.dataStore||(N._.dataStore={id:1}),b=/<\!--\{cke_temp(comment)?\}(\d*?)--\x3e/g,A=[/<script[\s\S]*?(<\/script>|$)/gi,/<noscript[\s\S]*?<\/noscript>/gi,/<meta[\s\S]*?\/?>/gi].concat(A);y=y.replace(/\x3c!--[\s\S]*?--\x3e/g,function($){return"<!--{cke_tempcomment}"+(w.push($)-1)+"-->"});for(var P=0;P<A.length;P++)y=y.replace(A[P],function($){return $=$.replace(b,function(M,U,V){return w[V]}),/cke_temp(comment)?/.test($)?$:"<!--{cke_temp}"+(w.push($)-1)+"-->"});return y=y.replace(b,function($,M,U){return"<!--"+I+(M?"{C}":"")+encodeURIComponent(w[U]).replace(/--/g,"%2D%2D")+"-->"}),y=y.replace(/<\w+(?:\s+(?:(?:[^\s=>]+\s*=\s*(?:[^'"\s>]+|'[^']*'|"[^"]*"))|[^\s=\/>]+))+\s*\/?>/g,function($){return $.replace(/\x3c!--\{cke_protected\}([^>]*)--\x3e/g,function(M,U){return R[R.id]=decodeURIComponent(U),"{cke_protected_"+R.id+++"}"})}),y=y.replace(/<(title|iframe|textarea)([^>]*)>([\s\S]*?)<\/\1>/g,function($,M,U,V){return"<"+M+U+">"+C(E(V),N)+"</"+M+">"})}CKEDITOR.htmlDataProcessor=function(y){var N,w,R=this;this.editor=y,this.dataFilter=N=new CKEDITOR.htmlParser.filter,this.htmlFilter=w=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,N.addRules(D),N.addRules(O,{applyToAll:!0}),N.addRules(e(y,"data"),{applyToAll:!0}),w.addRules(v),w.addRules(K,{applyToAll:!0}),w.addRules(e(y,"html"),{applyToAll:!0}),y.on("toHtml",function(b){b=b.data;var P=b.dataValue,A,P=d(P,y),P=t(P,H),P=n(P),P=t(P,F),P=P.replace(T,"$1cke:$2"),P=P.replace(S,"<cke:$1$2></cke:$1>"),P=P.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),P=P.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2");A=b.context||y.editable().getName();var $;CKEDITOR.env.ie&&9>CKEDITOR.env.version&&A=="pre"&&(A="div",P="<pre>"+P+"</pre>",$=1),A=y.document.createElement(A),A.setHtml("a"+P),P=A.getHtml().substr(1),P=P.replace(new RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),$&&(P=P.replace(/^<pre>|<\/pre>$/gi,"")),P=P.replace(x,"$1$2"),P=l(P),P=E(P),A=b.fixForBody===!1?!1:c(b.enterMode,y.config.autoParagraph),P=CKEDITOR.htmlParser.fragment.fromHtml(P,b.context,A),A&&($=P,!$.children.length&&CKEDITOR.dtd[$.name][A]&&(A=new CKEDITOR.htmlParser.element(A),$.add(A))),b.dataValue=P},null,null,5),y.on("toHtml",function(b){b.data.filter.applyTo(b.data.dataValue,!0,b.data.dontFilter,b.data.enterMode)&&y.fire("dataFiltered")},null,null,6),y.on("toHtml",function(b){b.data.dataValue.filterChildren(R.dataFilter,!0)},null,null,10),y.on("toHtml",function(b){b=b.data;var A=b.dataValue,P=new CKEDITOR.htmlParser.basicWriter;A.writeChildrenHtml(P),A=P.getHtml(!0),b.dataValue=f(A)},null,null,15),y.on("toDataFormat",function(b){var A=b.data.dataValue;b.data.enterMode!=CKEDITOR.ENTER_BR&&(A=A.replace(/^<br *\/?>/i,"")),b.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(A,b.data.context,c(b.data.enterMode,y.config.autoParagraph))},null,null,5),y.on("toDataFormat",function(b){b.data.dataValue.filterChildren(R.htmlFilter,!0)},null,null,10),y.on("toDataFormat",function(b){b.data.filter.applyTo(b.data.dataValue,!1,!0)},null,null,11),y.on("toDataFormat",function(b){var A=b.data.dataValue,P=R.writer;P.reset(),A.writeChildrenHtml(P),A=P.getHtml(!0),A=E(A),A=C(A,y),b.data.dataValue=A},null,null,15)},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(y,N,w,R){var b=this.editor,A,P,$,M;return N&&typeof N=="object"?(A=N.context,w=N.fixForBody,R=N.dontFilter,P=N.filter,$=N.enterMode,M=N.protectedWhitespaces):A=N,A||A===null||(A=b.editable().getName()),b.fire("toHtml",{dataValue:y,context:A,fixForBody:w,dontFilter:R,filter:P||b.filter,enterMode:$||b.enterMode,protectedWhitespaces:M}).dataValue},toDataFormat:function(y,N){var w,R,b;return N&&(w=N.context,R=N.filter,b=N.enterMode),w||w===null||(w=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:y,filter:R||this.editor.filter,context:w,enterMode:b||this.editor.enterMode}).dataValue}};var p=/(?:&nbsp;|\xa0)$/,I="{cke_protected}",_=CKEDITOR.dtd,m="caption colgroup col thead tfoot tbody".split(" "),g=CKEDITOR.tools.extend({},_.$blockLimit,_.$block),D={elements:{input:i,textarea:i}},O={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},v={elements:{embed:function(y){var N=y.parent;if(N&&N.name=="object"){var w=N.attributes.width,N=N.attributes.height;w&&(y.attributes.width=w),N&&(y.attributes.height=N)}},a:function(y){var N=y.attributes;if(!(y.children.length||N.name||N.id||y.attributes["data-cke-saved-name"]))return!1}}},K={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(y){var N=y.attributes;if(N){if(N["data-cke-temp"])return!1;for(var w=["name","href","src"],R,b=0;b<w.length;b++)R="data-cke-saved-"+w[b],R in N&&delete N[w[b]]}return y},table:function(y){y.children.slice(0).sort(function(N,w){var R,b;return N.type==CKEDITOR.NODE_ELEMENT&&w.type==N.type&&(R=CKEDITOR.tools.indexOf(m,N.name),b=CKEDITOR.tools.indexOf(m,w.name)),-1<R&&-1<b&&R!=b||(R=N.parent?N.getIndex():-1,b=w.parent?w.getIndex():-1),R>b?1:-1})},param:function(y){return y.children=[],y.isEmpty=!0,y},span:function(y){y.attributes.class=="Apple-style-span"&&delete y.name},html:function(y){delete y.attributes.contenteditable,delete y.attributes.class},body:function(y){delete y.attributes.spellcheck,delete y.attributes.contenteditable},style:function(y){var N=y.children[0];N&&N.value&&(N.value=CKEDITOR.tools.trim(N.value)),y.attributes.type||(y.attributes.type="text/css")},title:function(y){var N=y.children[0];!N&&h(y,N=new CKEDITOR.htmlParser.text),N.value=y.attributes["data-cke-title"]||""},input:o,textarea:o},attributes:{class:function(y){return CKEDITOR.tools.ltrim(y.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1}}};CKEDITOR.env.ie&&(K.attributes.style=function(y){return y.replace(/(^|;)([^\:]+)/g,function(N){return N.toLowerCase()})});var k=/<(a|area|img|input|source)\b([^>]*)>/gi,L=/([\w-:]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,B=/^(href|src|name)$/i,F=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,H=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,z=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,T=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,x=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,S=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(e,c){this.name=e,this.attributes=c||{},this.children=[];var r=e||"",s=r.match(/^cke:(.*)/);s&&(r=s[1]),r=!!(CKEDITOR.dtd.$nonBodyContent[r]||CKEDITOR.dtd.$block[r]||CKEDITOR.dtd.$listItem[r]||CKEDITOR.dtd.$tableContent[r]||CKEDITOR.dtd.$nonEditable[r]||r=="br"),this.isEmpty=!!CKEDITOR.dtd.$empty[e],this.isUnknown=!CKEDITOR.dtd[e],this._={isBlockLike:r,hasInlineStarted:this.isEmpty||!r}},CKEDITOR.htmlParser.cssStyle=function(e){var c={};return((e instanceof CKEDITOR.htmlParser.element?e.attributes.style:e)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(r,s,a){s=="font-family"&&(a=a.replace(/["']/g,"")),c[s.toLowerCase()]=a}),{rules:c,populate:function(r){var s=this.toString();s&&(r instanceof CKEDITOR.dom.element?r.setAttribute("style",s):r instanceof CKEDITOR.htmlParser.element?r.attributes.style=s:r.style=s)},toString:function(){var r=[],s;for(s in c)c[s]&&r.push(s,":",c[s],";");return r.join("")}}},function(){function e(s){return function(a){return a.type==CKEDITOR.NODE_ELEMENT&&(typeof s=="string"?a.name==s:a.name in s)}}var c=function(s,a){return s=s[0],a=a[0],s<a?-1:s>a?1:0},r=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:r.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(s,a){var u=this,h,i;if(a=u.getFilterContext(a),a.off)return!0;for(u.parent||s.onRoot(a,u);;){if(h=u.name,!(i=s.onElementName(a,h)))return this.remove(),!1;if(u.name=i,!(u=s.onElement(a,u)))return this.remove(),!1;if(u!==this)return this.replaceWith(u),!1;if(u.name==h)break;if(u.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(u),!1;if(!u.name)return this.replaceWithChildren(),!1}h=u.attributes;var o,n;for(o in h){for(i=h[o];;)if(n=s.onAttributeName(a,o))if(n!=o)delete h[o],o=n;else break;else{delete h[o];break}n&&((i=s.onAttribute(a,u,n,i))===!1?delete h[n]:h[n]=i)}return u.isEmpty||this.filterChildren(s,!1,a),!0},filterChildren:r.filterChildren,writeHtml:function(s,a){a&&this.filter(a);var u=this.name,h=[],i=this.attributes,o,n;s.openTag(u,i);for(o in i)h.push([o,i[o]]);for(s.sortAttributes&&h.sort(c),o=0,n=h.length;o<n;o++)i=h[o],s.attribute(i[0],i[1]);s.openTagClose(u,this.isEmpty),this.writeChildrenHtml(s),this.isEmpty||s.closeTag(u)},writeChildrenHtml:r.writeChildrenHtml,replaceWithChildren:function(){for(var s=this.children,a=s.length;a;)s[--a].insertAfter(this);this.remove()},forEach:r.forEach,getFirst:function(s){if(!s)return this.children.length?this.children[0]:null;typeof s!="function"&&(s=e(s));for(var a=0,u=this.children.length;a<u;++a)if(s(this.children[a]))return this.children[a];return null},getHtml:function(){var s=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(s),s.getHtml()},setHtml:function(s){s=this.children=CKEDITOR.htmlParser.fragment.fromHtml(s).children;for(var a=0,u=s.length;a<u;++a)s[a].parent=this},getOuterHtml:function(){var s=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(s),s.getHtml()},split:function(s){for(var a=this.children.splice(s,this.children.length-s),u=this.clone(),h=0;h<a.length;++h)a[h].parent=u;return u.children=a,a[0]&&(a[0].previous=null),0<s&&(this.children[s-1].next=null),this.parent.add(u,this.getIndex()+1),u},addClass:function(s){if(!this.hasClass(s)){var a=this.attributes.class||"";this.attributes.class=a+(a?" ":"")+s}},removeClass:function(s){var a=this.attributes.class;a&&((a=CKEDITOR.tools.trim(a.replace(new RegExp("(?:\\s+|^)"+s+"(?:\\s+|$)")," ")))?this.attributes.class=a:delete this.attributes.class)},hasClass:function(s){var a=this.attributes.class;return a?new RegExp("(?:^|\\s)"+s+"(?=\\s|$)").test(a):!1},getFilterContext:function(s){var a=[];if(s||(s={off:!1,nonEditable:!1,nestedEditable:!1}),s.off||this.attributes["data-cke-processor"]!="off"||a.push("off",!0),s.nonEditable||this.attributes.contenteditable!="false"?s.nonEditable&&!s.nestedEditable&&this.attributes.contenteditable=="true"&&a.push("nestedEditable",!0):a.push("nonEditable",!0),a.length){s=CKEDITOR.tools.copy(s);for(var u=0;u<a.length;u+=2)s[a[u]]=a[u+1]}return s}},!0)}(),function(){var e={},c=/{([^}]+)}/g,r=/([\\'])/g,s=/\n/g,a=/\r/g;CKEDITOR.template=function(u){if(e[u])this.output=e[u];else{var h=u.replace(r,"\\$1").replace(s,"\\n").replace(a,"\\r").replace(c,function(i,o){return"',data['"+o+"']==undefined?'{"+o+"}':data['"+o+"'],'"});this.output=e[u]=Function("data","buffer","return buffer?buffer.push('"+h+"'):['"+h+"'].join('');")}}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(e){CKEDITOR.instances[e.name]=e,e.on("focus",function(){CKEDITOR.currentInstance!=e&&(CKEDITOR.currentInstance=e,CKEDITOR.fire("currentInstance"))}),e.on("blur",function(){CKEDITOR.currentInstance==e&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}),CKEDITOR.fire("instance",null,e)},CKEDITOR.remove=function(e){delete CKEDITOR.instances[e.name]},function(){var e={};CKEDITOR.addTemplate=function(c,r){var s=e[c];return s||(s={name:c,source:r},CKEDITOR.fire("template",s),e[c]=new CKEDITOR.template(s.source))},CKEDITOR.getTemplate=function(c){return e[c]}}(),function(){var e=[];CKEDITOR.addCss=function(c){e.push(c)},CKEDITOR.getCss=function(){return e.join(`
`)}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,function(){CKEDITOR.inline=function(e,c){if(!CKEDITOR.env.isCompatible)return null;if(e=CKEDITOR.dom.element.get(e),e.getEditor())throw'The editor instance "'+e.getEditor().name+'" is already attached to the provided element.';var r=new CKEDITOR.editor(c,e,CKEDITOR.ELEMENT_MODE_INLINE),s=e.is("textarea")?e:null;return s?(r.setData(s.getValue(),null,!0),e=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!r.readOnly+'" class="cke_textarea_inline">'+s.getValue()+"</div>",CKEDITOR.document),e.insertAfter(s),s.hide(),s.$.form&&r._attachToForm()):r.setData(e.getHtml(),null,!0),r.on("loaded",function(){r.fire("uiReady"),r.editable(e),r.container=e,r.ui.contentsElement=e,r.setData(r.getData(1)),r.resetDirty(),r.fire("contentDom"),r.mode="wysiwyg",r.fire("mode"),r.status="ready",r.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,r)},null,null,1e4),r.on("destroy",function(){s&&(r.container.clearCustomData(),r.container.remove(),s.show()),r.element.clearCustomData(),delete r.element}),r},CKEDITOR.inlineAll=function(){var e,c,r;for(r in CKEDITOR.dtd.$editable)for(var s=CKEDITOR.document.getElementsByTag(r),a=0,u=s.count();a<u;a++)e=s.getItem(a),e.getAttribute("contenteditable")=="true"&&(c={element:e,config:{}},CKEDITOR.fire("inline",c)!==!1&&CKEDITOR.inline(e,c.config))},CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})}(),CKEDITOR.replaceClass="ckeditor",function(){function e(s,a,u,h){if(!CKEDITOR.env.isCompatible)return null;if(s=CKEDITOR.dom.element.get(s),s.getEditor())throw'The editor instance "'+s.getEditor().name+'" is already attached to the provided element.';var i=new CKEDITOR.editor(a,s,h);return h==CKEDITOR.ELEMENT_MODE_REPLACE&&(s.setStyle("visibility","hidden"),i._.required=s.hasAttribute("required"),s.removeAttribute("required")),u&&i.setData(u,null,!0),i.on("loaded",function(){r(i),h==CKEDITOR.ELEMENT_MODE_REPLACE&&i.config.autoUpdateElement&&s.$.form&&i._attachToForm(),i.setMode(i.config.startupMode,function(){i.resetDirty(),i.status="ready",i.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,i)})}),i.on("destroy",c),i}function c(){var s=this.container,a=this.element;s&&(s.clearCustomData(),s.remove()),a&&(a.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.show(),this._.required&&a.setAttribute("required","required")),delete this.element)}function r(s){var n=s.name,a=s.element,u=s.elementMode,h=s.fire("uiSpace",{space:"top",html:""}).html,i=s.fire("uiSpace",{space:"bottom",html:""}).html,o=new CKEDITOR.template('<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application"'+(s.title?' aria-labelledby="cke_{name}_arialbl"':"")+">"+(s.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':"")+'<{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>'),n=CKEDITOR.dom.element.createFromHtml(o.output({id:s.id,name:n,langDir:s.lang.dir,langCode:s.langCode,voiceLabel:s.title,topHtml:h?'<span id="'+s.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+h+"</span>":"",contentId:s.ui.spaceId("contents"),bottomHtml:i?'<span id="'+s.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+i+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"}));u==CKEDITOR.ELEMENT_MODE_REPLACE?(a.hide(),n.insertAfter(a)):a.append(n),s.container=n,s.ui.contentsElement=s.ui.space("contents"),h&&s.ui.space("top").unselectable(),i&&s.ui.space("bottom").unselectable(),a=s.config.width,u=s.config.height,a&&n.setStyle("width",CKEDITOR.tools.cssLength(a)),u&&s.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(u)),n.disableContextMenu(),CKEDITOR.env.webkit&&n.on("focus",function(){s.focus()}),s.fireOnce("uiReady")}CKEDITOR.replace=function(s,a){return e(s,a,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(s,a,u){return e(s,a,u,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var s=document.getElementsByTagName("textarea"),a=0;a<s.length;a++){var u=null,h=s[a];if(h.name||h.id){if(typeof arguments[0]=="string"){if(!new RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(h.className))continue}else if(typeof arguments[0]=="function"&&(u={},arguments[0](h,u)===!1))continue;this.replace(h,u)}}},CKEDITOR.editor.prototype.addMode=function(s,a){(this._.modes||(this._.modes={}))[s]=a},CKEDITOR.editor.prototype.setMode=function(s,a){var u=this,h=this._.modes;if(s!=u.mode&&h&&h[s]){if(u.fire("beforeSetMode",s),u.mode){var i=u.checkDirty(),h=u._.previousModeData,o,n=0;u.fire("beforeModeUnload"),u.editable(0),u._.previousMode=u.mode,u._.previousModeData=o=u.getData(1),u.mode=="source"&&h==o&&(u.fire("lockSnapshot",{forceUpdate:!0}),n=1),u.ui.space("contents").setHtml(""),u.mode=""}else u._.previousModeData=u.getData(1);this._.modes[s](function(){u.mode=s,i!==void 0&&!i&&u.resetDirty(),n?u.fire("unlockSnapshot"):s=="wysiwyg"&&u.fire("saveSnapshot"),setTimeout(function(){u.fire("mode"),a&&a.call(u)},0)})}},CKEDITOR.editor.prototype.resize=function(s,a,u,h){var t=this.container,i=this.ui.space("contents"),o=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement;h=h?this.container.getFirst(function(l){return l.type==CKEDITOR.NODE_ELEMENT&&l.hasClass("cke_inner")}):t,h.setSize("width",s,!0),o&&(o.style.width="1%");var n=(h.$.offsetHeight||0)-(i.$.clientHeight||0),t=Math.max(a-(u?0:n),0);a=u?a+n:a,i.setStyle("height",t+"px"),o&&(o.style.width="100%"),this.fire("resize",{outerHeight:a,contentsHeight:t,outerWidth:s||h.getSize("width")})},CKEDITOR.editor.prototype.getResizable=function(s){return s?this.ui.space("contents"):this.container},CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function e(m){var g=m.editor,D=m.data.path,O=D.blockLimit,v=m.data.selection,K=v.getRanges()[0],k;(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(v=c(v,D))&&(v.appendBogus(),k=CKEDITOR.env.ie),h(g,D.block,O)&&K.collapsed&&!K.getCommonAncestor().isReadOnly()&&(D=K.clone(),D.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),O=new CKEDITOR.dom.walker(D),O.guard=function(L){return!s(L)||L.type==CKEDITOR.NODE_COMMENT||L.isReadOnly()},!O.checkForward()||D.checkStartOfBlock()&&D.checkEndOfBlock())&&(g=K.fixBlock(!0,g.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(g=g.getFirst(s))&&g.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(g.getText()).match(/^(?:&nbsp;|\xa0)$/)&&g.remove(),k=1,m.cancel()),k&&K.select()}function c(m,g){if(m.isFake)return 0;var D=g.block||g.blockLimit,O=D&&D.getLast(s);if(!(!D||!D.isBlockBoundary()||O&&O.type==CKEDITOR.NODE_ELEMENT&&O.isBlockBoundary()||D.is("pre")||D.getBogus()))return D}function r(m){var g=m.data.getTarget();g.is("input")&&(g=g.getAttribute("type"),g!="submit"&&g!="reset"||m.data.preventDefault())}function s(m){return t(m)&&l(m)}function a(m,g){return function(D){var O=D.data.$.toElement||D.data.$.fromElement||D.data.$.relatedTarget;(O=O&&O.nodeType==CKEDITOR.NODE_ELEMENT?new CKEDITOR.dom.element(O):null)&&(g.equals(O)||g.contains(O))||m.call(this,D)}}function u(m){function g(k){return function(L,B){if(B&&L.type==CKEDITOR.NODE_ELEMENT&&L.is(v)&&(D=L),!(B||!s(L)||k&&E(L)))return!1}}var D,O=m.getRanges()[0];m=m.root;var v={table:1,ul:1,ol:1,dl:1};if(O.startPath().contains(v)){var K=O.clone();if(K.collapse(1),K.setStartAt(m,CKEDITOR.POSITION_AFTER_START),m=new CKEDITOR.dom.walker(K),m.guard=g(),m.checkBackward(),D)return K=O.clone(),K.collapse(),K.setEndAt(D,CKEDITOR.POSITION_AFTER_END),m=new CKEDITOR.dom.walker(K),m.guard=g(!0),D=!1,m.checkForward(),D}return null}function h(m,g,D){return m.config.autoParagraph!==!1&&m.activeEnterMode!=CKEDITOR.ENTER_BR&&(m.editable().equals(D)&&!g||g&&g.getAttribute("contenteditable")=="true")}function i(m){return m.activeEnterMode!=CKEDITOR.ENTER_BR&&m.config.autoParagraph!==!1?m.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1}function o(m){var g=m.editor;g.getSelection().scrollIntoView(),setTimeout(function(){g.fire("saveSnapshot")},0)}function n(m,g,D){var O=m.getCommonAncestor(g);for(g=m=D?g:m;(m=m.getParent())&&!O.equals(m)&&m.getChildCount()==1;)g=m;g.remove()}CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(m,g){this.base(g.$||g),this.editor=m,this.status="unloaded",this.hasFocus=!1,this.setup()},proto:{focus:function(){var m;if(CKEDITOR.env.webkit&&!this.hasFocus&&(m=this.editor._.previousActive||this.getDocument().getActive(),this.contains(m))){m.focus();return}try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]()}catch(g){if(!CKEDITOR.env.ie)throw g}CKEDITOR.env.safari&&!this.isInline()&&(m=CKEDITOR.document.getActive(),m.equals(this.getWindow().getFrame())||this.getWindow().focus())},on:function(m,g){var D=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(m)&&(m=m=="focus"?"focusin":"focusout",g=a(g,this),D[0]=m,D[1]=g),CKEDITOR.dom.element.prototype.on.apply(this,D)},attachListener:function(m){!this._.listeners&&(this._.listeners=[]);var g=Array.prototype.slice.call(arguments,1),g=m.on.apply(m,g);return this._.listeners.push(g),g},clearListeners:function(){var m=this._.listeners;try{for(;m.length;)m.pop().removeListener()}catch{}},restoreAttrs:function(){var m=this._.attrChanges,g,D;for(D in m)m.hasOwnProperty(D)&&(g=m[D],g!==null?this.setAttribute(D,g):this.removeAttribute(D))},attachClass:function(m){var g=this.getCustomData("classes");this.hasClass(m)||(!g&&(g=[]),g.push(m),this.setCustomData("classes",g),this.addClass(m))},changeAttr:function(m,g){var D=this.getAttribute(m);g!==D&&(!this._.attrChanges&&(this._.attrChanges={}),m in this._.attrChanges||(this._.attrChanges[m]=D),this.setAttribute(m,g))},insertText:function(m){this.editor.focus(),this.insertHtml(this.transformPlainTextToHtml(m),"text")},transformPlainTextToHtml:function(m){var g=this.editor.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:this.editor.activeEnterMode;return CKEDITOR.tools.transformPlainTextToHtml(m,g)},insertHtml:function(m,g,D){var O=this.editor;O.focus(),O.fire("saveSnapshot"),D||(D=O.getSelection().getRanges()[0]),d(this,g||"html",m,D),D.select(),o(this),this.editor.fire("afterInsertHtml",{})},insertHtmlIntoRange:function(m,g,D){d(this,D||"html",m,g),this.editor.fire("afterInsertHtml",{intoRange:g})},insertElement:function(m,g){var O=this.editor;O.focus(),O.fire("saveSnapshot");var D=O.activeEnterMode,O=O.getSelection(),v=m.getName(),v=CKEDITOR.dtd.$block[v];g||(g=O.getRanges()[0]),this.insertElementIntoRange(m,g)&&(g.moveToPosition(m,CKEDITOR.POSITION_AFTER_END),v&&((v=m.getNext(function(K){return s(K)&&!E(K)}))&&v.type==CKEDITOR.NODE_ELEMENT&&v.is(CKEDITOR.dtd.$block)?v.getDtd()["#"]?g.moveToElementEditStart(v):g.moveToElementEditEnd(m):v||D==CKEDITOR.ENTER_BR||(v=g.fixBlock(!0,D==CKEDITOR.ENTER_DIV?"div":"p"),g.moveToElementEditStart(v)))),O.selectRanges([g]),o(this)},insertElementIntoSelection:function(m){this.insertElement(m)},insertElementIntoRange:function(m,g){var D=this.editor,O=D.config.enterMode,v=m.getName(),K=CKEDITOR.dtd.$block[v];if(g.checkReadOnly())return!1;g.deleteContents(1),g.startContainer.type==CKEDITOR.NODE_ELEMENT&&g.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&p(g);var k,L;if(K)for(;(k=g.getCommonAncestor(0,1))&&(L=CKEDITOR.dtd[k.getName()])&&(!L||!L[v]);)k.getName()in CKEDITOR.dtd.span?g.splitElement(k):g.checkStartOfBlock()&&g.checkEndOfBlock()?(g.setStartBefore(k),g.collapse(!0),k.remove()):g.splitBlock(O==CKEDITOR.ENTER_DIV?"div":"p",D.editable());return g.insertNode(m),!0},setData:function(m,g){g||(m=this.editor.dataProcessor.toHtml(m)),this.setHtml(m),this.fixInitialSelection(),this.status=="unloaded"&&(this.status="ready"),this.editor.fire("dataReady")},getData:function(m){var g=this.getHtml();return m||(g=this.editor.dataProcessor.toDataFormat(g)),g},setReadOnly:function(m){this.setAttribute("contenteditable",!m)},detach:function(){this.removeClass("cke_editable"),this.status="detached";var m=this.editor;this._.detach(),delete m.document,delete m.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},fixInitialSelection:function(){function m(){var O=D.getDocument().$,v=O.getSelection(),K;e:if(v.anchorNode&&v.anchorNode==D.$)K=!0;else{if(CKEDITOR.env.webkit&&(K=D.getDocument().getActive())&&K.equals(D)&&!v.anchorNode){K=!0;break e}K=void 0}K&&(K=new CKEDITOR.dom.range(D),K.moveToElementEditStart(D),O=O.createRange(),O.setStart(K.startContainer.$,K.startOffset),O.collapse(!0),v.removeAllRanges(),v.addRange(O))}function g(){var O=D.getDocument().$,v=O.selection,K=D.getDocument().getActive();v.type=="None"&&K.equals(D)&&(v=new CKEDITOR.dom.range(D),O=O.body.createTextRange(),v.moveToElementEditStart(D),v=v.startContainer,v.type!=CKEDITOR.NODE_ELEMENT&&(v=v.getParent()),O.moveToElementText(v.$),O.collapse(!0),O.select())}var D=this;CKEDITOR.env.ie&&(9>CKEDITOR.env.version||CKEDITOR.env.quirks)?this.hasFocus&&(this.focus(),g()):this.hasFocus?(this.focus(),m()):this.once("focus",function(){m()},null,null,-999)},getHtmlFromRange:function(m){return m.collapsed?new CKEDITOR.dom.documentFragment(m.document):(m={doc:this.getDocument(),range:m.clone()},I.eol.detect(m,this),I.bogus.exclude(m),I.cell.shrink(m),m.fragment=m.range.cloneContents(),I.tree.rebuild(m,this),I.eol.fix(m,this),new CKEDITOR.dom.documentFragment(m.fragment.$))},extractHtmlFromRange:function(m,g){var D=_,O={range:m,doc:m.document},v=this.getHtmlFromRange(m);if(m.collapsed)return m.optimize(),v;m.enlarge(CKEDITOR.ENLARGE_INLINE,1),D.table.detectPurge(O),O.bookmark=m.createBookmark(),delete O.range;var K=this.editor.createRange();if(K.moveToPosition(O.bookmark.startNode,CKEDITOR.POSITION_BEFORE_START),O.targetBookmark=K.createBookmark(),D.list.detectMerge(O,this),D.table.detectRanges(O,this),D.block.detectMerge(O,this),O.tableContentsRanges?(D.table.deleteRanges(O),m.moveToBookmark(O.bookmark),O.range=m):(m.moveToBookmark(O.bookmark),O.range=m,m.extractContents(D.detectExtractMerge(O))),m.moveToBookmark(O.targetBookmark),m.optimize(),D.fixUneditableRangePosition(m),D.list.merge(O,this),D.table.purge(O,this),D.block.merge(O,this),g){if(D=m.startPath(),O=m.checkStartOfBlock()&&m.checkEndOfBlock()&&D.block&&!m.root.equals(D.block)){e:{var O=D.block.getElementsByTag("span"),K=0,k;if(O){for(;k=O.getItem(K++);)if(!l(k)){O=!0;break e}}O=!1}O=!O}O&&(m.moveToPosition(D.block,CKEDITOR.POSITION_BEFORE_START),D.block.remove())}else D.autoParagraph(this.editor,m),f(m.startContainer)&&m.startContainer.appendBogus();return m.startContainer.mergeSiblings(),v},setup:function(){var m=this.editor;if(this.attachListener(m,"beforeGetData",function(){var K=this.getData();this.is("textarea")||m.config.ignoreEmptyParagraph!==!1&&(K=K.replace(C,function(k,L){return L})),m.setData(K,null,1)},this),this.attachListener(m,"getSnapshot",function(K){K.data=this.getData(1)},this),this.attachListener(m,"afterSetData",function(){this.setData(m.getData(1))},this),this.attachListener(m,"loadSnapshot",function(K){this.setData(K.data,1)},this),this.attachListener(m,"beforeFocus",function(){var K=m.getSelection();(K=K&&K.getNative())&&K.type=="Control"||this.focus()},this),this.attachListener(m,"insertHtml",function(K){this.insertHtml(K.data.dataValue,K.data.mode,K.data.range)},this),this.attachListener(m,"insertElement",function(K){this.insertElement(K.data)},this),this.attachListener(m,"insertText",function(K){this.insertText(K.data)},this),this.setReadOnly(m.readOnly),this.attachClass("cke_editable"),m.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?this.attachClass("cke_editable_inline"):m.elementMode!=CKEDITOR.ELEMENT_MODE_REPLACE&&m.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO||this.attachClass("cke_editable_themed"),this.attachClass("cke_contents_"+m.config.contentsLangDirection),m.keystrokeHandler.blockedKeystrokes[8]=+m.readOnly,m.keystrokeHandler.attach(this),this.on("blur",function(){this.hasFocus=!1},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),m.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,m.once("contentDom",function(){m.focusManager.focus(this)},this)),this.isInline()&&this.changeAttr("tabindex",m.tabIndex),!this.is("textarea")){m.document=this.getDocument(),m.window=this.getWindow();var g=m.document;this.changeAttr("spellcheck",!m.config.disableNativeSpellChecker);var D=m.config.contentsLangDirection;this.getDirection(1)!=D&&this.changeAttr("dir",D);var O=CKEDITOR.getCss();O&&(D=g.getHead(),D.getCustomData("stylesheet")||(O=g.appendStyleText(O),O=new CKEDITOR.dom.element(O.ownerNode||O.owningElement),D.setCustomData("stylesheet",O),O.data("cke-temp",1))),D=g.getCustomData("stylesheet_ref")||0,g.setCustomData("stylesheet_ref",D+1),this.setCustomData("cke_includeReadonly",!m.config.disableReadonlyStyling),this.attachListener(this,"click",function(K){K=K.data;var k=new CKEDITOR.dom.elementPath(K.getTarget(),this).contains("a");k&&K.$.button!=2&&k.isReadOnly()&&K.preventDefault()});var v={8:1,46:1};this.attachListener(m,"key",function(K){if(m.readOnly)return!0;var k=K.data.domEvent.getKey(),L;if(k in v){K=m.getSelection();var B,F=K.getRanges()[0],H=F.startPath(),z,T,x,k=k==8;CKEDITOR.env.ie&&11>CKEDITOR.env.version&&(B=K.getSelectedElement())||(B=u(K))?(m.fire("saveSnapshot"),F.moveToPosition(B,CKEDITOR.POSITION_BEFORE_START),B.remove(),F.select(),m.fire("saveSnapshot"),L=1):F.collapsed&&((z=H.block)&&(x=z[k?"getPrevious":"getNext"](t))&&x.type==CKEDITOR.NODE_ELEMENT&&x.is("table")&&F[k?"checkStartOfBlock":"checkEndOfBlock"]()?(m.fire("saveSnapshot"),F[k?"checkEndOfBlock":"checkStartOfBlock"]()&&z.remove(),F["moveToElementEdit"+(k?"End":"Start")](x),F.select(),m.fire("saveSnapshot"),L=1):H.blockLimit&&H.blockLimit.is("td")&&(T=H.blockLimit.getAscendant("table"))&&F.checkBoundaryOfElement(T,k?CKEDITOR.START:CKEDITOR.END)&&(x=T[k?"getPrevious":"getNext"](t))?(m.fire("saveSnapshot"),F["moveToElementEdit"+(k?"End":"Start")](x),F.checkStartOfBlock()&&F.checkEndOfBlock()?x.remove():F.select(),m.fire("saveSnapshot"),L=1):(T=H.contains(["td","th","caption"]))&&F.checkBoundaryOfElement(T,k?CKEDITOR.START:CKEDITOR.END)&&(L=1))}return!L}),m.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(K){K.data.getKeystroke()in v&&!this.getFirst(s)&&(this.appendBogus(),K=m.createRange(),K.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),K.select())}),this.attachListener(this,"dblclick",function(K){if(m.readOnly)return!1;K={element:K.data.getTarget()},m.fire("doubleclick",K)}),CKEDITOR.env.ie&&this.attachListener(this,"click",r),CKEDITOR.env.ie&&!CKEDITOR.env.edge||this.attachListener(this,"mousedown",function(K){var k=K.data.getTarget();k.is("img","hr","input","textarea","select")&&!k.isReadOnly()&&(m.getSelection().selectElement(k),k.is("input","textarea","select")&&K.data.preventDefault())}),CKEDITOR.env.edge&&this.attachListener(this,"mouseup",function(K){(K=K.data.getTarget())&&K.is("img")&&m.getSelection().selectElement(K)}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(K){if(K.data.$.button==2&&(K=K.data.getTarget(),!K.getOuterHtml().replace(C,""))){var k=m.createRange();k.moveToElementEditStart(K),k.select(!0)}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(K){K.data.getTarget().is("input","select")&&K.data.preventDefault()}),this.attachListener(this,"mouseup",function(K){K.data.getTarget().is("input","textarea")&&K.data.preventDefault()})),CKEDITOR.env.webkit&&this.attachListener(m,"key",function(K){if(m.readOnly)return!0;if(K=K.data.domEvent.getKey(),K in v){var k=K==8,L=m.getSelection().getRanges()[0];if(K=L.startPath(),L.collapsed)e:{var B=K.block;if(B&&L[k?"checkStartOfBlock":"checkEndOfBlock"]()&&L.moveToClosestEditablePosition(B,!k)&&L.collapsed){if(L.startContainer.type==CKEDITOR.NODE_ELEMENT){var F=L.startContainer.getChild(L.startOffset-(k?1:0));if(F&&F.type==CKEDITOR.NODE_ELEMENT&&F.is("hr")){m.fire("saveSnapshot"),F.remove(),K=!0;break e}}if(L=L.startPath().block,!L||L&&L.contains(B))K=void 0;else{m.fire("saveSnapshot");var H;(H=(k?L:B).getBogus())&&H.remove(),H=m.getSelection(),F=H.createBookmarks(),(k?B:L).moveChildren(k?L:B,!1),K.lastElement.mergeSiblings(),n(B,L,!k),H.selectBookmarks(F),K=!0}}else K=!1}else k=L,H=K.block,L=k.endPath().block,H&&L&&!H.equals(L)?(m.fire("saveSnapshot"),(B=H.getBogus())&&B.remove(),k.enlarge(CKEDITOR.ENLARGE_INLINE),k.deleteContents(),L.getParent()&&(L.moveChildren(H,!1),K.lastElement.mergeSiblings(),n(H,L,!0)),k=m.getSelection().getRanges()[0],k.collapse(1),k.optimize(),k.startContainer.getHtml()===""&&k.startContainer.appendBogus(),k.select(),K=!0):K=!1;return K?(m.getSelection().scrollIntoView(),m.fire("saveSnapshot"),!1):void 0}},this,null,100)}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs();var m;if(m=this.removeCustomData("classes"))for(;m.length;)this.removeClass(m.pop());if(!this.is("textarea")){m=this.getDocument();var g=m.getHead();if(g.getCustomData("stylesheet")){var D=m.getCustomData("stylesheet_ref");--D?m.setCustomData("stylesheet_ref",D):(m.removeCustomData("stylesheet_ref"),g.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(m){var g=this._.editable;return g&&m?0:(arguments.length&&(g=this._.editable=m?m instanceof CKEDITOR.editable?m:new CKEDITOR.editable(this,m):(g&&g.detach(),null)),g)},CKEDITOR.on("instanceLoaded",function(m){var g=m.editor;g.on("insertElement",function(D){D=D.data,D.type==CKEDITOR.NODE_ELEMENT&&(D.is("input")||D.is("textarea"))&&(D.getAttribute("contentEditable")!="false"&&D.data("cke-editable",D.hasAttribute("contenteditable")?"true":"1"),D.setAttribute("contentEditable",!1))}),g.on("selectionChange",function(D){if(!g.readOnly){var O=g.getSelection();O&&!O.isLocked&&(O=g.checkDirty(),g.fire("lockSnapshot"),e(D),g.fire("unlockSnapshot"),!O&&g.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(m){var g=m.editor;g.on("mode",function(){var D=g.editable();if(D&&D.isInline()){var O=g.title;D.changeAttr("role","textbox"),D.changeAttr("aria-label",O),O&&D.changeAttr("title",O);var v=g.fire("ariaEditorHelpLabel",{}).label;if(v&&(O=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents"))){var K=CKEDITOR.tools.getNextId(),v=CKEDITOR.dom.element.createFromHtml('<span id="'+K+'" class="cke_voice_label">'+v+"</span>");O.append(v),D.changeAttr("aria-describedby",K)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");var t=CKEDITOR.dom.walker.whitespaces(!0),l=CKEDITOR.dom.walker.bookmark(!1,!0),f=CKEDITOR.dom.walker.empty(),E=CKEDITOR.dom.walker.bogus(),C=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,d=function(){function m(z){return z.type==CKEDITOR.NODE_ELEMENT}function g(z,T){var x,S,y,N,w=[],R=T.range.startContainer;x=T.range.startPath();for(var R=L[R.getName()],b=0,A=z.getChildren(),P=A.count(),$=-1,M=-1,U=0,V=x.contains(L.$list);b<P;++b)x=A.getItem(b),m(x)?(y=x.getName(),V&&y in CKEDITOR.dtd.$list?w=w.concat(g(x,T)):(N=!!R[y],y!="br"||!x.data("cke-eol")||b&&b!=P-1||(U=(S=b?w[b-1].node:A.getItem(b+1))&&(!m(S)||!S.is("br")),S=S&&m(S)&&L.$block[S.getName()]),$!=-1||N||($=b),N||(M=b),w.push({isElement:1,isLineBreak:U,isBlock:x.isBlockBoundary(),hasBlockSibling:S,node:x,name:y,allowed:N}),S=U=0)):w.push({isElement:0,node:x,allowed:1});return-1<$&&(w[$].firstNotAllowed=1),-1<M&&(w[M].lastNotAllowed=1),w}function D(z,T){var x=[],S=z.getChildren(),y=S.count(),N,w=0,R=L[T],b=!z.is(L.$inline)||z.is("br");for(b&&x.push(" ");w<y;w++)N=S.getItem(w),m(N)&&!N.is(R)?x=x.concat(D(N,T)):x.push(N);return b&&x.push(" "),x}function O(z){return m(z.startContainer)&&z.startContainer.getChild(z.startOffset-1)}function v(z){return z&&m(z)&&(z.is(L.$removeEmpty)||z.is("a")&&!z.isBlockBoundary())}function K(z,T,x,S){var y=z.clone(),N,w;y.setEndAt(T,CKEDITOR.POSITION_BEFORE_END),(N=new CKEDITOR.dom.walker(y).next())&&m(N)&&B[N.getName()]&&(w=N.getPrevious())&&m(w)&&!w.getParent().equals(z.startContainer)&&x.contains(w)&&S.contains(N)&&N.isIdentical(w)&&(N.moveChildren(w),N.remove(),K(z,T,x,S))}function k(z,T){function x(N,w){if(w.isBlock&&w.isElement&&!w.node.is("br")&&m(N)&&N.is("br"))return N.remove(),1}var S=T.endContainer.getChild(T.endOffset),y=T.endContainer.getChild(T.endOffset-1);S&&x(S,z[z.length-1]),y&&x(y,z[0])&&(T.setEnd(T.endContainer,T.endOffset-1),T.collapse())}var L=CKEDITOR.dtd,B={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},F={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},H=CKEDITOR.tools.extend({},L.$inline);return delete H.br,function(z,T,x,S){var y=z.editor,N=!1;if(T=="unfiltered_html"&&(T="html",N=!0),!S.checkReadOnly()){var w=new CKEDITOR.dom.elementPath(S.startContainer,S.root).blockLimit||S.root;z={type:T,dontFilter:N,editable:z,editor:y,range:S,blockLimit:w,mergeCandidates:[],zombies:[]},T=z.range,S=z.mergeCandidates;var R,b;if(z.type=="text"&&T.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(R=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",T.document),T.insertNode(R),T.setStartAfter(R)),N=new CKEDITOR.dom.elementPath(T.startContainer),z.endPath=w=new CKEDITOR.dom.elementPath(T.endContainer),!T.collapsed){var y=w.block||w.blockLimit,A=T.getCommonAncestor();y&&!y.equals(A)&&!y.contains(A)&&T.checkEndOfBlock()&&z.zombies.push(y),T.deleteContents()}for(;(b=O(T))&&m(b)&&b.isBlockBoundary()&&N.contains(b);)T.moveToPosition(b,CKEDITOR.POSITION_BEFORE_END);for(K(T,z.blockLimit,N,w),R&&(T.setEndBefore(R),T.collapse(),R.remove()),R=T.startPath(),(y=R.contains(v,!1,1))&&(T.splitElement(y),z.inlineStylesRoot=y,z.inlineStylesPeak=R.lastElement),R=T.createBookmark(),(y=R.startNode.getPrevious(s))&&m(y)&&v(y)&&S.push(y),(y=R.startNode.getNext(s))&&m(y)&&v(y)&&S.push(y),y=R.startNode;(y=y.getParent())&&v(y);)S.push(y);if(T.moveToBookmark(R),R=x){if(R=z.range,z.type=="text"&&z.inlineStylesRoot){for(b=z.inlineStylesPeak,T=b.getDocument().createText("{cke-peak}"),S=z.inlineStylesRoot.getParent();!b.equals(S);)T=T.appendTo(b.clone()),b=b.getParent();x=T.getOuterHtml().split("{cke-peak}").join(x)}if(b=z.blockLimit.getName(),/^\s+|\s+$/.test(x)&&"span"in CKEDITOR.dtd[b]){var P='<span data-cke-marker="1">&nbsp;</span>';x=P+x+P}if(x=z.editor.dataProcessor.toHtml(x,{context:null,fixForBody:!1,protectedWhitespaces:!!P,dontFilter:z.dontFilter,filter:z.editor.activeFilter,enterMode:z.editor.activeEnterMode}),b=R.document.createElement("body"),b.setHtml(x),P&&(b.getFirst().remove(),b.getLast().remove()),(P=R.startPath().block)&&(P.getChildCount()!=1||!P.getBogus()))e:{var $;if(b.getChildCount()==1&&m($=b.getFirst())&&$.is(F)&&!$.hasAttribute("contenteditable")){for(P=$.getElementsByTag("*"),R=0,S=P.count();R<S;R++)if(T=P.getItem(R),!T.is(H))break e;$.moveChildren($.getParent(1)),$.remove()}}z.dataWrapper=b,R=x}if(R){$=z.range,R=$.document;var M;b=z.blockLimit,S=0;var U,P=[],V,W;x=y=0;var Y,te;T=$.startContainer;var N=z.endPath.elements[0],Q,w=N.getPosition(T),A=!!N.getCommonAncestor(T)&&w!=CKEDITOR.POSITION_IDENTICAL&&!(w&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED);for(T=g(z.dataWrapper,z),k(T,$);S<T.length;S++){if(w=T[S],M=w.isLineBreak){M=$,Y=b;var J=void 0,re=void 0;w.hasBlockSibling?M=1:(J=M.startContainer.getAscendant(L.$block,1))&&J.is({div:1,p:1})?(re=J.getPosition(Y),re==CKEDITOR.POSITION_IDENTICAL||re==CKEDITOR.POSITION_CONTAINS?M=0:(Y=M.splitElement(J),M.moveToPosition(Y,CKEDITOR.POSITION_AFTER_START),M=1)):M=0}if(M)x=0<S;else{if(M=$.startPath(),!w.isBlock&&h(z.editor,M.block,M.blockLimit)&&(W=i(z.editor))&&(W=R.createElement(W),W.appendBogus(),$.insertNode(W),CKEDITOR.env.needsBrFiller&&(U=W.getBogus())&&U.remove(),$.moveToPosition(W,CKEDITOR.POSITION_BEFORE_END)),(M=$.startPath().block)&&!M.equals(V)&&((U=M.getBogus())&&(U.remove(),P.push(M)),V=M),w.firstNotAllowed&&(y=1),y&&w.isElement){for(M=$.startContainer,Y=null;M&&!L[M.getName()][w.name];){if(M.equals(b)){M=null;break}Y=M,M=M.getParent()}if(M)Y&&(te=$.splitElement(Y),z.zombies.push(te),z.zombies.push(Y));else{Y=b.getName(),Q=!S,M=S==T.length-1,Y=D(w.node,Y);for(var J=[],re=Y.length,ne=0,q=void 0,G=0,X=-1;ne<re;ne++)q=Y[ne],q==" "?(G||Q&&!ne||(J.push(new CKEDITOR.dom.text(" ")),X=J.length),G=1):(J.push(q),G=0);M&&X==J.length&&J.pop(),Q=J}}if(Q){for(;M=Q.pop();)$.insertNode(M);Q=0}else $.insertNode(w.node);w.lastNotAllowed&&S<T.length-1&&((te=A?N:te)&&$.setEndAt(te,CKEDITOR.POSITION_AFTER_START),y=0),$.collapse()}}T.length!=1?U=!1:(U=T[0],U=U.isElement&&U.node.getAttribute("contenteditable")=="false"),U&&(x=!0,M=T[0].node,$.setStartAt(M,CKEDITOR.POSITION_BEFORE_START),$.setEndAt(M,CKEDITOR.POSITION_AFTER_END)),z.dontMoveCaret=x,z.bogusNeededBlocks=P}U=z.range;var j;for(te=z.bogusNeededBlocks,Q=U.createBookmark();V=z.zombies.pop();)V.getParent()&&(W=U.clone(),W.moveToElementEditStart(V),W.removeEmptyBlocksAtEnd());if(te)for(;V=te.pop();)CKEDITOR.env.needsBrFiller?V.appendBogus():V.append(U.document.createText(" "));for(;V=z.mergeCandidates.pop();)V.mergeSiblings();if(U.moveToBookmark(Q),!z.dontMoveCaret){for(V=O(U);V&&m(V)&&!V.is(L.$empty);){if(V.isBlockBoundary())U.moveToPosition(V,CKEDITOR.POSITION_BEFORE_END);else{if(v(V)&&V.getHtml().match(/(\s|&nbsp;)$/g)){j=null;break}j=U.clone(),j.moveToPosition(V,CKEDITOR.POSITION_BEFORE_END)}V=V.getLast(s)}j&&U.moveToRange(j)}}}}(),p=function(){function m(O){return O=new CKEDITOR.dom.walker(O),O.guard=function(v,K){if(K)return!1;if(v.type==CKEDITOR.NODE_ELEMENT)return v.is(CKEDITOR.dtd.$tableContent)},O.evaluator=function(v){return v.type==CKEDITOR.NODE_ELEMENT},O}function g(O,v,K){return v=O.getDocument().createElement(v),O.append(v,K),v}function D(O){var v=O.count(),K;for(v;0<v--;)K=O.getItem(v),CKEDITOR.tools.trim(K.getHtml())||(K.appendBogus(),CKEDITOR.env.ie&&9>CKEDITOR.env.version&&K.getChildCount()&&K.getFirst().remove())}return function(O){var v=O.startContainer,K=v.getAscendant("table",1),k=!1;D(K.getElementsByTag("td")),D(K.getElementsByTag("th")),K=O.clone(),K.setStart(v,0),K=m(K).lastBackward(),K||(K=O.clone(),K.setEndAt(v,CKEDITOR.POSITION_BEFORE_END),K=m(K).lastForward(),k=!0),K||(K=v),K.is("table")?(O.setStartAt(K,CKEDITOR.POSITION_BEFORE_START),O.collapse(!0),K.remove()):(K.is({tbody:1,thead:1,tfoot:1})&&(K=g(K,"tr",k)),K.is("tr")&&(K=g(K,K.getParent().is("thead")?"th":"td",k)),(v=K.getBogus())&&v.remove(),O.moveToPosition(K,k?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))}}(),I={eol:{detect:function(m,g){var D=m.range,O=D.clone(),v=D.clone(),K=new CKEDITOR.dom.elementPath(D.startContainer,g),k=new CKEDITOR.dom.elementPath(D.endContainer,g);O.collapse(1),v.collapse(),K.block&&O.checkBoundaryOfElement(K.block,CKEDITOR.END)&&(D.setStartAfter(K.block),m.prependEolBr=1),k.block&&v.checkBoundaryOfElement(k.block,CKEDITOR.START)&&(D.setEndBefore(k.block),m.appendEolBr=1)},fix:function(m,g){var D=g.getDocument(),O;m.appendEolBr&&(O=this.createEolBr(D),m.fragment.append(O)),!m.prependEolBr||O&&!O.getPrevious()||m.fragment.append(this.createEolBr(D),1)},createEolBr:function(m){return m.createElement("br",{attributes:{"data-cke-eol":1}})}},bogus:{exclude:function(m){var D=m.range.getBoundaryNodes(),g=D.startNode,D=D.endNode;!D||!E(D)||g&&g.equals(D)||m.range.setEndBefore(D)}},tree:{rebuild:function(m,g){var K=m.range,D=K.getCommonAncestor(),O=new CKEDITOR.dom.elementPath(D,g),v=new CKEDITOR.dom.elementPath(K.startContainer,g),K=new CKEDITOR.dom.elementPath(K.endContainer,g),k;if(D.type==CKEDITOR.NODE_TEXT&&(D=D.getParent()),O.blockLimit.is({tr:1,table:1})){var L=O.contains("table").getParent();k=function(F){return!F.equals(L)}}else if(O.block&&O.block.is(CKEDITOR.dtd.$listItem)&&(v=v.contains(CKEDITOR.dtd.$list),K=K.contains(CKEDITOR.dtd.$list),!v.equals(K))){var B=O.contains(CKEDITOR.dtd.$list).getParent();k=function(F){return!F.equals(B)}}k||(k=function(F){return!F.equals(O.block)&&!F.equals(O.blockLimit)}),this.rebuildFragment(m,g,D,k)},rebuildFragment:function(m,g,D,O){for(var v;D&&!D.equals(g)&&O(D);)v=D.clone(0,1),m.fragment.appendTo(v),m.fragment=v,D=D.getParent()}},cell:{shrink:function(m){m=m.range;var g=m.startContainer,D=m.endContainer,O=m.startOffset,v=m.endOffset;g.type==CKEDITOR.NODE_ELEMENT&&g.equals(D)&&g.is("tr")&&++O==v&&m.shrink(CKEDITOR.SHRINK_TEXT)}}},_=function(){function m(O,v){var K=O.getParent();K.is(CKEDITOR.dtd.$inline)&&O[v?"insertBefore":"insertAfter"](K)}function g(O,v,K){m(v),m(K,1);for(var k;k=K.getNext();)k.insertAfter(v),v=k;f(O)&&O.remove()}function D(O,v){var K=new CKEDITOR.dom.range(O);return K.setStartAfter(v.startNode),K.setEndBefore(v.endNode),K}return{list:{detectMerge:function(O,v){var K=D(v,O.bookmark),k=K.startPath(),L=K.endPath(),B=k.contains(CKEDITOR.dtd.$list),F=L.contains(CKEDITOR.dtd.$list);O.mergeList=B&&F&&B.getParent().equals(F.getParent())&&!B.equals(F),O.mergeListItems=k.block&&L.block&&k.block.is(CKEDITOR.dtd.$listItem)&&L.block.is(CKEDITOR.dtd.$listItem),(O.mergeList||O.mergeListItems)&&(K=K.clone(),K.setStartBefore(O.bookmark.startNode),K.setEndAfter(O.bookmark.endNode),O.mergeListBookmark=K.createBookmark())},merge:function(O,v){if(O.mergeListBookmark){var K=O.mergeListBookmark.startNode,k=O.mergeListBookmark.endNode,L=new CKEDITOR.dom.elementPath(K,v),B=new CKEDITOR.dom.elementPath(k,v);if(O.mergeList){var F=L.contains(CKEDITOR.dtd.$list),H=B.contains(CKEDITOR.dtd.$list);F.equals(H)||(H.moveChildren(F),H.remove())}O.mergeListItems&&(L=L.contains(CKEDITOR.dtd.$listItem),B=B.contains(CKEDITOR.dtd.$listItem),L.equals(B)||g(B,K,k)),K.remove(),k.remove()}}},block:{detectMerge:function(O,v){if(!O.tableContentsRanges&&!O.mergeListBookmark){var K=new CKEDITOR.dom.range(v);K.setStartBefore(O.bookmark.startNode),K.setEndAfter(O.bookmark.endNode),O.mergeBlockBookmark=K.createBookmark()}},merge:function(O,v){if(O.mergeBlockBookmark&&!O.purgeTableBookmark){var K=O.mergeBlockBookmark.startNode,k=O.mergeBlockBookmark.endNode,L=new CKEDITOR.dom.elementPath(K,v),B=new CKEDITOR.dom.elementPath(k,v),L=L.block,B=B.block;L&&B&&!L.equals(B)&&g(B,K,k),K.remove(),k.remove()}}},table:function(){function O(k){var L=[],B,F=new CKEDITOR.dom.walker(k),H=k.startPath().contains(K),z=k.endPath().contains(K),T={};return F.guard=function(x,S){if(x.type==CKEDITOR.NODE_ELEMENT){var y="visited_"+(S?"out":"in");if(x.getCustomData(y))return;CKEDITOR.dom.element.setMarker(T,x,y,1)}S&&H&&x.equals(H)?(B=k.clone(),B.setEndAt(H,CKEDITOR.POSITION_BEFORE_END),L.push(B)):!S&&z&&x.equals(z)?(B=k.clone(),B.setStartAt(z,CKEDITOR.POSITION_AFTER_START),L.push(B)):((y=!S)&&(y=x.type==CKEDITOR.NODE_ELEMENT&&x.is(K)&&(!H||v(x,H))&&(!z||v(x,z))),y&&(B=k.clone(),B.selectNodeContents(x),L.push(B)))},F.lastForward(),CKEDITOR.dom.element.clearAllMarkers(T),L}function v(k,L){var B=CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED,F=k.getPosition(L);return F===CKEDITOR.POSITION_IDENTICAL?!1:(F&B)===0}var K={td:1,th:1,caption:1};return{detectPurge:function(k){var L=k.range,B=L.clone();B.enlarge(CKEDITOR.ENLARGE_ELEMENT);var B=new CKEDITOR.dom.walker(B),F=0;if(B.evaluator=function(z){z.type==CKEDITOR.NODE_ELEMENT&&z.is(K)&&++F},B.checkForward(),1<F){var B=L.startPath().contains("table"),H=L.endPath().contains("table");B&&H&&L.checkBoundaryOfElement(B,CKEDITOR.START)&&L.checkBoundaryOfElement(H,CKEDITOR.END)&&(L=k.range.clone(),L.setStartBefore(B),L.setEndAfter(H),k.purgeTableBookmark=L.createBookmark())}},detectRanges:function(k,L){var B=D(L,k.bookmark),F=B.clone(),H,z,T=B.getCommonAncestor();T.is(CKEDITOR.dtd.$tableContent)&&!T.is(K)&&(T=T.getAscendant("table",!0)),z=T,T=new CKEDITOR.dom.elementPath(B.startContainer,z),z=new CKEDITOR.dom.elementPath(B.endContainer,z),T=T.contains("table"),z=z.contains("table"),(T||z)&&(T&&z&&v(T,z)?(k.tableSurroundingRange=F,F.setStartAt(T,CKEDITOR.POSITION_AFTER_END),F.setEndAt(z,CKEDITOR.POSITION_BEFORE_START),F=B.clone(),F.setEndAt(T,CKEDITOR.POSITION_AFTER_END),H=B.clone(),H.setStartAt(z,CKEDITOR.POSITION_BEFORE_START),H=O(F).concat(O(H))):T?z||(k.tableSurroundingRange=F,F.setStartAt(T,CKEDITOR.POSITION_AFTER_END),B.setEndAt(T,CKEDITOR.POSITION_AFTER_END)):(k.tableSurroundingRange=F,F.setEndAt(z,CKEDITOR.POSITION_BEFORE_START),B.setStartAt(z,CKEDITOR.POSITION_AFTER_START)),k.tableContentsRanges=H||O(B))},deleteRanges:function(k){for(var L;L=k.tableContentsRanges.pop();)L.extractContents(),f(L.startContainer)&&L.startContainer.appendBogus();k.tableSurroundingRange&&k.tableSurroundingRange.extractContents()},purge:function(k){if(k.purgeTableBookmark){var B=k.doc,L=k.range.clone(),B=B.createElement("p");B.insertBefore(k.purgeTableBookmark.startNode),L.moveToBookmark(k.purgeTableBookmark),L.deleteContents(),k.range.moveToPosition(B,CKEDITOR.POSITION_AFTER_START)}}}}(),detectExtractMerge:function(O){return!(O.range.startPath().contains(CKEDITOR.dtd.$listItem)&&O.range.endPath().contains(CKEDITOR.dtd.$listItem))},fixUneditableRangePosition:function(O){O.startContainer.getDtd()["#"]||O.moveToClosestEditablePosition(null,!0)},autoParagraph:function(O,v){var K=v.startPath(),k;h(O,K.block,K.blockLimit)&&(k=i(O))&&(k=v.document.createElement(k),k.appendBogus(),v.insertNode(k),v.moveToPosition(k,CKEDITOR.POSITION_AFTER_START))}}}()}(),function(){function e(){var g=this._.fakeSelection,D;g&&(D=this.getSelection(1),D&&D.isHidden()||(g.reset(),g=0)),!(!g&&(g=D||this.getSelection(1),!g||g.getType()==CKEDITOR.SELECTION_NONE))&&(this.fire("selectionCheck",g),D=this.elementPath(),D.compare(this._.selectionPreviousPath)||(CKEDITOR.env.webkit&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=D,this.fire("selectionChange",{selection:g,path:D})))}function c(){C=!0,E||(r.call(this),E=CKEDITOR.tools.setTimeout(r,200,this))}function r(){E=null,C&&(CKEDITOR.tools.setTimeout(e,0,this),C=!1)}function s(g){return!!(d(g)||g.type==CKEDITOR.NODE_ELEMENT&&!g.is(CKEDITOR.dtd.$empty))}function a(g){function D(k,L){return k&&k.type!=CKEDITOR.NODE_TEXT?g.clone()["moveToElementEdit"+(L?"End":"Start")](k):!1}if(!(g.root instanceof CKEDITOR.editable))return!1;var O=g.startContainer,v=g.getPreviousNode(s,null,O),K=g.getNextNode(s,null,O);return!!(D(v)||D(K,1)||!(v||K||O.type==CKEDITOR.NODE_ELEMENT&&O.isBlockBoundary()&&O.getBogus()))}function u(g){return g.getCustomData("cke-fillingChar")}function h(g,D){var O=g&&g.removeCustomData("cke-fillingChar");if(O){if(D!==!1){var v,K=g.getDocument().getSelection().getNative(),k=K&&K.type!="None"&&K.getRangeAt(0);1<O.getLength()&&k&&k.intersectsNode(O.$)&&(v=o(K),k=K.focusNode==O.$&&0<K.focusOffset,K.anchorNode==O.$&&0<K.anchorOffset&&v[0].offset--,k&&v[1].offset--)}O.setText(i(O.getText())),v&&n(g.getDocument().$,v)}}function i(g){return g.replace(/\u200B( )?/g,function(D){return D[1]?" ":""})}function o(g){return[{node:g.anchorNode,offset:g.anchorOffset},{node:g.focusNode,offset:g.focusOffset}]}function n(g,D){var O=g.getSelection(),v=g.createRange();v.setStart(D[0].node,D[0].offset),v.collapse(!0),O.removeAllRanges(),O.addRange(v),O.extend(D[1].node,D[1].offset)}function t(g){var D=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+'">&nbsp;</div>',g.document);g.fire("lockSnapshot"),g.editable().append(D);var O=g.getSelection(1),v=g.createRange(),K=O.root.on("selectionchange",function(k){k.cancel()},null,null,0);v.setStartAt(D,CKEDITOR.POSITION_AFTER_START),v.setEndAt(D,CKEDITOR.POSITION_BEFORE_END),O.selectRanges([v]),K.removeListener(),g.fire("unlockSnapshot"),g._.hiddenSelectionContainer=D}function l(g){var D={37:1,39:1,8:1,46:1};return function(O){var v=O.data.getKeystroke();if(D[v]){var K=g.getSelection().getRanges(),k=K[0];K.length==1&&k.collapsed&&(v=k[38>v?"getPreviousEditableNode":"getNextEditableNode"]())&&v.type==CKEDITOR.NODE_ELEMENT&&v.getAttribute("contenteditable")=="false"&&(g.getSelection().fake(v),O.data.preventDefault(),O.cancel())}}}function f(g){for(var D=0;D<g.length;D++){var O=g[D];if(O.getCommonAncestor().isReadOnly()&&g.splice(D,1),!O.collapsed){if(O.startContainer.isReadOnly())for(var v=O.startContainer,K;v&&!((K=v.type==CKEDITOR.NODE_ELEMENT)&&v.is("body")||!v.isReadOnly());)K&&v.getAttribute("contentEditable")=="false"&&O.setStartAfter(v),v=v.getParent();v=O.startContainer,K=O.endContainer;var k=O.startOffset,L=O.endOffset,B=O.clone();v&&v.type==CKEDITOR.NODE_TEXT&&(k>=v.getLength()?B.setStartAfter(v):B.setStartBefore(v)),K&&K.type==CKEDITOR.NODE_TEXT&&(L?B.setEndAfter(K):B.setEndBefore(K)),v=new CKEDITOR.dom.walker(B),v.evaluator=function(F){if(F.type==CKEDITOR.NODE_ELEMENT&&F.isReadOnly()){var H=O.clone();return O.setEndBefore(F),O.collapsed&&g.splice(D--,1),F.getPosition(B.endContainer)&CKEDITOR.POSITION_CONTAINS||(H.setStartAfter(F),H.collapsed||g.splice(D+1,0,H)),!0}return!1},v.next()}}return g}var E,C,d=CKEDITOR.dom.walker.invisible(1),p=function(){function g(K){return function(k){var L=k.editor.createRange();return L.moveToClosestEditablePosition(k.selected,K)&&k.editor.getSelection().selectRanges([L]),!1}}function D(K){return function(k){var L=k.editor,B=L.createRange(),F;return(F=B.moveToClosestEditablePosition(k.selected,K))||(F=B.moveToClosestEditablePosition(k.selected,!K)),F&&L.getSelection().selectRanges([B]),L.fire("saveSnapshot"),k.selected.remove(),F||(B.moveToElementEditablePosition(L.editable()),L.getSelection().selectRanges([B])),L.fire("saveSnapshot"),!1}}var O=g(),v=g(1);return{37:O,38:O,39:v,40:v,8:D(),46:D(1)}}();CKEDITOR.on("instanceCreated",function(g){function D(){var v=O.getSelection();v&&v.removeAllRanges()}var O=g.editor;O.on("contentDom",function(){function v(){x=new CKEDITOR.dom.selection(O.getSelection()),x.lock()}function K(){L.removeListener("mouseup",K),H.removeListener("mouseup",K);var N=CKEDITOR.document.$.selection,w=N.createRange();N.type!="None"&&w.parentElement().ownerDocument==k.$&&w.select()}var k=O.document,L=CKEDITOR.document,B=O.editable(),F=k.getBody(),H=k.getDocumentElement(),z=B.isInline(),T,x;if(CKEDITOR.env.gecko&&B.attachListener(B,"focus",function(N){N.removeListener(),T!==0&&(N=O.getSelection().getNative())&&N.isCollapsed&&N.anchorNode==B.$&&(N=O.createRange(),N.moveToElementEditStart(B),N.select())},null,null,-2),B.attachListener(B,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){T&&CKEDITOR.env.webkit&&(T=O._.previousActive&&O._.previousActive.equals(k.getActive())),O.unlockSelection(T),T=0},null,null,-1),B.attachListener(B,"mousedown",function(){T=0}),(CKEDITOR.env.ie||z)&&(I?B.attachListener(B,"beforedeactivate",v,null,null,-1):B.attachListener(O,"selectionCheck",v,null,null,-1),B.attachListener(B,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){O.lockSelection(x),T=1},null,null,-1),B.attachListener(B,"mousedown",function(){T=0})),CKEDITOR.env.ie&&!z){var S;B.attachListener(B,"mousedown",function(N){N.data.$.button==2&&((N=O.document.getSelection())&&N.getType()!=CKEDITOR.SELECTION_NONE||(S=O.window.getScrollPosition()))}),B.attachListener(B,"mouseup",function(N){N.data.$.button==2&&S&&(O.document.$.documentElement.scrollLeft=S.x,O.document.$.documentElement.scrollTop=S.y),S=null}),k.$.compatMode!="BackCompat"&&((CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&H.on("mousedown",function(N){function w(P){if(P=P.data.$,b){var $=F.$.createTextRange();try{$.moveToPoint(P.clientX,P.clientY)}catch{}b.setEndPoint(0>A.compareEndPoints("StartToStart",$)?"EndToEnd":"StartToStart",$),b.select()}}function R(){H.removeListener("mousemove",w),L.removeListener("mouseup",R),H.removeListener("mouseup",R),b.select()}if(N=N.data,N.getTarget().is("html")&&N.$.y<H.$.clientHeight&&N.$.x<H.$.clientWidth){var b=F.$.createTextRange();try{b.moveToPoint(N.$.clientX,N.$.clientY)}catch{}var A=b.duplicate();H.on("mousemove",w),L.on("mouseup",R),H.on("mouseup",R)}}),7<CKEDITOR.env.version&&11>CKEDITOR.env.version&&H.on("mousedown",function(N){N.data.getTarget().is("html")&&(L.on("mouseup",K),H.on("mouseup",K))}))}if(B.attachListener(B,"selectionchange",e,O),B.attachListener(B,"keyup",c,O),B.attachListener(B,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){O.forceNextSelectionCheck(),O.selectionChange(1)}),z&&(CKEDITOR.env.webkit||CKEDITOR.env.gecko)){var y;B.attachListener(B,"mousedown",function(){y=1}),B.attachListener(k.getDocumentElement(),"mouseup",function(){y&&c.call(O),y=0})}else B.attachListener(CKEDITOR.env.ie?B:k.getDocumentElement(),"mouseup",c,O);CKEDITOR.env.webkit&&B.attachListener(k,"keydown",function(N){switch(N.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:h(B)}},null,null,-1),B.attachListener(B,"keydown",l(O),null,null,-1)}),O.on("setData",function(){O.unlockSelection(),CKEDITOR.env.webkit&&D()}),O.on("contentDomUnload",function(){O.unlockSelection()}),CKEDITOR.env.ie9Compat&&O.on("beforeDestroy",D,null,null,9),O.on("dataReady",function(){delete O._.fakeSelection,delete O._.hiddenSelectionContainer,O.selectionChange(1)}),O.on("loadSnapshot",function(){var v=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT),K=O.editable().getLast(v);K&&K.hasAttribute("data-cke-hidden-sel")&&(K.remove(),CKEDITOR.env.gecko&&(v=O.editable().getFirst(v))&&v.is("br")&&v.getAttribute("_moz_editor_bogus_node")&&v.remove())},null,null,100),O.on("key",function(v){if(O.mode=="wysiwyg"){var K=O.getSelection();if(K.isFake){var k=p[v.data.keyCode];if(k)return k({editor:O,selected:K.getSelectedElement(),selection:K,keyEvent:v})}}})}),CKEDITOR.on("instanceReady",function(g){function D(){var L=v.editable();if(L&&(L=u(L))){var B=v.document.$.getSelection();B.type=="None"||B.anchorNode!=L.$&&B.focusNode!=L.$||(k=o(B)),K=L.getText(),L.setText(i(K))}}function O(){var L=v.editable();L&&(L=u(L))&&(L.setText(K),k&&(n(v.document.$,k),k=null))}var v=g.editor,K,k;CKEDITOR.env.webkit&&(v.on("selectionChange",function(){var L=v.editable(),B=u(L);B&&(B.getCustomData("ready")?h(L):B.setCustomData("ready",1))},null,null,-1),v.on("beforeSetMode",function(){h(v.editable())},null,null,-1),v.on("beforeUndoImage",D),v.on("afterUndoImage",O),v.on("beforeGetData",D,null,null,0),v.on("getData",O))}),CKEDITOR.editor.prototype.selectionChange=function(g){(g?e:c).call(this)},CKEDITOR.editor.prototype.getSelection=function(g){return!this._.savedSelection&&!this._.fakeSelection||g?(g=this.editable())&&this.mode=="wysiwyg"?new CKEDITOR.dom.selection(g):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.lockSelection=function(g){return g=g||this.getSelection(1),g.getType()!=CKEDITOR.SELECTION_NONE?(!g.isLocked&&g.lock(),this._.savedSelection=g,!0):!1},CKEDITOR.editor.prototype.unlockSelection=function(g){var D=this._.savedSelection;return D?(D.unlock(g),delete this._.savedSelection,!0):!1},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var g=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return g.selectRanges([this]),g},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3;var I=typeof window.getSelection!="function",_=1;CKEDITOR.dom.selection=function(g){if(g instanceof CKEDITOR.dom.selection){var D=g;g=g.root}var O=g instanceof CKEDITOR.dom.element;if(this.rev=D?D.rev:_++,this.document=g instanceof CKEDITOR.dom.document?g:g.getDocument(),this.root=O?g:this.document.getBody(),this.isLocked=0,this._={cache:{}},D)return CKEDITOR.tools.extend(this._.cache,D._.cache),this.isFake=D.isFake,this.isLocked=D.isLocked,this;g=this.getNative();var v,K;if(g)if(g.getRangeAt)v=(K=g.rangeCount&&g.getRangeAt(0))&&new CKEDITOR.dom.node(K.commonAncestorContainer);else{try{K=g.createRange()}catch{}v=K&&CKEDITOR.dom.element.get(K.item&&K.item(0)||K.parentElement())}return(!v||v.type!=CKEDITOR.NODE_ELEMENT&&v.type!=CKEDITOR.NODE_TEXT||!this.root.equals(v)&&!this.root.contains(v))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this};var m={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.dom.selection.prototype={getNative:function(){return this._.cache.nativeSel!==void 0?this._.cache.nativeSel:this._.cache.nativeSel=I?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:I?function(){var g=this._.cache;if(g.type)return g.type;var D=CKEDITOR.SELECTION_NONE;try{var O=this.getNative(),v=O.type;v=="Text"&&(D=CKEDITOR.SELECTION_TEXT),v=="Control"&&(D=CKEDITOR.SELECTION_ELEMENT),O.createRange().parentElement()&&(D=CKEDITOR.SELECTION_TEXT)}catch{}return g.type=D}:function(){var g=this._.cache;if(g.type)return g.type;var D=CKEDITOR.SELECTION_TEXT,O=this.getNative();if(!O||!O.rangeCount)D=CKEDITOR.SELECTION_NONE;else if(O.rangeCount==1){var O=O.getRangeAt(0),v=O.startContainer;v==O.endContainer&&v.nodeType==1&&O.endOffset-O.startOffset==1&&m[v.childNodes[O.startOffset].nodeName.toLowerCase()]&&(D=CKEDITOR.SELECTION_ELEMENT)}return g.type=D},getRanges:function(){var g=I?function(){function D(v){return new CKEDITOR.dom.node(v).getIndex()}var O=function(v,K){v=v.duplicate(),v.collapse(K);var k=v.parentElement();if(!k.hasChildNodes())return{container:k,offset:0};for(var L=k.children,B,F,H=v.duplicate(),z=0,T=L.length-1,x=-1,S,y;z<=T;)if(x=Math.floor((z+T)/2),B=L[x],H.moveToElementText(B),S=H.compareEndPoints("StartToStart",v),0<S)T=x-1;else if(0>S)z=x+1;else return{container:k,offset:D(B)};if(x==-1||x==L.length-1&&0>S){if(H.moveToElementText(k),H.setEndPoint("StartToStart",v),H=H.text.replace(/(\r\n|\r)/g,`
`).length,L=k.childNodes,!H)return B=L[L.length-1],B.nodeType!=CKEDITOR.NODE_TEXT?{container:k,offset:L.length}:{container:B,offset:B.nodeValue.length};for(k=L.length;0<H&&0<k;)F=L[--k],F.nodeType==CKEDITOR.NODE_TEXT&&(y=F,H-=F.nodeValue.length);return{container:y,offset:-H}}if(H.collapse(0<S),H.setEndPoint(0<S?"StartToStart":"EndToStart",v),H=H.text.replace(/(\r\n|\r)/g,`
`).length,!H)return{container:k,offset:D(B)+(0<S?0:1)};for(;0<H;)try{F=B[0<S?"previousSibling":"nextSibling"],F.nodeType==CKEDITOR.NODE_TEXT&&(H-=F.nodeValue.length,y=F),B=F}catch{return{container:k,offset:D(B)}}return{container:y,offset:0<S?-H:y.nodeValue.length+H}};return function(){var v=this.getNative(),K=v&&v.createRange(),k=this.getType();if(!v)return[];if(k==CKEDITOR.SELECTION_TEXT)return v=new CKEDITOR.dom.range(this.root),k=O(K,!0),v.setStart(new CKEDITOR.dom.node(k.container),k.offset),k=O(K),v.setEnd(new CKEDITOR.dom.node(k.container),k.offset),v.endContainer.getPosition(v.startContainer)&CKEDITOR.POSITION_PRECEDING&&v.endOffset<=v.startContainer.getIndex()&&v.collapse(),[v];if(k==CKEDITOR.SELECTION_ELEMENT){for(var k=[],L=0;L<K.length;L++){for(var B=K.item(L),F=B.parentNode,H=0,v=new CKEDITOR.dom.range(this.root);H<F.childNodes.length&&F.childNodes[H]!=B;H++);v.setStart(new CKEDITOR.dom.node(F),H),v.setEnd(new CKEDITOR.dom.node(F),H+1),k.push(v)}return k}return[]}}():function(){var D=[],O,v=this.getNative();if(!v)return D;for(var K=0;K<v.rangeCount;K++){var k=v.getRangeAt(K);O=new CKEDITOR.dom.range(this.root),O.setStart(new CKEDITOR.dom.node(k.startContainer),k.startOffset),O.setEnd(new CKEDITOR.dom.node(k.endContainer),k.endOffset),D.push(O)}return D};return function(D){var O=this._.cache,v=O.ranges;return v||(O.ranges=v=new CKEDITOR.dom.rangeList(g.call(this))),D?f(new CKEDITOR.dom.rangeList(v.slice())):v}}(),getStartElement:function(){var g=this._.cache;if(g.startElement!==void 0)return g.startElement;var D;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var O=this.getRanges()[0];if(O){if(O.collapsed)D=O.startContainer,D.type!=CKEDITOR.NODE_ELEMENT&&(D=D.getParent());else{for(O.optimize();D=O.startContainer,O.startOffset==(D.getChildCount?D.getChildCount():D.getLength())&&!D.isBlockBoundary();)O.setStartAfter(D);if(D=O.startContainer,D.type!=CKEDITOR.NODE_ELEMENT)return D.getParent();if((D=D.getChild(O.startOffset))&&D.type==CKEDITOR.NODE_ELEMENT)for(O=D.getFirst();O&&O.type==CKEDITOR.NODE_ELEMENT;)D=O,O=O.getFirst();else D=O.startContainer}D=D.$}}return g.startElement=D?new CKEDITOR.dom.element(D):null},getSelectedElement:function(){var g=this._.cache;if(g.selectedElement!==void 0)return g.selectedElement;var D=this,O=CKEDITOR.tools.tryThese(function(){return D.getNative().createRange().item(0)},function(){for(var v=D.getRanges()[0].clone(),K,k,L=2;L&&!((K=v.getEnclosedNode())&&K.type==CKEDITOR.NODE_ELEMENT&&m[K.getName()]&&(k=K));L--)v.shrink(CKEDITOR.SHRINK_ELEMENT);return k&&k.$});return g.selectedElement=O?new CKEDITOR.dom.element(O):null},getSelectedText:function(){var g=this._.cache;if(g.selectedText!==void 0)return g.selectedText;var D=this.getNative(),D=I?D.type=="Control"?"":D.createRange().text:D.toString();return g.selectedText=D},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(g){if(this.isLocked){if(g)var D=this.getSelectedElement(),O=!D&&this.getRanges(),v=this.isFake;this.isLocked=0,this.reset(),g&&(g=D||O[0]&&O[0].getCommonAncestor())&&g.getAscendant("body",1)&&(v?this.fake(D):D?this.selectElement(D):this.selectRanges(O))}},reset:function(){this._.cache={},this.isFake=0;var g=this.root.editor;if(g&&g._.fakeSelection)if(this.rev==g._.fakeSelection.rev){delete g._.fakeSelection;var D=g._.hiddenSelectionContainer;if(D){var O=g.checkDirty();g.fire("lockSnapshot"),D.remove(),g.fire("unlockSnapshot"),!O&&g.resetDirty()}delete g._.hiddenSelectionContainer}else CKEDITOR.warn("selection-fake-reset");this.rev=_++},selectElement:function(g){var D=new CKEDITOR.dom.range(this.root);D.setStartBefore(g),D.setEndAfter(g),this.selectRanges([D])},selectRanges:function(g){var D=this.root.editor,D=D&&D._.hiddenSelectionContainer;if(this.reset(),D)for(var D=this.root,O,v=0;v<g.length;++v)O=g[v],O.endContainer.equals(D)&&(O.endOffset=Math.min(O.endOffset,D.getChildCount()));if(g.length)if(this.isLocked){var K=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(g),this.lock(),K&&!K.equals(this.root)&&K.focus()}else{var k;e:{var L,B;if(g.length==1&&!(B=g[0]).collapsed&&(k=B.getEnclosedNode())&&k.type==CKEDITOR.NODE_ELEMENT&&(B=B.clone(),B.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(L=B.getEnclosedNode())&&L.type==CKEDITOR.NODE_ELEMENT&&(k=L),k.getAttribute("contenteditable")=="false"))break e;k=void 0}if(k)this.fake(k);else{if(I){B=CKEDITOR.dom.walker.whitespaces(!0),L=/\ufeff|\u00a0/,D={table:1,tbody:1,tr:1},1<g.length&&(k=g[g.length-1],g[0].setEnd(k.endContainer,k.endOffset)),k=g[0],g=k.collapsed;var F,H,z;if((O=k.getEnclosedNode())&&O.type==CKEDITOR.NODE_ELEMENT&&O.getName()in m&&(!O.is("a")||!O.getText()))try{z=O.$.createControlRange(),z.addElement(O.$),z.select();return}catch{}(k.startContainer.type==CKEDITOR.NODE_ELEMENT&&k.startContainer.getName()in D||k.endContainer.type==CKEDITOR.NODE_ELEMENT&&k.endContainer.getName()in D)&&(k.shrink(CKEDITOR.NODE_ELEMENT,!0),g=k.collapsed),z=k.createBookmark(),D=z.startNode,g||(K=z.endNode),z=k.document.$.body.createTextRange(),z.moveToElementText(D.$),z.moveStart("character",1),K?(L=k.document.$.body.createTextRange(),L.moveToElementText(K.$),z.setEndPoint("EndToEnd",L),z.moveEnd("character",-1)):(F=D.getNext(B),H=D.hasAscendant("pre"),F=!(F&&F.getText&&F.getText().match(L))&&(H||!D.hasPrevious()||D.getPrevious().is&&D.getPrevious().is("br")),H=k.document.createElement("span"),H.setHtml("&#65279;"),H.insertBefore(D),F&&k.document.createText("\uFEFF").insertBefore(D)),k.setStartBefore(D),D.remove(),g?(F?(z.moveStart("character",-1),z.select(),k.document.$.selection.clear()):z.select(),k.moveToPosition(H,CKEDITOR.POSITION_BEFORE_START),H.remove()):(k.setEndBefore(K),K.remove(),z.select())}else{if(K=this.getNative(),!K)return;for(this.removeAllRanges(),z=0;z<g.length;z++){if(z<g.length-1&&(F=g[z],H=g[z+1],L=F.clone(),L.setStart(F.endContainer,F.endOffset),L.setEnd(H.startContainer,H.startOffset),!L.collapsed&&(L.shrink(CKEDITOR.NODE_ELEMENT,!0),k=L.getCommonAncestor(),L=L.getEnclosedNode(),k.isReadOnly()||L&&L.isReadOnly()))){H.setStart(F.startContainer,F.startOffset),g.splice(z--,1);continue}k=g[z],H=this.document.$.createRange(),k.collapsed&&CKEDITOR.env.webkit&&a(k)&&(F=this.root,h(F,!1),L=F.getDocument().createText("​"),F.setCustomData("cke-fillingChar",L),k.insertNode(L),(F=L.getNext())&&!L.getPrevious()&&F.type==CKEDITOR.NODE_ELEMENT&&F.getName()=="br"?(h(this.root),k.moveToPosition(F,CKEDITOR.POSITION_BEFORE_START)):k.moveToPosition(L,CKEDITOR.POSITION_AFTER_END)),H.setStart(k.startContainer.$,k.startOffset);try{H.setEnd(k.endContainer.$,k.endOffset)}catch(T){if(0<=T.toString().indexOf("NS_ERROR_ILLEGAL_VALUE"))k.collapse(1),H.setEnd(k.endContainer.$,k.endOffset);else throw T}K.addRange(H)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(g){var D=this.root.editor;this.reset(),t(D);var O=this._.cache,v=new CKEDITOR.dom.range(this.root);v.setStartBefore(g),v.setEndAfter(g),O.ranges=new CKEDITOR.dom.rangeList(v),O.selectedElement=O.startElement=g,O.type=CKEDITOR.SELECTION_ELEMENT,O.selectedText=O.nativeSel=null,this.isFake=1,this.rev=_++,D._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var g=this.getCommonAncestor();return g&&g.type==CKEDITOR.NODE_TEXT&&(g=g.getParent()),!(!g||!g.data("cke-hidden-sel"))},createBookmarks:function(g){return g=this.getRanges().createBookmarks(g),this.isFake&&(g.isFake=1),g},createBookmarks2:function(g){return g=this.getRanges().createBookmarks2(g),this.isFake&&(g.isFake=1),g},selectBookmarks:function(g){for(var D=[],O,v=0;v<g.length;v++){var K=new CKEDITOR.dom.range(this.root);K.moveToBookmark(g[v]),D.push(K)}return g.isFake&&(O=D[0].getEnclosedNode(),O&&O.type==CKEDITOR.NODE_ELEMENT||(CKEDITOR.warn("selection-not-fake"),g.isFake=0)),g.isFake?this.fake(O):this.selectRanges(D),this},getCommonAncestor:function(){var g=this.getRanges();return g.length?g[0].startContainer.getCommonAncestor(g[g.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var g=this.getNative();try{g&&g[I?"empty":"removeAllRanges"]()}catch{}this.reset()}}}}(),CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function e(T,x){for(var S,y;(T=T.getParent())&&!T.equals(x);)if(T.getAttribute("data-nostyle"))S=T;else if(!y){var N=T.getAttribute("contentEditable");N=="false"?S=T:N=="true"&&(y=1)}return S}function c(T,x,S,y){return(T.getPosition(x)|y)==y&&(!S.childRule||S.childRule(T))}function r(T){var x=T.document;if(T.collapsed)x=I(this,x),T.insertNode(x),T.moveToPosition(x,CKEDITOR.POSITION_BEFORE_END);else{var S=this.element,y=this._.definition,N,w=y.ignoreReadonly,R=w||y.includeReadonly;R==null&&(R=T.root.getCustomData("cke_includeReadonly"));var b=CKEDITOR.dtd[S];b||(N=!0,b=CKEDITOR.dtd.span),T.enlarge(CKEDITOR.ENLARGE_INLINE,1),T.trim();var A=T.createBookmark(),P=A.startNode,$=A.endNode,M=P,U;if(!w){var V=T.getCommonAncestor(),w=e(P,V),V=e($,V);w&&(M=w.getNextSourceNode(!0)),V&&($=V)}for(M.getPosition($)==CKEDITOR.POSITION_FOLLOWING&&(M=0);M;){if(w=!1,M.equals($))M=null,w=!0;else{var W=M.type==CKEDITOR.NODE_ELEMENT?M.getName():null,V=W&&M.getAttribute("contentEditable")=="false",Y=W&&M.getAttribute("data-nostyle");if(W&&M.data("cke-bookmark")){M=M.getNextSourceNode(!0);continue}if(V&&R&&CKEDITOR.dtd.$block[W])for(var ne=M,te=a(ne),Q=void 0,J=te.length,re=0,ne=J&&new CKEDITOR.dom.range(ne.getDocument());re<J;++re){var Q=te[re],q=CKEDITOR.filter.instances[Q.data("cke-filter")];(!q||q.check(this))&&(ne.selectNodeContents(Q),r.call(this,ne))}if(te=W?!b[W]||Y||V&&!R?0:c(M,$,y,H):1,te){if(Q=M.getParent(),te=y,J=S,re=N,!Q||!(Q.getDtd()||CKEDITOR.dtd.span)[J]&&!re||te.parentRule&&!te.parentRule(Q))w=!0;else if(U||W&&CKEDITOR.dtd.$removeEmpty[W]&&(M.getPosition($)|H)!=H||(U=T.clone(),U.setStartBefore(M)),W=M.type,W==CKEDITOR.NODE_TEXT||V||W==CKEDITOR.NODE_ELEMENT&&!M.getChildCount()){for(var W=M,G;(w=!W.getNext(B))&&(G=W.getParent(),b[G.getName()])&&c(G,P,y,z);)W=G;U.setEndAfter(W)}}else w=!0;M=M.getNextSourceNode(Y||V)}if(w&&U&&!U.collapsed){for(var w=I(this,x),V=w.hasAttributes(),Y=U.getCommonAncestor(),W={},te={},Q={},J={},X,j,Z;w&&Y;){if(Y.getName()==S){for(X in y.attributes)!J[X]&&(Z=Y.getAttribute(j))&&(w.getAttribute(X)==Z?te[X]=1:J[X]=1);for(j in y.styles)!Q[j]&&(Z=Y.getStyle(j))&&(w.getStyle(j)==Z?W[j]=1:Q[j]=1)}Y=Y.getParent()}for(X in te)w.removeAttribute(X);for(j in W)w.removeStyle(j);V&&!w.hasAttributes()&&(w=null),w?(U.extractContents().appendTo(w),U.insertNode(w),C.call(this,w),w.mergeSiblings(),CKEDITOR.env.ie||w.$.normalize()):(w=new CKEDITOR.dom.element("span"),U.extractContents().appendTo(w),U.insertNode(w),C.call(this,w),w.remove(!0)),U=null}}T.moveToBookmark(A),T.shrink(CKEDITOR.SHRINK_TEXT),T.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function s(T){function x(){for(var M=new CKEDITOR.dom.elementPath(y.getParent()),U=new CKEDITOR.dom.elementPath(P.getParent()),V=null,W=null,Y=0;Y<M.elements.length;Y++){var te=M.elements[Y];if(te==M.block||te==M.blockLimit)break;$.checkElementRemovable(te,!0)&&(V=te)}for(Y=0;Y<U.elements.length&&(te=U.elements[Y],!(te==U.block||te==U.blockLimit));Y++)$.checkElementRemovable(te,!0)&&(W=te);W&&P.breakParent(W),V&&y.breakParent(V)}T.enlarge(CKEDITOR.ENLARGE_INLINE,1);var S=T.createBookmark(),y=S.startNode;if(T.collapsed){for(var N=new CKEDITOR.dom.elementPath(y.getParent(),T.root),w,R=0,b;R<N.elements.length&&(b=N.elements[R])&&b!=N.block&&b!=N.blockLimit;R++)if(this.checkElementRemovable(b)){var A;T.collapsed&&(T.checkBoundaryOfElement(b,CKEDITOR.END)||(A=T.checkBoundaryOfElement(b,CKEDITOR.START)))?(w=b,w.match=A?"start":"end"):(b.mergeSiblings(),b.is(this.element)?E.call(this,b):d(b,g(this)[b.getName()]))}if(w){for(b=y,R=0;A=N.elements[R],!A.equals(w);R++){if(A.match)continue;A=A.clone(),A.append(b),b=A}b[w.match=="start"?"insertBefore":"insertAfter"](w)}}else{var P=S.endNode,$=this;for(x(),N=y;!N.equals(P);)w=N.getNextSourceNode(),N.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(N)&&(N.getName()==this.element?E.call(this,N):d(N,g(this)[N.getName()]),w.type==CKEDITOR.NODE_ELEMENT&&w.contains(y)&&(x(),w=y.getNext())),N=w}T.moveToBookmark(S),T.shrink(CKEDITOR.NODE_ELEMENT,!0)}function a(T){var x=[];return T.forEach(function(S){if(S.getAttribute("contenteditable")=="true")return x.push(S),!1},CKEDITOR.NODE_ELEMENT,!0),x}function u(T){var x=T.getEnclosedNode()||T.getCommonAncestor(!1,!0);(T=new CKEDITOR.dom.elementPath(x,T.root).contains(this.element,1))&&!T.isReadOnly()&&_(T,this)}function h(T){var x=T.getCommonAncestor(!0,!0);if(T=new CKEDITOR.dom.elementPath(x,T.root).contains(this.element,1)){var x=this._.definition,S=x.attributes;if(S)for(var y in S)T.removeAttribute(y,S[y]);if(x.styles)for(var N in x.styles)x.styles.hasOwnProperty(N)&&T.removeStyle(N)}}function i(T){var x=T.createBookmark(!0),S=T.createIterator();S.enforceRealBlocks=!0,this._.enterMode&&(S.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);for(var y,N=T.document,w;y=S.getNextParagraph();)!y.isReadOnly()&&(!S.activeFilter||S.activeFilter.check(this))&&(w=I(this,N,y),n(y,w));T.moveToBookmark(x)}function o(T){var x=T.createBookmark(1),S=T.createIterator();S.enforceRealBlocks=!0,S.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var y,N;y=S.getNextParagraph();)this.checkElementRemovable(y)&&(y.is("pre")?((N=this._.enterMode==CKEDITOR.ENTER_BR?null:T.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&y.copyAttributes(N),n(y,N)):E.call(this,y));T.moveToBookmark(x)}function n(T,x){var S=!x;S&&(x=T.getDocument().createElement("div"),T.copyAttributes(x));var y=x&&x.is("pre"),N=T.is("pre"),w=!y&&N;if(y&&!N){if(N=x,(w=T.getBogus())&&w.remove(),w=T.getHtml(),w=l(w,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,""),w=w.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1"),w=w.replace(/([ \t\n\r]+|&nbsp;)/g," "),w=w.replace(/<br\b[^>]*>/gi,`
`),CKEDITOR.env.ie){var R=T.getDocument().createElement("div");R.append(N),N.$.outerHTML="<pre>"+w+"</pre>",N.copyAttributes(R.getFirst()),N=R.getFirst().remove()}else N.setHtml(w);x=N}else w?x=f(S?[T.getHtml()]:t(T),x):T.moveChildren(x);if(x.replace(T),y){var S=x,b;(b=S.getPrevious(F))&&b.type==CKEDITOR.NODE_ELEMENT&&b.is("pre")&&(y=l(b.getHtml(),/\n$/,"")+`

`+l(S.getHtml(),/^\n/,""),CKEDITOR.env.ie?S.$.outerHTML="<pre>"+y+"</pre>":S.setHtml(y),b.remove())}else S&&p(x)}function t(T){var x=[];return l(T.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(S,y,N){return y+"</pre>"+N+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(S,y){x.push(y)}),x}function l(T,x,S){var y="",N="";return T=T.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(w,R,b){return R&&(y=R),b&&(N=b),""}),y+T.replace(x,S)+N}function f(T,x){var S;1<T.length&&(S=new CKEDITOR.dom.documentFragment(x.getDocument()));for(var y=0;y<T.length;y++){var N=T[y],N=N.replace(/(\r\n|\r)/g,`
`),N=l(N,/^[ \t]*\n/,""),N=l(N,/\n$/,""),N=l(N,/^[ \t]+|[ \t]+$/g,function(R,b){return R.length==1?"&nbsp;":b?" "+CKEDITOR.tools.repeat("&nbsp;",R.length-1):CKEDITOR.tools.repeat("&nbsp;",R.length-1)+" "}),N=N.replace(/\n/g,"<br>"),N=N.replace(/[ \t]{2,}/g,function(R){return CKEDITOR.tools.repeat("&nbsp;",R.length-1)+" "});if(S){var w=x.clone();w.setHtml(N),S.append(w)}else x.setHtml(N)}return S||x}function E(T,x){var y=this._.definition,S=y.attributes,y=y.styles,N=g(this)[T.getName()],w=CKEDITOR.tools.isEmpty(S)&&CKEDITOR.tools.isEmpty(y),R;for(R in S)(R!="class"&&!this._.definition.fullMatch||T.getAttribute(R)==D(R,S[R]))&&(x&&R.slice(0,5)=="data-"||(w=T.hasAttribute(R),T.removeAttribute(R)));for(var b in y)this._.definition.fullMatch&&T.getStyle(b)!=D(b,y[b],!0)||(w=w||!!T.getStyle(b),T.removeStyle(b));d(T,N,v[T.getName()]),w&&(this._.definition.alwaysRemoveElement?p(T,1):!CKEDITOR.dtd.$block[T.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!T.hasAttributes()?p(T):T.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))}function C(T){for(var x=g(this),S=T.getElementsByTag(this.element),y,N=S.count();0<=--N;)y=S.getItem(N),y.isReadOnly()||E.call(this,y,!0);for(var w in x)if(w!=this.element)for(S=T.getElementsByTag(w),N=S.count()-1;0<=N;N--)y=S.getItem(N),y.isReadOnly()||d(y,x[w])}function d(T,x,S){if(x=x&&x.attributes)for(var y=0;y<x.length;y++){var N=x[y][0],w;if(w=T.getAttribute(N)){var R=x[y][1];(R===null||R.test&&R.test(w)||typeof R=="string"&&w==R)&&T.removeAttribute(N)}}S||p(T)}function p(T,x){if(!T.hasAttributes()||x)if(CKEDITOR.dtd.$block[T.getName()]){var S=T.getPrevious(F),y=T.getNext(F);!S||S.type!=CKEDITOR.NODE_TEXT&&S.isBlockBoundary({br:1})||T.append("br",1),!y||y.type!=CKEDITOR.NODE_TEXT&&y.isBlockBoundary({br:1})||T.append("br"),T.remove(!0)}else S=T.getFirst(),y=T.getLast(),T.remove(!0),S&&(S.type==CKEDITOR.NODE_ELEMENT&&S.mergeSiblings(),y&&!S.equals(y)&&y.type==CKEDITOR.NODE_ELEMENT&&y.mergeSiblings())}function I(T,x,S){var y;return y=T.element,y=="*"&&(y="span"),y=new CKEDITOR.dom.element(y,x),S&&S.copyAttributes(y),y=_(y,T),x.getCustomData("doc_processing_style")&&y.hasAttribute("id")?y.removeAttribute("id"):x.setCustomData("doc_processing_style",1),y}function _(T,x){var y=x._.definition,S=y.attributes,y=CKEDITOR.style.getStyleText(y);if(S)for(var N in S)T.setAttribute(N,S[N]);return y&&T.setAttribute("style",y),T}function m(T,x){for(var S in T)T[S]=T[S].replace(L,function(y,N){return x[N]})}function g(T){if(T._.overrides)return T._.overrides;var x=T._.overrides={},S=T._.definition.overrides;if(S){CKEDITOR.tools.isArray(S)||(S=[S]);for(var y=0;y<S.length;y++){var N=S[y],w,R;if(typeof N=="string"?w=N.toLowerCase():(w=N.element?N.element.toLowerCase():T.element,R=N.attributes),N=x[w]||(x[w]={}),R){var N=N.attributes=N.attributes||[],b;for(b in R)N.push([b.toLowerCase(),R[b]])}}}return x}function D(T,x,S){var y=new CKEDITOR.dom.element("span");return y[S?"setStyle":"setAttribute"](T,x),y[S?"getStyle":"getAttribute"](T)}function O(T,x,S){var y=T.document,N=T.getRanges();x=x?this.removeFromRange:this.applyToRange;for(var w,R=N.createIterator();w=R.getNextRange();)x.call(this,w,S);T.selectRanges(N),y.removeCustomData("doc_processing_style")}var v={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},K={a:1,blockquote:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},k=/\s*(?:;\s*|$)/,L=/#\((.+?)\)/g,B=CKEDITOR.dom.walker.bookmark(0,1),F=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(T,x){if(typeof T.type=="string")return new CKEDITOR.style.customHandlers[T.type](T);var S=T.attributes;S&&S.style&&(T.styles=CKEDITOR.tools.extend({},T.styles,CKEDITOR.tools.parseCssText(S.style)),delete S.style),x&&(T=CKEDITOR.tools.clone(T),m(T.attributes,x),m(T.styles,x)),S=this.element=T.element?typeof T.element=="string"?T.element.toLowerCase():T.element:"*",this.type=T.type||(v[S]?CKEDITOR.STYLE_BLOCK:K[S]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),typeof this.element=="object"&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:T}},CKEDITOR.style.prototype={apply:function(T){if(T instanceof CKEDITOR.dom.document)return O.call(this,T.getSelection());if(this.checkApplicable(T.elementPath(),T)){var x=this._.enterMode;x||(this._.enterMode=T.activeEnterMode),O.call(this,T.getSelection(),0,T),this._.enterMode=x}},remove:function(T){if(T instanceof CKEDITOR.dom.document)return O.call(this,T.getSelection(),1);if(this.checkApplicable(T.elementPath(),T)){var x=this._.enterMode;x||(this._.enterMode=T.activeEnterMode),O.call(this,T.getSelection(),1,T),this._.enterMode=x}},applyToRange:function(T){return this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?r:this.type==CKEDITOR.STYLE_BLOCK?i:this.type==CKEDITOR.STYLE_OBJECT?u:null,this.applyToRange(T)},removeFromRange:function(T){return this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?s:this.type==CKEDITOR.STYLE_BLOCK?o:this.type==CKEDITOR.STYLE_OBJECT?h:null,this.removeFromRange(T)},applyToObject:function(T){_(T,this)},checkActive:function(T,x){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(T.block||T.blockLimit,!0,x);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var S=T.elements,y=0,N;y<S.length;y++)if(N=S[y],this.type!=CKEDITOR.STYLE_INLINE||N!=T.block&&N!=T.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var w=N.getName();if(!(typeof this.element=="string"?w==this.element:w in this.element))continue}if(this.checkElementRemovable(N,!0,x))return!0}}return!1},checkApplicable:function(T,x,S){if(x&&x instanceof CKEDITOR.filter&&(S=x),S&&!S.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!T.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!T.blockLimit.getDtd()[this.element]}return!0},checkElementMatch:function(T,x){var S=this._.definition;if(!T||!S.ignoreReadonly&&T.isReadOnly())return!1;var y=T.getName();if(typeof this.element=="string"?y==this.element:y in this.element){if(!x&&!T.hasAttributes())return!0;if(y=S._AC)S=y;else{var y={},N=0,w=S.attributes;if(w)for(var R in w)N++,y[R]=w[R];(R=CKEDITOR.style.getStyleText(S))&&(y.style||N++,y.style=R),y._length=N,S=S._AC=y}if(S._length){for(var b in S)if(b!="_length"){if(N=T.getAttribute(b)||"",b=="style")e:{y=S[b],typeof y=="string"&&(y=CKEDITOR.tools.parseCssText(y)),typeof N=="string"&&(N=CKEDITOR.tools.parseCssText(N,!0)),R=void 0;for(R in y)if(!(R in N)||N[R]!=y[R]&&y[R]!="inherit"&&N[R]!="inherit"){y=!1;break e}y=!0}else y=S[b]==N;if(y){if(!x)return!0}else if(x)return!1}if(x)return!0}else return!0}return!1},checkElementRemovable:function(T,x,S){if(this.checkElementMatch(T,x,S))return!0;if(x=g(this)[T.getName()]){var y;if(!(x=x.attributes))return!0;for(S=0;S<x.length;S++)if(y=x[S][0],y=T.getAttribute(y)){var N=x[S][1];if(N===null)return!0;if(typeof N=="string"){if(y==N)return!0}else if(N.test(y))return!0}}return!1},buildPreview:function(T){var x=this._.definition,y=[],S=x.element;S=="bdo"&&(S="span");var y=["<",S],N=x.attributes;if(N)for(var w in N)y.push(" ",w,'="',N[w],'"');return(N=CKEDITOR.style.getStyleText(x))&&y.push(' style="',N,'"'),y.push(">",T||x.name,"</",S,">"),y.join("")},getDefinition:function(){return this._.definition}},CKEDITOR.style.getStyleText=function(T){var x=T._ST;if(x)return x;var x=T.styles,S=T.attributes&&T.attributes.style||"",y="";S.length&&(S=S.replace(k,";"));for(var N in x){var w=x[N],R=(N+":"+w).replace(k,";");w=="inherit"?y+=R:S+=R}return S.length&&(S=CKEDITOR.tools.normalizeCssText(S,!0)),T._ST=S+y},CKEDITOR.style.customHandlers={},CKEDITOR.style.addCustomHandler=function(T){var x=function(S){this._={definition:S},this.setup&&this.setup(S)};return x.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.style.prototype),{assignedTo:CKEDITOR.STYLE_OBJECT},T,!0),this.customHandlers[T.type]=x};var H=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,z=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(e,c){this.requiredContent=this.allowedContent=this.style=e,CKEDITOR.tools.extend(this,c,!0)},CKEDITOR.styleCommand.prototype.exec=function(e){e.focus(),this.state==CKEDITOR.TRISTATE_OFF?e.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&e.removeStyle(this.style)},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(e,c,r){CKEDITOR.stylesSet.addExternal(e,c,""),CKEDITOR.stylesSet.load(e,r)},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{attachStyleStateChange:function(e,c){var r=this._.styleStateChangeCallbacks;r||(r=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(s){for(var a=0;a<r.length;a++){var u=r[a],h=u.style.checkActive(s.data.path,this)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;u.fn.call(this,h)}})),r.push({style:e,fn:c})},applyStyle:function(e){e.apply(this)},removeStyle:function(e){e.remove(this)},getStylesSet:function(e){if(this._.stylesDefinitions)e(this._.stylesDefinitions);else{var c=this,r=c.config.stylesCombo_stylesSet||c.config.stylesSet;if(r===!1)e(null);else if(r instanceof Array)c._.stylesDefinitions=r,e(r);else{r||(r="default");var r=r.split(":"),s=r[0];CKEDITOR.stylesSet.addExternal(s,r[1]?r.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(s,function(u){c._.stylesDefinitions=u[s],e(c._.stylesDefinitions)})}}}}),CKEDITOR.dom.comment=function(e,c){typeof e=="string"&&(e=(c?c.$:document).createComment(e)),CKEDITOR.dom.domObject.call(this,e)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"<!--"+this.$.nodeValue+"-->"}}),function(){var e={},c={},r;for(r in CKEDITOR.dtd.$blockLimit)r in CKEDITOR.dtd.$list||(e[r]=1);for(r in CKEDITOR.dtd.$block)r in CKEDITOR.dtd.$blockLimit||r in CKEDITOR.dtd.$empty||(c[r]=1);CKEDITOR.dom.elementPath=function(s,a){var u=null,h=null,i=[],o=s,n;a=a||s.getDocument().getBody();do if(o.type==CKEDITOR.NODE_ELEMENT){if(i.push(o),!this.lastElement&&(this.lastElement=o,o.is(CKEDITOR.dtd.$object)||o.getAttribute("contenteditable")=="false"))continue;if(o.equals(a))break;if(!h&&(n=o.getName(),o.getAttribute("contenteditable")=="true"?h=o:!u&&c[n]&&(u=o),e[n])){if(n=!u&&n=="div"){e:{n=o.getChildren();for(var t=0,l=n.count();t<l;t++){var f=n.getItem(t);if(f.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[f.getName()]){n=!0;break e}}n=!1}n=!n}n?u=o:h=o}}while(o=o.getParent());h||(h=a),this.block=u,this.blockLimit=h,this.root=a,this.elements=i}}(),CKEDITOR.dom.elementPath.prototype={compare:function(e){var c=this.elements;if(e=e&&e.elements,!e||c.length!=e.length)return!1;for(var r=0;r<c.length;r++)if(!c[r].equals(e[r]))return!1;return!0},contains:function(e,c,r){var s;typeof e=="string"&&(s=function(h){return h.getName()==e}),e instanceof CKEDITOR.dom.element?s=function(h){return h.equals(e)}:CKEDITOR.tools.isArray(e)?s=function(h){return-1<CKEDITOR.tools.indexOf(e,h.getName())}:typeof e=="function"?s=e:typeof e=="object"&&(s=function(h){return h.getName()in e});var a=this.elements,u=a.length;for(c&&u--,r&&(a=Array.prototype.slice.call(a,0),a.reverse()),c=0;c<u;c++)if(s(a[c]))return a[c];return null},isContextFor:function(e){var c;return e in CKEDITOR.dtd.$block?(c=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!c.getDtd()[e]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(e,c){typeof e=="string"&&(e=(c?c.$:document).createTextNode(e)),this.$=e},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(e){this.$.nodeValue=e},split:function(e){var c=this.$.parentNode,r=c.childNodes.length,s=this.getLength(),a=this.getDocument(),u=new CKEDITOR.dom.text(this.$.splitText(e),a);return c.childNodes.length==r&&(e>=s?(u=a.createText(""),u.insertAfter(this)):(e=a.createText(""),e.insertAfter(u),e.remove())),u},substring:function(e,c){return typeof c!="number"?this.$.nodeValue.substr(e):this.$.nodeValue.substring(e,c)}}),function(){function e(r,s,a){var u=r.serializable,h=s[a?"endContainer":"startContainer"],i=a?"endOffset":"startOffset",o=u?s.document.getById(r.startNode):r.startNode;return r=u?s.document.getById(r.endNode):r.endNode,h.equals(o.getPrevious())?(s.startOffset=s.startOffset-h.getLength()-r.getPrevious().getLength(),h=r.getNext()):h.equals(r.getPrevious())&&(s.startOffset-=h.getLength(),h=r.getNext()),h.equals(o.getParent())&&s[i]++,h.equals(r.getParent())&&s[i]++,s[a?"endContainer":"startContainer"]=h,s}CKEDITOR.dom.rangeList=function(r){return r instanceof CKEDITOR.dom.rangeList?r:(r?r instanceof CKEDITOR.dom.range&&(r=[r]):r=[],CKEDITOR.tools.extend(r,c))};var c={createIterator:function(){var r=this,s=CKEDITOR.dom.walker.bookmark(),a=[],u;return{getNextRange:function(h){u=u===void 0?0:u+1;var i=r[u];if(i&&1<r.length){if(!u)for(var o=r.length-1;0<=o;o--)a.unshift(r[o].createBookmark(!0));if(h)for(var n=0;r[u+n+1];){var t=i.document;for(h=0,o=t.getById(a[n].endNode),t=t.getById(a[n+1].startNode);;){if(o=o.getNextSourceNode(!1),t.equals(o))h=1;else if(s(o)||o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary())continue;break}if(!h)break;n++}for(i.moveToBookmark(a.shift());n--;)o=r[++u],o.moveToBookmark(a.shift()),i.setEnd(o.endContainer,o.endOffset)}return i}}},createBookmarks:function(r){for(var s=[],a,u=0;u<this.length;u++){s.push(a=this[u].createBookmark(r,!0));for(var h=u+1;h<this.length;h++)this[h]=e(a,this[h]),this[h]=e(a,this[h],!0)}return s},createBookmarks2:function(r){for(var s=[],a=0;a<this.length;a++)s.push(this[a].createBookmark2(r));return s},moveToBookmarks:function(r){for(var s=0;s<this.length;s++)this[s].moveToBookmark(r[s])}}}(),function(){function e(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function c(n){var t=CKEDITOR.skin["ua_"+n],l=CKEDITOR.env;if(t){for(var t=t.split(",").sort(function(d,p){return d>p?-1:1}),f=0,E;f<t.length;f++)if(E=t[f],l.ie&&(E.replace(/^ie/,"")==l.version||l.quirks&&E=="iequirks")&&(E="ie"),l[E]){n+="_"+t[f];break}}return CKEDITOR.getUrl(e()+n+".css")}function r(n,t){u[n]||(CKEDITOR.document.appendStyleSheet(c(n)),u[n]=1),t&&t()}function s(n){var t=n.getById(h);return t||(t=n.getHead().append("style"),t.setAttribute("id",h),t.setAttribute("type","text/css")),t}function a(n,t,l){var f,E,C;if(CKEDITOR.env.webkit)for(t=t.split("}").slice(0,-1),E=0;E<t.length;E++)t[E]=t[E].split("{");for(var d=0;d<n.length;d++)if(CKEDITOR.env.webkit)for(E=0;E<t.length;E++){for(C=t[E][1],f=0;f<l.length;f++)C=C.replace(l[f][0],l[f][1]);n[d].$.sheet.addRule(t[E][0],C)}else{for(C=t,f=0;f<l.length;f++)C=C.replace(l[f][0],l[f][1]);CKEDITOR.env.ie&&11>CKEDITOR.env.version?n[d].$.styleSheet.cssText+=C:n[d].$.innerHTML+=C}}var u={};CKEDITOR.skin={path:e,loadPart:function(n,t){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e()+"skin.js"),function(){r(n,t)}):r(n,t)},getPath:function(n){return CKEDITOR.getUrl(c(n))},icons:{},addIcon:function(n,t,l,f){n=n.toLowerCase(),this.icons[n]||(this.icons[n]={path:t,offset:l||0,bgsize:f||"16px"})},getIconStyle:function(n,t,l,f,E){var C;return n&&(n=n.toLowerCase(),t&&(C=this.icons[n+"-rtl"]),C||(C=this.icons[n])),n=l||C&&C.path||"",f=f||C&&C.offset,E=E||C&&C.bgsize||"16px",n&&"background-image:url("+CKEDITOR.getUrl(n)+");background-position:0 "+f+"px;background-size:"+E+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(n){var t=s(CKEDITOR.document);return(this.setUiColor=function(l){this.uiColor=l;var f=CKEDITOR.skin.chameleon,E="",C="";typeof f=="function"&&(E=f(this,"editor"),C=f(this,"panel")),l=[[o,l]],a([t],E,l),a(i,C,l)}).call(this,n)}});var h="cke_ui_color",i=[],o=/\$color/g;CKEDITOR.on("instanceLoaded",function(n){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var t=n.editor;n=function(l){if(l=(l.data[0]||l.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument(),!l.getById("cke_ui_color")){l=s(l),i.push(l);var f=t.getUiColor();f&&a([l],CKEDITOR.skin.chameleon(t,"panel"),[[o,f]])}},t.on("panelShow",n),t.on("menuShow",n),t.config.uiColor&&t.setUiColor(t.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var e=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);e.appendTo(CKEDITOR.document.getHead());try{var c=e.getComputedStyle("border-top-color"),r=e.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!c||c!=r)}catch{CKEDITOR.env.hc=!1}e.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass+=" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),e=CKEDITOR._.pending)for(delete CKEDITOR._.pending,c=0;c<e.length;c++)CKEDITOR.editor.prototype.constructor.apply(e[c][0],e[c][1]),CKEDITOR.add(e[c][0])}(),CKEDITOR.skin.name="bootstrapck",CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8,opera",CKEDITOR.skin.chameleon=function(){var e=function(){return function(s,a){for(var u=s.match(/[^#]./g),h=0;3>h;h++){var i=u,o=h,n;n=parseInt(u[h],16),n=("0"+(0>a?0|n*(1+a):0|n+(255-n)*a).toString(16)).slice(-2),i[o]=n}return"#"+u.join("")}}(),c=function(){var s=new CKEDITOR.template("background:#{to};background-image:-webkit-gradient(linear,lefttop,leftbottom,from({from}),to({to}));background-image:-moz-linear-gradient(top,{from},{to});background-image:-webkit-linear-gradient(top,{from},{to});background-image:-o-linear-gradient(top,{from},{to});background-image:-ms-linear-gradient(top,{from},{to});background-image:linear-gradient(top,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr='{from}',endColorstr='{to}');");return function(a,u){return s.output({from:a,to:u})}}(),r={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};return function(s,a){var u=s.uiColor,u={id:"."+s.id,defaultBorder:e(u,-.1),defaultGradient:c(e(u,.9),u),lightGradient:c(e(u,1),e(u,.7)),mediumGradient:c(e(u,.8),e(u,.5)),ckeButtonOn:c(e(u,.6),e(u,.7)),ckeResizer:e(u,-.4),ckeToolbarSeparator:e(u,.5),ckeColorauto:e(u,.8),dialogBody:e(u,.7),dialogTabSelected:c("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:e(u,-.6),elementsPathBg:u,menubuttonIcon:e(u,.5),menubuttonIconHover:e(u,.3)};return r[a].output(u).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var e=function(o){this._||(this._={}),this._.default=this._.initValue=o.default||"",this._.required=o.required||!1;for(var n=[this._],t=1;t<arguments.length;t++)n.push(arguments[t]);return n.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,n),this._},c={build:function(o,n,t){return new CKEDITOR.ui.dialog.textInput(o,n,t)}},r={build:function(o,n,t){return new CKEDITOR.ui.dialog[n.type](o,n,t)}},s={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(o){this.setValue(this.getInitValue(),o)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._.default},getInitValue:function(){return this._.initValue}},a=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(o,n){this._.domOnChangeRegistered||(o.on("load",function(){this.getInputElement().on("change",function(){o.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",n)}},!0),u=/^on([A-Z]\w+)/,h=function(o){for(var n in o)(u.test(n)||n=="title"||n=="type")&&delete o[n];return o},i=function(o){o=o.data.getKeystroke(),o==CKEDITOR.SHIFT+CKEDITOR.ALT+36?this.setDirectionMarker("ltr"):o==CKEDITOR.SHIFT+CKEDITOR.ALT+35&&this.setDirectionMarker("rtl")};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(o,n,t,l){if(!(4>arguments.length)){var f=e.call(this,n);f.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[];var E={role:n.role||"presentation"};n.includeLabel&&(E["aria-labelledby"]=f.labelId),CKEDITOR.ui.dialog.uiElement.call(this,o,n,t,"div",null,E,function(){var C=[],d=n.required?" cke_required":"";return n.labelLayout!="horizontal"?C.push('<label class="cke_dialog_ui_labeled_label'+d+'" ',' id="'+f.labelId+'"',f.inputId?' for="'+f.inputId+'"':"",(n.labelStyle?' style="'+n.labelStyle+'"':"")+">",n.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',n.controlStyle?' style="'+n.controlStyle+'"':"",' role="presentation">',l.call(this,o,n),"</div>"):(d={type:"hbox",widths:n.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+d+'" id="'+f.labelId+'" for="'+f.inputId+'"'+(n.labelStyle?' style="'+n.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(n.label)+"</label>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(n.controlStyle?' style="'+n.controlStyle+'"':"")+">"+l.call(this,o,n)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(o,d,C)),C.join("")})}},textInput:function(o,n,t){if(!(3>arguments.length)){e.call(this,n);var l=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",f={class:"cke_dialog_ui_input_"+n.type,id:l,type:n.type};n.validate&&(this.validate=n.validate),n.maxLength&&(f.maxlength=n.maxLength),n.size&&(f.size=n.size),n.inputStyle&&(f.style=n.inputStyle);var E=this,C=!1;o.on("load",function(){E.getInputElement().on("keydown",function(d){d.data.getKeystroke()==13&&(C=!0)}),E.getInputElement().on("keyup",function(d){d.data.getKeystroke()==13&&C&&(o.getButton("ok")&&setTimeout(function(){o.getButton("ok").click()},0),C=!1),E.bidi&&i.call(E,d)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,o,n,t,function(){var d=['<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'];n.width&&d.push('style="width:'+n.width+'" '),d.push("><input "),f["aria-labelledby"]=this._.labelId,this._.required&&(f["aria-required"]=this._.required);for(var p in f)d.push(p+'="'+f[p]+'" ');return d.push(" /></div>"),d.join("")})}},textarea:function(o,n,t){if(!(3>arguments.length)){e.call(this,n);var l=this,f=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",E={};n.validate&&(this.validate=n.validate),E.rows=n.rows||5,E.cols=n.cols||20,E.class="cke_dialog_ui_input_textarea "+(n.class||""),typeof n.inputStyle<"u"&&(E.style=n.inputStyle),n.dir&&(E.dir=n.dir),l.bidi&&o.on("load",function(){l.getInputElement().on("keyup",i)},l),CKEDITOR.ui.dialog.labeledElement.call(this,o,n,t,function(){E["aria-labelledby"]=this._.labelId,this._.required&&(E["aria-required"]=this._.required);var C=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',f,'" '],d;for(d in E)C.push(d+'="'+CKEDITOR.tools.htmlEncode(E[d])+'" ');return C.push(">",CKEDITOR.tools.htmlEncode(l._.default),"</textarea></div>"),C.join("")})}},checkbox:function(o,n,t){if(!(3>arguments.length)){var l=e.call(this,n,{default:!!n.default});n.validate&&(this.validate=n.validate),CKEDITOR.ui.dialog.uiElement.call(this,o,n,t,"span",null,null,function(){var f=CKEDITOR.tools.extend({},n,{id:n.id?n.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),E=[],C=CKEDITOR.tools.getNextId()+"_label",d={class:"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":C};return h(f),n.default&&(d.checked="checked"),typeof f.inputStyle<"u"&&(f.style=f.inputStyle),l.checkbox=new CKEDITOR.ui.dialog.uiElement(o,f,E,"input",null,d),E.push(' <label id="',C,'" for="',d.id,'"'+(n.labelStyle?' style="'+n.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(n.label),"</label>"),E.join("")})}},radio:function(o,n,t){if(!(3>arguments.length)){e.call(this,n),this._.default||(this._.default=this._.initValue=n.items[0][1]),n.validate&&(this.validate=n.validate);var l=[],f=this;n.role="radiogroup",n.includeLabel=!0,CKEDITOR.ui.dialog.labeledElement.call(this,o,n,t,function(){for(var E=[],C=[],d=(n.id?n.id:CKEDITOR.tools.getNextId())+"_radio",p=0;p<n.items.length;p++){var I=n.items[p],D=I[2]!==void 0?I[2]:I[0],_=I[1]!==void 0?I[1]:I[0],g=CKEDITOR.tools.getNextId()+"_radio_input",m=g+"_label",g=CKEDITOR.tools.extend({},n,{id:g,title:null,type:null},!0),D=CKEDITOR.tools.extend({},g,{title:D},!0),O={type:"radio",class:"cke_dialog_ui_radio_input",name:d,value:_,"aria-labelledby":m},v=[];f._.default==_&&(O.checked="checked"),h(g),h(D),typeof g.inputStyle<"u"&&(g.style=g.inputStyle),g.keyboardFocusable=!0,l.push(new CKEDITOR.ui.dialog.uiElement(o,g,v,"input",null,O)),v.push(" "),new CKEDITOR.ui.dialog.uiElement(o,D,v,"label",null,{id:m,for:O.id},I[0]),E.push(v.join(""))}return new CKEDITOR.ui.dialog.hbox(o,l,E,C),C.join("")}),this._.children=l}},button:function(o,n,t){if(arguments.length){typeof n=="function"&&(n=n(o.getParentEditor())),e.call(this,n,{disabled:n.disabled||!1}),CKEDITOR.event.implementOn(this);var l=this;o.on("load",function(){var C=this.getElement();(function(){C.on("click",function(d){l.click(),d.data.preventDefault()}),C.on("keydown",function(d){d.data.getKeystroke()in{32:1}&&(l.click(),d.data.preventDefault())})})(),C.unselectable()},this);var f=CKEDITOR.tools.extend({},n);delete f.style;var E=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,o,f,t,"a",null,{style:n.style,href:"javascript:void(0)",title:n.label,hidefocus:"true",class:n.class,role:"button","aria-labelledby":E},'<span id="'+E+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(n.label)+"</span>")}},select:function(o,n,t){if(!(3>arguments.length)){var l=e.call(this,n);n.validate&&(this.validate=n.validate),l.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,o,n,t,function(){var f=CKEDITOR.tools.extend({},n,{id:n.id?n.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),E=[],C=[],d={id:l.inputId,class:"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};E.push('<div class="cke_dialog_ui_input_',n.type,'" role="presentation"'),n.width&&E.push('style="width:'+n.width+'" '),E.push(">"),n.size!==void 0&&(d.size=n.size),n.multiple!==void 0&&(d.multiple=n.multiple),h(f);for(var p=0,I;p<n.items.length&&(I=n.items[p]);p++)C.push('<option value="',CKEDITOR.tools.htmlEncode(I[1]!==void 0?I[1]:I[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(I[0]));return typeof f.inputStyle<"u"&&(f.style=f.inputStyle),l.select=new CKEDITOR.ui.dialog.uiElement(o,f,E,"select",null,d,C.join("")),E.push("</div>"),E.join("")})}},file:function(o,n,t){if(!(3>arguments.length)){n.default===void 0&&(n.default="");var l=CKEDITOR.tools.extend(e.call(this,n),{definition:n,buttons:[]});n.validate&&(this.validate=n.validate),o.on("load",function(){CKEDITOR.document.getById(l.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,o,n,t,function(){l.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var f=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',l.frameId,'" title="',n.label,'" src="javascript:void('];return f.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),f.push(')"></iframe>'),f.join("")})}},fileButton:function(o,n,t){var l=this;if(!(3>arguments.length)){e.call(this,n),n.validate&&(this.validate=n.validate);var f=CKEDITOR.tools.extend({},n),E=f.onClick;f.className=(f.className?f.className+" ":"")+"cke_dialog_ui_button",f.onClick=function(C){var d=n.for;E&&E.call(this,C)===!1||(o.getContentElement(d[0],d[1]).submit(),this.disable())},o.on("load",function(){o.getContentElement(n.for[0],n.for[1])._.buttons.push(l)}),CKEDITOR.ui.dialog.button.call(this,o,f,t)}},html:function(){var o=/^\s*<[\w:]+\s+([^>]*)?>/,n=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,t=/\/$/;return function(l,f,E){if(!(3>arguments.length)){var C=[],d=f.html;d.charAt(0)!="<"&&(d="<span>"+d+"</span>");var p=f.focus;if(p){var I=this.focus;this.focus=function(){(typeof p=="function"?p:I).call(this),this.fire("focus")},f.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,l,f,C,"span",null,null,""),C=C.join("").match(o),d=d.match(n)||["","",""],t.test(d[1])&&(d[1]=d[1].slice(0,-1),d[2]="/"+d[2]),E.push([d[1]," ",C[1]||"",d[2]].join(""))}}}(),fieldset:function(o,n,t,l,f){var E=f.label;this._={children:n},CKEDITOR.ui.dialog.uiElement.call(this,o,f,l,"fieldset",null,null,function(){var C=[];E&&C.push("<legend"+(f.labelStyle?' style="'+f.labelStyle+'"':"")+">"+E+"</legend>");for(var d=0;d<t.length;d++)C.push(t[d]);return C.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(o){var n=CKEDITOR.document.getById(this._.labelId);return 1>n.getChildCount()?new CKEDITOR.dom.text(o,CKEDITOR.document).appendTo(n):n.getChild(0).$.nodeValue=o,this},getLabel:function(){var o=CKEDITOR.document.getById(this._.labelId);return!o||1>o.getChildCount()?"":o.getChild(0).getText()},eventProcessors:a},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var o=this.getElement();o&&o.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(o,n){this.on("click",function(){n.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var o=this.selectParentTab();setTimeout(function(){var n=o.getInputElement();n&&n.$.focus()},0)},select:function(){var o=this.selectParentTab();setTimeout(function(){var n=o.getInputElement();n&&(n.$.focus(),n.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(o){if(this.bidi){var n=o&&o.charAt(0);(n=n=="‪"?"ltr":n=="‫"?"rtl":null)&&(o=o.slice(1)),this.setDirectionMarker(n)}return o||(o=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},getValue:function(){var o=CKEDITOR.ui.dialog.uiElement.prototype.getValue.call(this);if(this.bidi&&o){var n=this.getDirectionMarker();n&&(o=(n=="ltr"?"‪":"‫")+o)}return o},setDirectionMarker:function(o){var n=this.getInputElement();o?n.setAttributes({dir:o,"data-cke-dir-marker":o}):this.getDirectionMarker()&&n.removeAttributes(["dir","data-cke-dir-marker"])},getDirectionMarker:function(){return this.getInputElement().data("cke-dir-marker")},keyboardFocusable:!0},s,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(o,n,t){var l=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),f=this.getInputElement().$;return l.$.text=o,l.$.value=n??o,t==null?CKEDITOR.env.ie?f.add(l.$):f.add(l.$,null):f.add(l.$,t),this},remove:function(o){return this.getInputElement().$.remove(o),this},clear:function(){for(var o=this.getInputElement().$;0<o.length;)o.remove(0);return this},keyboardFocusable:!0},s,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(o,n){this.getInputElement().$.checked=o,!n&&this.fire("change",{value:o})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(o,n){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?a.onChange.apply(this,arguments):(o.on("load",function(){var t=this._.checkbox.getElement();t.on("propertychange",function(l){l=l.data.$,l.propertyName=="checked"&&this.fire("change",{value:t.$.checked})},this)},this),this.on("change",n),null)}},keyboardFocusable:!0},s,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(o,n){for(var t=this._.children,l,f=0;f<t.length&&(l=t[f]);f++)l.getElement().$.checked=l.getValue()==o;!n&&this.fire("change",{value:o})},getValue:function(){for(var o=this._.children,n=0;n<o.length;n++)if(o[n].getElement().$.checked)return o[n].getValue();return null},accessKeyUp:function(){var o=this._.children,n;for(n=0;n<o.length;n++)if(o[n].getElement().$.checked){o[n].getElement().focus();return}o[0].getElement().focus()},eventProcessors:{onChange:function(o,n){return!CKEDITOR.env.ie||8<CKEDITOR.env.version?a.onChange.apply(this,arguments):(o.on("load",function(){for(var t=this._.children,l=this,f=0;f<t.length;f++)t[f].getElement().on("propertychange",function(E){E=E.data.$,E.propertyName=="checked"&&this.$.checked&&l.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",n),null)}}},s,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,s,{getInputElement:function(){var o=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return 0<o.$.forms.length?new CKEDITOR.dom.element(o.$.forms[0].elements[0]):this.getElement()},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(o){var n=/^on([A-Z]\w+)/,t,l=function(E,C,d,p){E.on("formLoaded",function(){E.getInputElement().on(d,p,E)})},f;for(f in o)(t=f.match(n))&&(this.eventProcessors[f]?this.eventProcessors[f].call(this,this._.dialog,o[f]):l(this,this._.dialog,t[1].toLowerCase(),o[f]));return this},reset:function(){function o(){t.$.open();var I="";l.size&&(I=l.size-(CKEDITOR.env.ie?7:0));var _=n.frameId+"_input";for(t.$.write(['<html dir="'+d+'" lang="'+p+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+d+'" lang="'+p+'" action="',CKEDITOR.tools.htmlEncode(l.action),'"><label id="',n.labelId,'" for="',_,'" style="display:none">',CKEDITOR.tools.htmlEncode(l.label),'</label><input style="width:100%" id="',_,'" aria-labelledby="',n.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(l.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(0<I?I:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+E+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+C+")}","<\/script>"].join("")),t.$.close(),I=0;I<f.length;I++)f[I].enable()}var n=this._,t=CKEDITOR.document.getById(n.frameId).getFrameDocument(),l=n.definition,f=n.buttons,E=this.formLoadedNumber,C=this.formUnloadNumber,d=n.dialog._.editor.lang.dir,p=n.dialog._.editor.langCode;E||(E=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),C=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(E),CKEDITOR.tools.removeFunction(C)})),CKEDITOR.env.gecko?setTimeout(o,500):o()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""},eventProcessors:{onChange:function(o,n){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",n)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",c),CKEDITOR.dialog.addUIElement("password",c),CKEDITOR.dialog.addUIElement("textarea",r),CKEDITOR.dialog.addUIElement("checkbox",r),CKEDITOR.dialog.addUIElement("radio",r),CKEDITOR.dialog.addUIElement("button",r),CKEDITOR.dialog.addUIElement("select",r),CKEDITOR.dialog.addUIElement("file",r),CKEDITOR.dialog.addUIElement("fileButton",r),CKEDITOR.dialog.addUIElement("html",r),CKEDITOR.dialog.addUIElement("fieldset",{build:function(o,n,t){for(var l=n.children,f,E=[],C=[],d=0;d<l.length&&(f=l[d]);d++){var p=[];E.push(p),C.push(CKEDITOR.dialog._.uiElementBuilders[f.type].build(o,f,p))}return new CKEDITOR.ui.dialog[n.type](o,C,E,t,n)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,CKEDITOR.DIALOG_STATE_IDLE=1,CKEDITOR.DIALOG_STATE_BUSY=2,function(){function e(){for(var T=this._.tabIdList.length,x=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+T,S=x-1;S>x-T;S--)if(this._.tabs[this._.tabIdList[S%T]][0].$.offsetHeight)return this._.tabIdList[S%T];return null}function c(){for(var T=this._.tabIdList.length,x=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),S=x+1;S<x+T;S++)if(this._.tabs[this._.tabIdList[S%T]][0].$.offsetHeight)return this._.tabIdList[S%T];return null}function r(T,x){for(var S=T.$.getElementsByTagName("input"),y=0,N=S.length;y<N;y++){var w=new CKEDITOR.dom.element(S[y]);w.getAttribute("type").toLowerCase()=="text"&&(x?(w.setAttribute("value",w.getCustomData("fake_value")||""),w.removeCustomData("fake_value")):(w.setCustomData("fake_value",w.getAttribute("value")),w.setAttribute("value","")))}}function s(T,x){var S=this.getInputElement();S&&(T?S.removeAttribute("aria-invalid"):S.setAttribute("aria-invalid",!0)),T||(this.select?this.select():this.focus()),x&&alert(x),this.fire("validated",{valid:T,msg:x})}function a(){var T=this.getInputElement();T&&T.removeAttribute("aria-invalid")}function u(T){var x=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",d).output({id:CKEDITOR.tools.getNextNumber(),editorId:T.id,langDir:T.lang.dir,langCode:T.langCode,editorDialogClass:"cke_editor_"+T.name.replace(/\./g,"\\.")+"_dialog",closeTitle:T.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),S=x.getChild([0,0,0,0,0]),y=S.getChild(0),N=S.getChild(1);return T.plugins.clipboard&&CKEDITOR.plugins.clipboard.preventDefaultDropOnElement(S),!CKEDITOR.env.ie||CKEDITOR.env.quirks||CKEDITOR.env.edge||(T="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())",CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+T+'" tabIndex="-1"></iframe>').appendTo(S.getParent())),y.unselectable(),N.unselectable(),{element:x,parts:{dialog:x.getChild(0),title:y,close:N,tabs:S.getChild(2),contents:S.getChild([3,0,0,0]),footer:S.getChild([3,0,1,0])}}}function h(T,x,S){this.element=x,this.focusIndex=S,this.tabIndex=0,this.isFocusable=function(){return!x.getAttribute("disabled")&&x.isVisible()},this.focus=function(){T._.currentFocusIndex=this.focusIndex,this.element.focus()},x.on("keydown",function(y){y.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),x.on("focus",function(){this.fire("mouseover")}),x.on("blur",function(){this.fire("mouseout")})}function i(T){function x(){T.layout()}var S=CKEDITOR.document.getWindow();S.on("resize",x),T.on("hide",function(){S.removeListener("resize",x)})}function o(T,x){this._={dialog:T},CKEDITOR.tools.extend(this,x)}function n(T){function x(A){var P=T.getSize(),$=CKEDITOR.document.getWindow().getViewPaneSize(),M=A.data.$.screenX,U=A.data.$.screenY,V=M-y.x,W=U-y.y;y={x:M,y:U},N.x+=V,N.y+=W,T.move(N.x+b[3]<R?-b[3]:N.x-b[1]>$.width-P.width-R?$.width-P.width+(w.lang.dir=="rtl"?0:b[1]):N.x,N.y+b[0]<R?-b[0]:N.y-b[2]>$.height-P.height-R?$.height-P.height+b[2]:N.y,1),A.data.preventDefault()}function S(){if(CKEDITOR.document.removeListener("mousemove",x),CKEDITOR.document.removeListener("mouseup",S),CKEDITOR.env.ie6Compat){var A=v.getChild(0).getFrameDocument();A.removeListener("mousemove",x),A.removeListener("mouseup",S)}}var y=null,N=null,w=T.getParentEditor(),R=w.config.dialog_magnetDistance,b=CKEDITOR.skin.margins||[0,0,0,0];typeof R>"u"&&(R=20),T.parts.title.on("mousedown",function(A){if(y={x:A.data.$.screenX,y:A.data.$.screenY},CKEDITOR.document.on("mousemove",x),CKEDITOR.document.on("mouseup",S),N=T.getPosition(),CKEDITOR.env.ie6Compat){var P=v.getChild(0).getFrameDocument();P.on("mousemove",x),P.on("mouseup",S)}A.data.preventDefault()},T)}function t(T){function x(V){var W=w.lang.dir=="rtl",Y=$.width,te=$.height,Q=Y+(V.data.$.screenX-P.x)*(W?-1:1)*(T._.moved?1:2),J=te+(V.data.$.screenY-P.y)*(T._.moved?1:2),re=T._.element.getFirst(),re=W&&re.getComputedStyle("right"),ne=T.getPosition();ne.y+J>A.height&&(J=A.height-ne.y),(W?re:ne.x)+Q>A.width&&(Q=A.width-(W?re:ne.x)),(N==CKEDITOR.DIALOG_RESIZE_WIDTH||N==CKEDITOR.DIALOG_RESIZE_BOTH)&&(Y=Math.max(y.minWidth||0,Q-R)),(N==CKEDITOR.DIALOG_RESIZE_HEIGHT||N==CKEDITOR.DIALOG_RESIZE_BOTH)&&(te=Math.max(y.minHeight||0,J-b)),T.resize(Y,te),T._.moved||T.layout(),V.data.preventDefault()}function S(){if(CKEDITOR.document.removeListener("mouseup",S),CKEDITOR.document.removeListener("mousemove",x),M&&(M.remove(),M=null),CKEDITOR.env.ie6Compat){var V=v.getChild(0).getFrameDocument();V.removeListener("mouseup",S),V.removeListener("mousemove",x)}}var y=T.definition,N=y.resizable;if(N!=CKEDITOR.DIALOG_RESIZE_NONE){var w=T.getParentEditor(),R,b,A,P,$,M,U=CKEDITOR.tools.addFunction(function(V){$=T.getSize();var W=T.parts.contents;W.$.getElementsByTagName("iframe").length&&(M=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),W.append(M)),b=$.height-T.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),R=$.width-T.parts.contents.getSize("width",1),P={x:V.screenX,y:V.screenY},A=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",x),CKEDITOR.document.on("mouseup",S),CKEDITOR.env.ie6Compat&&(W=v.getChild(0).getFrameDocument(),W.on("mousemove",x),W.on("mouseup",S)),V.preventDefault&&V.preventDefault()});T.on("load",function(){var V="";N==CKEDITOR.DIALOG_RESIZE_WIDTH?V=" cke_resizer_horizontal":N==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(V=" cke_resizer_vertical"),V=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+V+" cke_resizer_"+w.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(w.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+U+', event )">'+(w.lang.dir=="ltr"?"◢":"◣")+"</div>"),T.parts.footer.append(V,1)}),w.on("destroy",function(){CKEDITOR.tools.removeFunction(U)})}}function l(T){T.data.preventDefault(1)}function f(T){var x=CKEDITOR.document.getWindow(),w=T.config,S=w.dialog_backgroundCoverColor||"white",y=w.dialog_backgroundCoverOpacity,N=w.baseFloatZIndex,w=CKEDITOR.tools.genKey(S,y,N),R=O[w];R?R.show():(N=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",N,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+S,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(S="<html><body style=\\'background-color:"+S+";\\'></body></html>",N.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),N.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+S+"' );document.close();")+"})())"),N.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),N.push("</div>"),R=CKEDITOR.dom.element.createFromHtml(N.join("")),R.setOpacity(y!==void 0?y:.5),R.on("keydown",l),R.on("keypress",l),R.on("keyup",l),R.appendTo(CKEDITOR.document.getBody()),O[w]=R),T.focusManager.add(R),v=R,T=function(){var P=x.getViewPaneSize();R.setStyles({width:P.width+"px",height:P.height+"px"})};var b=function(){var P=x.getScrollPosition(),$=CKEDITOR.dialog._.currentTop;if(R.setStyles({left:P.x+"px",top:P.y+"px"}),$)do P=$.getPosition(),$.move(P.x,P.y);while($=$._.parentDialog)};if(D=T,x.on("resize",T),T(),CKEDITOR.env.mac&&CKEDITOR.env.webkit||R.focus(),CKEDITOR.env.ie6Compat){var A=function(){b(),arguments.callee.prevScrollHandler.apply(this,arguments)};x.$.setTimeout(function(){A.prevScrollHandler=window.onscroll||function(){},window.onscroll=A},0),b()}}function E(T){v&&(T.focusManager.remove(v),T=CKEDITOR.document.getWindow(),v.hide(),T.removeListener("resize",D),CKEDITOR.env.ie6Compat&&T.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null},0),D=null)}var C=CKEDITOR.tools.cssLength,d='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';CKEDITOR.dialog=function(T,x){function S(){var Q=W._.focusList;Q.sort(function(ne,q){return ne.tabIndex!=q.tabIndex?q.tabIndex-ne.tabIndex:ne.focusIndex-q.focusIndex});for(var J=Q.length,re=0;re<J;re++)Q[re].focusIndex=re}function y(Q){var J=W._.focusList;if(Q=Q||0,!(1>J.length)){var re=W._.currentFocusIndex;W._.tabBarMode&&0>Q&&(re=0);try{J[re].getInputElement().$.blur()}catch{}var ne=re,q=1<W._.pageCount;do{if(ne+=Q,q&&!W._.tabBarMode&&(ne==J.length||ne==-1)){W._.tabBarMode=!0,W._.tabs[W._.currentTabId][0].focus(),W._.currentFocusIndex=-1;return}if(ne=(ne+J.length)%J.length,ne==re)break}while(Q&&!J[ne].isFocusable());J[ne].focus(),J[ne].type=="text"&&J[ne].select()}}function N(Q){if(W==CKEDITOR.dialog._.currentTop){var J=Q.data.getKeystroke(),re=T.lang.dir=="rtl",ne=[37,38,39,40];if(M=U=0,J==9||J==CKEDITOR.SHIFT+9)y(J==CKEDITOR.SHIFT+9?-1:1),M=1;else if(J==CKEDITOR.ALT+121&&!W._.tabBarMode&&1<W.getPageCount())W._.tabBarMode=!0,W._.tabs[W._.currentTabId][0].focus(),W._.currentFocusIndex=-1,M=1;else if(CKEDITOR.tools.indexOf(ne,J)!=-1&&W._.tabBarMode)J=CKEDITOR.tools.indexOf([re?39:37,38],J)!=-1?e.call(W):c.call(W),W.selectPage(J),W._.tabs[J][0].focus(),M=1;else if(J!=13&&J!=32||!W._.tabBarMode)if(J==13)J=Q.data.getTarget(),J.is("a","button","select","textarea")||J.is("input")&&J.$.type=="button"||((J=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(J.click,0,J),M=1),U=1;else if(J==27)(J=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(J.click,0,J):this.fire("cancel",{hide:!0}).hide!==!1&&this.hide(),U=1;else return;else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,y(1),M=1;w(Q)}}function w(Q){M?Q.data.preventDefault(1):U&&Q.data.stopPropagation()}var R=CKEDITOR.dialog._.dialogDefinitions[x],b=CKEDITOR.tools.clone(p),A=T.config.dialog_buttonsOrder||"OS",P=T.lang.dir,$={},M,U;if((A=="OS"&&CKEDITOR.env.mac||A=="rtl"&&P=="ltr"||A=="ltr"&&P=="rtl")&&b.buttons.reverse(),R=CKEDITOR.tools.extend(R(T),b),R=CKEDITOR.tools.clone(R),R=new g(this,R),b=u(T),this._={editor:T,element:b.element,name:x,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=b.parts,CKEDITOR.tools.setTimeout(function(){T.fire("ariaWidget",this.parts.contents)},0,this),b={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"},b[P=="rtl"?"right":"left"]=0,this.parts.dialog.setStyles(b),CKEDITOR.event.call(this),this.definition=R=CKEDITOR.fire("dialogDefinition",{name:x,definition:R},T).definition,!("removeDialogTabs"in T._)&&T.config.removeDialogTabs){for(b=T.config.removeDialogTabs.split(";"),P=0;P<b.length;P++)if(A=b[P].split(":"),A.length==2){var V=A[0];$[V]||($[V]=[]),$[V].push(A[1])}T._.removeDialogTabs=$}if(T._.removeDialogTabs&&($=T._.removeDialogTabs[x]))for(P=0;P<$.length;P++)R.removeContents($[P]);R.onLoad&&this.on("load",R.onLoad),R.onShow&&this.on("show",R.onShow),R.onHide&&this.on("hide",R.onHide),R.onOk&&this.on("ok",function(Q){T.fire("saveSnapshot"),setTimeout(function(){T.fire("saveSnapshot")},0),R.onOk.call(this,Q)===!1&&(Q.data.hide=!1)}),this.state=CKEDITOR.DIALOG_STATE_IDLE,R.onCancel&&this.on("cancel",function(Q){R.onCancel.call(this,Q)===!1&&(Q.data.hide=!1)});var W=this,Y=function(Q){var J=W._.contents,re;for(re in J)for(var ne in J[re])if(Q.call(this,J[re][ne]))return};this.on("ok",function(Q){Y(function(J){if(J.validate){var re=J.validate(this),ne=typeof re=="string"||re===!1;return ne&&(Q.data.hide=!1,Q.stop()),s.call(J,!ne,typeof re=="string"?re:void 0),ne}})},this,null,0),this.on("cancel",function(Q){Y(function(J){if(J.isChanged())return T.config.dialog_noConfirmCancel||confirm(T.lang.common.confirmCancel)||(Q.data.hide=!1),!0})},this,null,0),this.parts.close.on("click",function(Q){this.fire("cancel",{hide:!0}).hide!==!1&&this.hide(),Q.data.preventDefault()},this),this.changeFocus=y;var te=this._.element;for(T.focusManager.add(te,1),this.on("show",function(){te.on("keydown",N,this),CKEDITOR.env.gecko&&te.on("keypress",w,this)}),this.on("hide",function(){te.removeListener("keydown",N),CKEDITOR.env.gecko&&te.removeListener("keypress",w),Y(function(Q){a.apply(Q)})}),this.on("iframeAdded",function(Q){new CKEDITOR.dom.document(Q.data.iframe.$.contentWindow.document).on("keydown",N,this,null,0)}),this.on("show",function(){S();var Q=1<W._.pageCount;T.config.dialog_startupFocusTab&&Q?(W._.tabBarMode=!0,W._.tabs[W._.currentTabId][0].focus(),W._.currentFocusIndex=-1):this._.hasFocus||(this._.currentFocusIndex=Q?-1:this._.focusList.length-1,R.onFocus?(Q=R.onFocus.call(this))&&Q.focus():y(1))},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var Q=this.getElement(),J=Q.getFirst();J.remove(),J.appendTo(Q)},this),n(this),t(this),new CKEDITOR.dom.text(R.title,CKEDITOR.document).appendTo(this.parts.title),P=0;P<R.contents.length;P++)($=R.contents[P])&&this.addPage($);for(this.parts.tabs.on("click",function(Q){var J=Q.data.getTarget();J.hasClass("cke_dialog_tab")&&(J=J.$.id,this.selectPage(J.substring(4,J.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,y(1)),Q.data.preventDefault())},this),P=[],$=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:R.buttons},P).getChild(),this.parts.footer.setHtml(P.join("")),P=0;P<$.length;P++)this._.buttons[$[P].id]=$[P]},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(){return function(T,x){this._.contentSize&&this._.contentSize.width==T&&this._.contentSize.height==x||(CKEDITOR.dialog.fire("resize",{dialog:this,width:T,height:x},this._.editor),this.fire("resize",{width:T,height:x},this._.editor),this.parts.contents.setStyles({width:T+"px",height:x+"px"}),this._.editor.lang.dir=="rtl"&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:T,height:x})}}(),getSize:function(){var T=this._.element.getFirst();return{width:T.$.offsetWidth||0,height:T.$.offsetHeight||0}},move:function(T,x,S){var y=this._.element.getFirst(),N=this._.editor.lang.dir=="rtl",w=y.getComputedStyle("position")=="fixed";CKEDITOR.env.ie&&y.setStyle("zoom","100%"),w&&this._.position&&this._.position.x==T&&this._.position.y==x||(this._.position={x:T,y:x},w||(w=CKEDITOR.document.getWindow().getScrollPosition(),T+=w.x,x+=w.y),N&&(w=this.getSize(),T=CKEDITOR.document.getWindow().getViewPaneSize().width-w.width-T),x={top:(0<x?x:0)+"px"},x[N?"right":"left"]=(0<T?T:0)+"px",y.setStyles(x),S&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var T=this._.element,x=this.definition;T.getParent()&&T.getParent().equals(CKEDITOR.document.getBody())?T.setStyle("display","block"):T.appendTo(CKEDITOR.document.getBody()),this.resize(this._.contentSize&&this._.contentSize.width||x.width||x.minWidth,this._.contentSize&&this._.contentSize.height||x.height||x.minHeight),this.reset(),this.selectPage(this.definition.contents[0].id),CKEDITOR.dialog._.currentZIndex===null&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex+=10),CKEDITOR.dialog._.currentTop===null?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,f(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),T.on("keydown",k),T.on("keyup",L),this._.hasFocus=!1;for(var S in x.contents)if(x.contents[S]){var T=x.contents[S],y=this._.tabs[T.id],N=T.requiredContent,w=0;if(y){for(var R in this._.contents[T.id]){var b=this._.contents[T.id][R];b.type!="hbox"&&b.type!="vbox"&&b.getInputElement()&&(b.requiredContent&&!this._.editor.activeFilter.check(b.requiredContent)?b.disable():(b.enable(),w++))}!w||N&&!this._.editor.activeFilter.check(N)?y[0].addClass("cke_dialog_tab_disabled"):y[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),i(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(A){A.setInitValue&&A.setInitValue()})},100,this)},layout:function(){var T=this.parts.dialog,x=this.getSize(),S=CKEDITOR.document.getWindow().getViewPaneSize(),y=(S.width-x.width)/2,N=(S.height-x.height)/2;CKEDITOR.env.ie6Compat||(x.height+(0<N?N:0)>S.height||x.width+(0<y?y:0)>S.width?T.setStyle("position","absolute"):T.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:y,this._.moved?this._.position.y:N)},foreach:function(T){for(var x in this._.contents)for(var S in this._.contents[x])T.call(this,this._.contents[x][S]);return this},reset:function(){var T=function(x){x.reset&&x.reset(1)};return function(){return this.foreach(T),this}}(),setupContent:function(){var T=arguments;this.foreach(function(x){x.setup&&x.setup.apply(x,T)})},commitContent:function(){var T=arguments;this.foreach(function(x){CKEDITOR.env.ie&&this._.currentFocusIndex==x.focusIndex&&x.getInputElement().$.blur(),x.commit&&x.commit.apply(x,T)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var T=this._.element;for(T.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),F(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var x=this._.parentDialog.getElement().getFirst();x.setStyle("z-index",parseInt(x.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))}else E(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex-=10;else{CKEDITOR.dialog._.currentZIndex=null,T.removeListener("keydown",k),T.removeListener("keyup",L);var S=this._.editor;S.focus(),setTimeout(function(){S.focusManager.unlock(),CKEDITOR.env.iOS&&S.window.focus()},0)}delete this._.parentDialog,this.foreach(function(y){y.resetInitValue&&y.resetInitValue()}),this.setState(CKEDITOR.DIALOG_STATE_IDLE)}},addPage:function(T){if(!T.requiredContent||this._.editor.filter.check(T.requiredContent)){for(var x=[],S=T.label?' title="'+CKEDITOR.tools.htmlEncode(T.label)+'"':"",y=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:T.elements,expand:!!T.expand,padding:T.padding,style:T.style||"width: 100%;"},x),N=this._.contents[T.id]={},w=y.getChild(),R=0;y=w.shift();)y.notAllowed||y.type=="hbox"||y.type=="vbox"||R++,N[y.id]=y,typeof y.getChild=="function"&&w.push.apply(w,y.getChild());R||(T.hidden=!0),x=CKEDITOR.dom.element.createFromHtml(x.join("")),x.setAttribute("role","tabpanel"),y=CKEDITOR.env,N="cke_"+T.id+"_"+CKEDITOR.tools.getNextNumber(),S=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',0<this._.pageCount?" cke_last":"cke_first",S,T.hidden?' style="display:none"':"",' id="',N,'"',y.gecko&&!y.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',T.label,"</a>"].join("")),x.setAttribute("aria-labelledby",N),this._.tabs[T.id]=[S,x],this._.tabIdList.push(T.id),!T.hidden&&this._.pageCount++,this._.lastTab=S,this.updateStyle(),x.setAttribute("name",T.id),x.appendTo(this.parts.contents),S.unselectable(),this.parts.tabs.append(S),T.accessKey&&(B(this,this,"CTRL+"+T.accessKey,z,H),this._.accessKeyMap["CTRL+"+T.accessKey]=T.id)}},selectPage:function(T){if(this._.currentTabId!=T&&!this._.tabs[T][0].hasClass("cke_dialog_tab_disabled")&&this.fire("selectPage",{page:T,currentPage:this._.currentTabId})!==!1){for(var x in this._.tabs){var S=this._.tabs[x][0],y=this._.tabs[x][1];x!=T&&(S.removeClass("cke_dialog_tab_selected"),y.hide()),y.setAttribute("aria-hidden",x!=T)}var N=this._.tabs[T];N[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(r(N[1]),N[1].show(),setTimeout(function(){r(N[1],1)},0)):N[1].show(),this._.currentTabId=T,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,T)}},updateStyle:function(){this.parts.dialog[(this._.pageCount===1?"add":"remove")+"Class"]("cke_single_page")},hidePage:function(T){var x=this._.tabs[T]&&this._.tabs[T][0];x&&this._.pageCount!=1&&x.isVisible()&&(T==this._.currentTabId&&this.selectPage(e.call(this)),x.hide(),this._.pageCount--,this.updateStyle())},showPage:function(T){(T=this._.tabs[T]&&this._.tabs[T][0])&&(T.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(T,x){var S=this._.contents[T];return S&&S[x]},getValueOf:function(T,x){return this.getContentElement(T,x).getValue()},setValueOf:function(T,x,S){return this.getContentElement(T,x).setValue(S)},getButton:function(T){return this._.buttons[T]},click:function(T){return this._.buttons[T].click()},disableButton:function(T){return this._.buttons[T].disable()},enableButton:function(T){return this._.buttons[T].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(T,x){if(typeof x>"u")x=this._.focusList.length,this._.focusList.push(new h(this,T,x));else{this._.focusList.splice(x,0,new h(this,T,x));for(var S=x+1;S<this._.focusList.length;S++)this._.focusList[S].focusIndex++}},setState:function(T){if(this.state!=T){if(this.state=T,T==CKEDITOR.DIALOG_STATE_BUSY){if(!this.parts.spinner){var x=this.getParentEditor().lang.dir,S={attributes:{class:"cke_dialog_spinner"},styles:{float:x=="rtl"?"right":"left"}};S.styles["margin-"+(x=="rtl"?"left":"right")]="8px",this.parts.spinner=CKEDITOR.document.createElement("div",S),this.parts.spinner.setHtml("&#8987;"),this.parts.spinner.appendTo(this.parts.title,1)}this.parts.spinner.show(),this.getButton("ok").disable()}else T==CKEDITOR.DIALOG_STATE_IDLE&&(this.parts.spinner&&this.parts.spinner.hide(),this.getButton("ok").enable());this.fire("state",T)}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(T,x){this._.dialogDefinitions[T]&&typeof x!="function"||(this._.dialogDefinitions[T]=x)},exists:function(T){return!!this._.dialogDefinitions[T]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(T,x,S){return T=T.config.removeDialogTabs,!(T&&T.match(new RegExp("(?:^|;)"+x+":"+S+"(?:$|;)","i")))},okButton:function(){var T=function(x,S){return S=S||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:x.lang.common.ok,class:"cke_dialog_ui_button_ok",onClick:function(y){y=y.data.dialog,y.fire("ok",{hide:!0}).hide!==!1&&y.hide()}},S,!0)};return T.type="button",T.override=function(x){return CKEDITOR.tools.extend(function(S){return T(S,x)},{type:"button"},!0)},T}(),cancelButton:function(){var T=function(x,S){return S=S||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:x.lang.common.cancel,class:"cke_dialog_ui_button_cancel",onClick:function(y){y=y.data.dialog,y.fire("cancel",{hide:!0}).hide!==!1&&y.hide()}},S,!0)};return T.type="button",T.override=function(x){return CKEDITOR.tools.extend(function(S){return T(S,x)},{type:"button"},!0)},T}(),addUIElement:function(T,x){this._.uiElementBuilders[T]=x}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var p={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},I=function(T,x,S){for(var y=0,N;N=T[y];y++)if(N.id==x||S&&N[S]&&(N=I(N[S],x,S)))return N;return null},_=function(T,x,S,y,N){if(S){for(var w=0,R;R=T[w];w++){if(R.id==S)return T.splice(w,0,x),x;if(y&&R[y]&&(R=_(R[y],x,S,y,!0)))return R}if(N)return null}return T.push(x),x},m=function(T,x,S){for(var y=0,N;N=T[y];y++){if(N.id==x)return T.splice(y,1);if(S&&N[S]&&(N=m(N[S],x,S)))return N}return null},g=function(T,x){this.dialog=T;for(var S=x.contents,y=0,N;N=S[y];y++)S[y]=N&&new o(T,N);CKEDITOR.tools.extend(this,x)};g.prototype={getContents:function(T){return I(this.contents,T)},getButton:function(T){return I(this.buttons,T)},addContents:function(T,x){return _(this.contents,T,x)},addButton:function(T,x){return _(this.buttons,T,x)},removeContents:function(T){m(this.contents,T)},removeButton:function(T){m(this.buttons,T)}},o.prototype={get:function(T){return I(this.elements,T,"children")},add:function(T,x){return _(this.elements,T,x,"children")},remove:function(T){m(this.elements,T,"children")}};var D,O={},v,K={},k=function(T){var x=T.data.$.ctrlKey||T.data.$.metaKey,S=T.data.$.altKey,y=T.data.$.shiftKey,N=String.fromCharCode(T.data.$.keyCode);(x=K[(x?"CTRL+":"")+(S?"ALT+":"")+(y?"SHIFT+":"")+N])&&x.length&&(x=x[x.length-1],x.keydown&&x.keydown.call(x.uiElement,x.dialog,x.key),T.data.preventDefault())},L=function(T){var x=T.data.$.ctrlKey||T.data.$.metaKey,S=T.data.$.altKey,y=T.data.$.shiftKey,N=String.fromCharCode(T.data.$.keyCode);(x=K[(x?"CTRL+":"")+(S?"ALT+":"")+(y?"SHIFT+":"")+N])&&x.length&&(x=x[x.length-1],x.keyup&&(x.keyup.call(x.uiElement,x.dialog,x.key),T.data.preventDefault()))},B=function(T,x,S,y,N){(K[S]||(K[S]=[])).push({uiElement:T,dialog:x,key:S,keyup:N||T.accessKeyUp,keydown:y||T.accessKeyDown})},F=function(T){for(var x in K){for(var S=K[x],y=S.length-1;0<=y;y--)S[y].dialog!=T&&S[y].uiElement!=T||S.splice(y,1);S.length===0&&delete K[x]}},H=function(T,x){T._.accessKeyMap[x]&&T.selectPage(T._.accessKeyMap[x])},z=function(){};(function(){CKEDITOR.ui.dialog={uiElement:function(T,x,S,y,N,w,R){if(!(4>arguments.length)){var b=(y.call?y(x):y)||"div",A=["<",b," "],P=(N&&N.call?N(x):N)||{},$=(w&&w.call?w(x):w)||{},M=(R&&R.call?R.call(this,T,x):R)||"",U=this.domId=$.id||CKEDITOR.tools.getNextId()+"_uiElement";x.requiredContent&&!T.getParentEditor().filter.check(x.requiredContent)&&(P.display="none",this.notAllowed=!0),$.id=U;var V={};x.type&&(V["cke_dialog_ui_"+x.type]=1),x.className&&(V[x.className]=1),x.disabled&&(V.cke_disabled=1);for(var W=$.class&&$.class.split?$.class.split(" "):[],U=0;U<W.length;U++)W[U]&&(V[W[U]]=1);W=[];for(U in V)W.push(U);$.class=W.join(" "),x.title&&($.title=x.title),V=(x.style||"").split(";"),x.align&&(W=x.align,P["margin-left"]=W=="left"?0:"auto",P["margin-right"]=W=="right"?0:"auto");for(U in P)V.push(U+":"+P[U]);for(x.hidden&&V.push("display:none"),U=V.length-1;0<=U;U--)V[U]===""&&V.splice(U,1);0<V.length&&($.style=($.style?$.style+"; ":"")+V.join("; "));for(U in $)A.push(U+'="'+CKEDITOR.tools.htmlEncode($[U])+'" ');A.push(">",M,"</",b,">"),S.push(A.join("")),(this._||(this._={})).dialog=T,typeof x.isChanged=="boolean"&&(this.isChanged=function(){return x.isChanged}),typeof x.isChanged=="function"&&(this.isChanged=x.isChanged),typeof x.setValue=="function"&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(te){return function(Q){te.call(this,x.setValue.call(this,Q))}})),typeof x.getValue=="function"&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(te){return function(){return x.getValue.call(this,te.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(x),this.accessKeyUp&&this.accessKeyDown&&x.accessKey&&B(this,T,"CTRL+"+x.accessKey);var Y=this;T.on("load",function(){var te=Y.getInputElement();if(te){var Q=Y.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?"cke_dialog_ui_focused":"";te.on("focus",function(){T._.tabBarMode=!1,T._.hasFocus=!0,Y.fire("focus"),Q&&this.addClass(Q)}),te.on("blur",function(){Y.fire("blur"),Q&&this.removeClass(Q)})}}),CKEDITOR.tools.extend(this,x),this.keyboardFocusable&&(this.tabIndex=x.tabIndex||0,this.focusIndex=T._.focusList.push(this)-1,this.on("focus",function(){T._.currentFocusIndex=Y.focusIndex}))}},hbox:function(T,x,S,y,N){if(!(4>arguments.length)){this._||(this._={});var w=this._.children=x,R=N&&N.widths||null,b=N&&N.height||null,A,P={role:"presentation"};N&&N.align&&(P.align=N.align),CKEDITOR.ui.dialog.uiElement.call(this,T,N||{type:"hbox"},y,"table",{},P,function(){var $=['<tbody><tr class="cke_dialog_ui_hbox">'];for(A=0;A<S.length;A++){var M="cke_dialog_ui_hbox_child",U=[];A===0&&(M="cke_dialog_ui_hbox_first"),A==S.length-1&&(M="cke_dialog_ui_hbox_last"),$.push('<td class="',M,'" role="presentation" '),R?R[A]&&U.push("width:"+C(R[A])):U.push("width:"+Math.floor(100/S.length)+"%"),b&&U.push("height:"+C(b)),N&&N.padding!==void 0&&U.push("padding:"+C(N.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&w[A].align&&U.push("text-align:"+w[A].align),0<U.length&&$.push('style="'+U.join("; ")+'" '),$.push(">",S[A],"</td>")}return $.push("</tr></tbody>"),$.join("")})}},vbox:function(T,x,S,y,N){if(!(3>arguments.length)){this._||(this._={});var w=this._.children=x,R=N&&N.width||null,b=N&&N.heights||null;CKEDITOR.ui.dialog.uiElement.call(this,T,N||{type:"vbox"},y,"div",null,{role:"presentation"},function(){var A=['<table role="presentation" cellspacing="0" border="0" '];A.push('style="'),N&&N.expand&&A.push("height:100%;"),A.push("width:"+C(R||"100%"),";"),CKEDITOR.env.webkit&&A.push("float:none;"),A.push('"'),A.push('align="',CKEDITOR.tools.htmlEncode(N&&N.align||(T.getParentEditor().lang.dir=="ltr"?"left":"right")),'" '),A.push("><tbody>");for(var P=0;P<S.length;P++){var $=[];A.push('<tr><td role="presentation" '),R&&$.push("width:"+C(R||"100%")),b?$.push("height:"+C(b[P])):N&&N.expand&&$.push("height:"+Math.floor(100/S.length)+"%"),N&&N.padding!==void 0&&$.push("padding:"+C(N.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&w[P].align&&$.push("text-align:"+w[P].align),0<$.length&&A.push('style="',$.join("; "),'" '),A.push(' class="cke_dialog_ui_vbox_child">',S[P],"</td></tr>")}return A.push("</tbody></table>"),A.join("")})}}}})(),CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(T,x){return this.getInputElement().setValue(T),!x&&this.fire("change",{value:T}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var T=this.getInputElement();(T=T.getParent())&&T.$.className.search("cke_dialog_page_contents")==-1;);return T?(T=T.getAttribute("name"),this._.dialog._.currentTabId!=T&&this._.dialog.selectPage(T),this):this},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(T){var x=/^on([A-Z]\w+)/,S,y=function(w,R,b,A){R.on("load",function(){w.getInputElement().on(b,A,w)})},N;for(N in T)(S=N.match(x))&&(this.eventProcessors[N]?this.eventProcessors[N].call(this,this._.dialog,T[N]):y(this,this._.dialog,S[1].toLowerCase(),T[N]));return this},eventProcessors:{onLoad:function(T,x){T.on("load",x,this)},onShow:function(T,x){T.on("show",x,this)},onHide:function(T,x){T.on("hide",x,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var T=this.getElement();this.getInputElement().setAttribute("disabled","true"),T.addClass("cke_disabled")},enable:function(){var T=this.getElement();this.getInputElement().removeAttribute("disabled"),T.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return!!(this.isEnabled()&&this.isVisible())}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(T){return 1>arguments.length?this._.children.concat():(T.splice||(T=[T]),2>T.length?this._.children[T[0]]:this._.children[T[0]]&&this._.children[T[0]].getChild?this._.children[T[0]].getChild(T.slice(1,T.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var T={build:function(x,S,y){for(var N=S.children,w,R=[],b=[],A=0;A<N.length&&(w=N[A]);A++){var P=[];R.push(P),b.push(CKEDITOR.dialog._.uiElementBuilders[w.type].build(x,w,P))}return new CKEDITOR.ui.dialog[S.type](x,b,R,y,S)}};CKEDITOR.dialog.addUIElement("hbox",T),CKEDITOR.dialog.addUIElement("vbox",T)}(),CKEDITOR.dialogCommand=function(T,x){this.dialogName=T,CKEDITOR.tools.extend(this,x,!0)},CKEDITOR.dialogCommand.prototype={exec:function(T){T.openDialog(this.dialogName)},canUndo:!1,editorFocus:1},function(){var T=/^([a]|[^a])+$/,x=/^\d*$/,S=/^\d*(?:\.\d+)?$/,y=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,N=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,w=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var R=arguments;return function(){var b=this&&this.getValue?this.getValue():R[0],A,P=CKEDITOR.VALIDATE_AND,$=[],M;for(M=0;M<R.length&&typeof R[M]=="function";M++)$.push(R[M]);M<R.length&&typeof R[M]=="string"&&(A=R[M],M++),M<R.length&&typeof R[M]=="number"&&(P=R[M]);var U=P==CKEDITOR.VALIDATE_AND;for(M=0;M<$.length;M++)U=P==CKEDITOR.VALIDATE_AND?U&&$[M](b):U||$[M](b);return U?!0:A}},regex:function(R,b){return function(A){return A=this&&this.getValue?this.getValue():A,R.test(A)?!0:b}},notEmpty:function(R){return this.regex(T,R)},integer:function(R){return this.regex(x,R)},number:function(R){return this.regex(S,R)},cssLength:function(R){return this.functions(function(b){return N.test(CKEDITOR.tools.trim(b))},R)},htmlLength:function(R){return this.functions(function(b){return y.test(CKEDITOR.tools.trim(b))},R)},inlineStyle:function(R){return this.functions(function(b){return w.test(CKEDITOR.tools.trim(b))},R)},equals:function(R,b){return this.functions(function(A){return A==R},b)},notEqual:function(R,b){return this.functions(function(A){return A!=R},b)}},CKEDITOR.on("instanceDestroyed",function(R){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var b;b=CKEDITOR.dialog._.currentTop;)b.hide();for(var A in O)O[A].remove();O={}}R=R.editor._.storedDialogs;for(var P in R)R[P].destroy()})}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(T,x){var S=null,y=CKEDITOR.dialog._.dialogDefinitions[T];if(CKEDITOR.dialog._.currentTop===null&&f(this),typeof y=="function")S=this._.storedDialogs||(this._.storedDialogs={}),S=S[T]||(S[T]=new CKEDITOR.dialog(this,T)),x&&x.call(S,S),S.show();else{if(y=="failed")throw E(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+T+'" failed when loading definition.');typeof y=="string"&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(y),function(){typeof CKEDITOR.dialog._.dialogDefinitions[T]!="function"&&(CKEDITOR.dialog._.dialogDefinitions[T]="failed"),this.openDialog(T,x)},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),S}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(e){e.on("doubleclick",function(c){c.data.dialog&&e.openDialog(c.data.dialog)},null,null,999)}}),CKEDITOR.plugins.add("about",{requires:"dialog",init:function(e){var c=e.addCommand("about",new CKEDITOR.dialogCommand("about"));c.modes={wysiwyg:1,source:1},c.canUndo=!1,c.readOnly=1,e.ui.addButton&&e.ui.addButton("About",{label:e.lang.about.title,command:"about",toolbar:"about"}),CKEDITOR.dialog.add("about",this.path+"dialogs/about.js")}}),function(){CKEDITOR.plugins.add("a11yhelp",{requires:"dialog",availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,fa:1,fi:1,fo:1,fr:1,"fr-ca":1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,sr:1,"sr-latn":1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},init:function(e){var c=this;e.addCommand("a11yHelp",{exec:function(){var r=e.langCode,r=c.availableLangs[r]?r:c.availableLangs[r.replace(/-.*/,"")]?r.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+r+".js"),function(){e.lang.a11yhelp=c.langEntries[r],e.openDialog("a11yHelp")})},modes:{wysiwyg:1,source:1},readOnly:1,canUndo:!1}),e.setKeystroke(CKEDITOR.ALT+48,"a11yHelp"),CKEDITOR.dialog.add("a11yHelp",this.path+"dialogs/a11yhelp.js"),e.on("ariaEditorHelpLabel",function(r){r.data.label=e.lang.common.editorHelp})}})}(),CKEDITOR.plugins.add("basicstyles",{init:function(e){var c=0,r=function(h,i,o,n){if(n){n=new CKEDITOR.style(n);var t=s[o];t.unshift(n),e.attachStyleStateChange(n,function(l){!e.readOnly&&e.getCommand(o).setState(l)}),e.addCommand(o,new CKEDITOR.styleCommand(n,{contentForms:t})),e.ui.addButton&&e.ui.addButton(h,{label:i,command:o,toolbar:"basicstyles,"+(c+=10)})}},s={bold:["strong","b",["span",function(h){return h=h.styles["font-weight"],h=="bold"||700<=+h}]],italic:["em","i",["span",function(h){return h.styles["font-style"]=="italic"}]],underline:["u",["span",function(h){return h.styles["text-decoration"]=="underline"}]],strike:["s","strike",["span",function(h){return h.styles["text-decoration"]=="line-through"}]],subscript:["sub"],superscript:["sup"]},a=e.config,u=e.lang.basicstyles;r("Bold",u.bold,"bold",a.coreStyles_bold),r("Italic",u.italic,"italic",a.coreStyles_italic),r("Underline",u.underline,"underline",a.coreStyles_underline),r("Strike",u.strike,"strike",a.coreStyles_strike),r("Subscript",u.subscript,"subscript",a.coreStyles_subscript),r("Superscript",u.superscript,"superscript",a.coreStyles_superscript),e.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){var e={exec:function(c){var r=c.getCommand("blockquote").state,s=c.getSelection(),a=s&&s.getRanges()[0];if(a){var u=s.createBookmarks();if(CKEDITOR.env.ie){var h=u[0].startNode,i=u[0].endNode,o;if(h&&h.getParent().getName()=="blockquote"){for(o=h;o=o.getNext();)if(o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()){h.move(o,!0);break}}if(i&&i.getParent().getName()=="blockquote"){for(o=i;o=o.getPrevious();)if(o.type==CKEDITOR.NODE_ELEMENT&&o.isBlockBoundary()){i.move(o);break}}}var n=a.createIterator();if(n.enlargeBr=c.config.enterMode!=CKEDITOR.ENTER_BR,r==CKEDITOR.TRISTATE_OFF){for(h=[];r=n.getNextParagraph();)h.push(r);for(1>h.length&&(r=c.document.createElement(c.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),i=u.shift(),a.insertNode(r),r.append(new CKEDITOR.dom.text("\uFEFF",c.document)),a.moveToBookmark(i),a.selectNodeContents(r),a.collapse(!0),i=a.createBookmark(),h.push(r),u.unshift(i)),o=h[0].getParent(),a=[],i=0;i<h.length;i++)r=h[i],o=o.getCommonAncestor(r.getParent());for(r={table:1,tbody:1,tr:1,ol:1,ul:1};r[o.getName()];)o=o.getParent();for(i=null;0<h.length;){for(r=h.shift();!r.getParent().equals(o);)r=r.getParent();r.equals(i)||a.push(r),i=r}for(;0<a.length;)if(r=a.shift(),r.getName()=="blockquote"){for(i=new CKEDITOR.dom.documentFragment(c.document);r.getFirst();)i.append(r.getFirst().remove()),h.push(i.getLast());i.replace(r)}else h.push(r);for(a=c.document.createElement("blockquote"),a.insertBefore(h[0]);0<h.length;)r=h.shift(),a.append(r)}else if(r==CKEDITOR.TRISTATE_ON){for(i=[],o={};r=n.getNextParagraph();){for(h=a=null;r.getParent();){if(r.getParent().getName()=="blockquote"){a=r.getParent(),h=r;break}r=r.getParent()}a&&h&&!h.getCustomData("blockquote_moveout")&&(i.push(h),CKEDITOR.dom.element.setMarker(o,h,"blockquote_moveout",!0))}for(CKEDITOR.dom.element.clearAllMarkers(o),r=[],h=[],o={};0<i.length;)n=i.shift(),a=n.getParent(),n.getPrevious()?n.getNext()?(n.breakParent(n.getParent()),h.push(n.getNext())):n.remove().insertAfter(a):n.remove().insertBefore(a),a.getCustomData("blockquote_processed")||(h.push(a),CKEDITOR.dom.element.setMarker(o,a,"blockquote_processed",!0)),r.push(n);for(CKEDITOR.dom.element.clearAllMarkers(o),i=h.length-1;0<=i;i--){a=h[i];e:{o=a;for(var n=0,t=o.getChildCount(),l=void 0;n<t&&(l=o.getChild(n));n++)if(l.type==CKEDITOR.NODE_ELEMENT&&l.isBlockBoundary()){o=!1;break e}o=!0}o&&a.remove()}if(c.config.enterMode==CKEDITOR.ENTER_BR){for(a=!0;r.length;)if(n=r.shift(),n.getName()=="div"){for(i=new CKEDITOR.dom.documentFragment(c.document),!a||!n.getPrevious()||n.getPrevious().type==CKEDITOR.NODE_ELEMENT&&n.getPrevious().isBlockBoundary()||i.append(c.document.createElement("br")),a=n.getNext()&&!(n.getNext().type==CKEDITOR.NODE_ELEMENT&&n.getNext().isBlockBoundary());n.getFirst();)n.getFirst().remove().appendTo(i);a&&i.append(c.document.createElement("br")),i.replace(n),a=!1}}}s.selectBookmarks(u),c.focus()}},refresh:function(c,r){this.setState(c.elementPath(r.block||r.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(c){c.blockless||(c.addCommand("blockquote",e),c.ui.addButton&&c.ui.addButton("Blockquote",{label:c.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),function(){function e(t,l,f){return l.type||(l.type="auto"),f&&t.fire("beforePaste",l)===!1||!l.dataValue&&l.dataTransfer.isEmpty()?!1:(l.dataValue||(l.dataValue=""),CKEDITOR.env.gecko&&l.method=="drop"&&t.toolbox&&t.once("afterPaste",function(){t.toolbox.focus()}),t.fire("paste",l))}function c(t){function l(){var F=t.editable();if(CKEDITOR.plugins.clipboard.isCustomCopyCutSupported){var H=function(T){K.initPasteDataTransfer(T,t),T.data.preventDefault()};F.on("copy",H),F.on("cut",H),F.on("cut",function(){t.extractSelectedHtml()},null,null,999)}F.on(K.mainPasteEvent,function(T){K.mainPasteEvent=="beforepaste"&&k||D(T)}),K.mainPasteEvent=="beforepaste"&&(F.on("paste",function(T){L||(C(),T.data.preventDefault(),D(T),p("paste")||t.openDialog("paste"))}),F.on("contextmenu",d,null,null,0),F.on("beforepaste",function(T){!T.data||T.data.$.ctrlKey||T.data.$.shiftKey||d()},null,null,0)),F.on("beforecut",function(){!k&&I()});var z;F.attachListener(CKEDITOR.env.ie?F:t.document.getDocumentElement(),"mouseup",function(){z=setTimeout(function(){O()},0)}),t.on("destroy",function(){clearTimeout(z)}),F.on("keyup",O)}function f(F){return{type:F,canUndo:F=="cut",startDisabled:!0,exec:function(){this.type=="cut"&&I();var H,z=this.type;if(CKEDITOR.env.ie)H=p(z);else try{H=t.document.$.execCommand(z,!1,null)}catch{H=!1}return H||t.showNotification(t.lang.clipboard[this.type+"Error"]),H}}}function E(){return{canUndo:!1,async:!0,exec:function(F,H){var z=function(x,S){x&&e(F,x,!!S),F.fire("afterCommandExec",{name:"paste",command:T,returnValue:!!x})},T=this;typeof H=="string"?z({dataValue:H,method:"paste",dataTransfer:K.initPasteDataTransfer()},1):F.getClipboardData(z)}}}function C(){L=1,setTimeout(function(){L=0},100)}function d(){k=1,setTimeout(function(){k=0},10)}function p(F){var H=t.document,z=H.getBody(),T=!1,x=function(){T=!0};return z.on(F,x),7<CKEDITOR.env.version?H.$.execCommand(F):H.$.selection.createRange().execCommand(F),z.removeListener(F,x),T}function I(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var F=t.getSelection(),H,z,T;F.getType()==CKEDITOR.SELECTION_ELEMENT&&(H=F.getSelectedElement())&&(z=F.getRanges()[0],T=t.document.createText(""),T.insertBefore(H),z.setStartBefore(T),z.setEndAfter(H),F.selectRanges([z]),setTimeout(function(){H.getParent()&&(T.remove(),F.selectElement(H))},0))}}function _(F,H){var z=t.document,T=t.editable(),x=function(P){P.cancel()},S;if(!z.getById("cke_pastebin")){var y=t.getSelection(),N=y.createBookmarks();CKEDITOR.env.ie&&y.root.fire("selectionchange");var w=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!T.is("body")||CKEDITOR.env.ie?"div":"body",z);w.setAttributes({id:"cke_pastebin","data-cke-temp":"1"});var R=0,z=z.getWindow();CKEDITOR.env.webkit?(T.append(w),w.addClass("cke_editable"),T.is("body")||(R=T.getComputedStyle("position")!="static"?T:CKEDITOR.dom.element.get(T.$.offsetParent),R=R.getDocumentPosition().y)):T.getAscendant(CKEDITOR.env.ie?"body":"html",1).append(w),w.setStyles({position:"absolute",top:z.getScrollPosition().y-R+10+"px",width:"1px",height:Math.max(1,z.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0}),CKEDITOR.env.safari&&w.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","text")),(R=w.getParent().isReadOnly())?(w.setOpacity(0),w.setAttribute("contenteditable",!0)):w.setStyle(t.config.contentsLangDirection=="ltr"?"left":"right","-1000px"),t.on("selectionChange",x,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(S=T.once("blur",x,null,null,-100)),R&&w.focus(),R=new CKEDITOR.dom.range(w),R.selectNodeContents(w);var b=R.select();CKEDITOR.env.ie&&(S=T.once("blur",function(){t.lockSelection(b)}));var A=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=A),S&&S.removeListener(),CKEDITOR.env.ie&&T.focus(),y.selectBookmarks(N),w.remove();var $;CKEDITOR.env.webkit&&($=w.getFirst())&&$.is&&$.hasClass("Apple-style-span")&&(w=$),t.removeListener("selectionChange",x),H(w.getHtml())},0)}}function m(){if(K.mainPasteEvent=="paste")return t.fire("beforePaste",{type:"auto",method:"paste"}),!1;t.focus(),C();var F=t.focusManager;return F.lock(),t.editable().fire(K.mainPasteEvent)&&!p("paste")?(F.unlock(),!1):(F.unlock(),!0)}function g(F){if(t.mode=="wysiwyg")switch(F.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:F=t.editable(),C(),K.mainPasteEvent=="paste"&&F.fire("beforepaste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:t.fire("saveSnapshot"),setTimeout(function(){t.fire("saveSnapshot")},50)}}function D(F){var H={type:"auto",method:"paste",dataTransfer:K.initPasteDataTransfer(F)};H.dataTransfer.cacheData();var z=t.fire("beforePaste",H)!==!1;z&&K.canClipboardApiBeTrusted(H.dataTransfer,t)?(F.data.preventDefault(),setTimeout(function(){e(t,H)},0)):_(F,function(T){H.dataValue=T.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/ig,""),z&&e(t,H)})}function O(){if(t.mode=="wysiwyg"){var F=v("paste");t.getCommand("cut").setState(v("cut")),t.getCommand("copy").setState(v("copy")),t.getCommand("paste").setState(F),t.fire("pasteState",F)}}function v(F){if(B&&F in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if(F=="paste")return CKEDITOR.TRISTATE_OFF;F=t.getSelection();var H=F.getRanges();return F.getType()==CKEDITOR.SELECTION_NONE||H.length==1&&H[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var K=CKEDITOR.plugins.clipboard,k=0,L=0,B=0;(function(){t.on("key",g),t.on("contentDom",l),t.on("selectionChange",function(F){B=F.data.selection.getRanges()[0].checkReadOnly(),O()}),t.contextMenu&&t.contextMenu.addListener(function(F,H){return B=H.getRanges()[0].checkReadOnly(),{cut:v("cut"),copy:v("copy"),paste:v("paste")}})})(),function(){function F(H,z,T,x,S){var y=t.lang.clipboard[z];t.addCommand(z,T),t.ui.addButton&&t.ui.addButton(H,{label:y,command:z,toolbar:"clipboard,"+x}),t.addMenuItems&&t.addMenuItem(z,{label:y,command:z,group:"clipboard",order:S})}F("Cut","cut",f("cut"),10,1),F("Copy","copy",f("copy"),20,4),F("Paste","paste",E(),30,8)}(),t.getClipboardData=function(F,H){function z(w){w.removeListener(),w.cancel(),H(w.data)}function T(w){w.removeListener(),w.cancel(),N=!0,H({type:y,dataValue:w.data,method:"paste"})}function x(){this.customTitle=F&&F.title}var S=!1,y="auto",N=!1;H||(H=F,F=null),t.on("paste",z,null,null,0),t.on("beforePaste",function(w){w.removeListener(),S=!0,y=w.data.type},null,null,1e3),m()===!1&&(t.removeListener("paste",z),S&&t.fire("pasteDialog",x)?(t.on("pasteDialogCommit",T),t.on("dialogHide",function(w){w.removeListener(),w.data.removeListener("pasteDialogCommit",T),setTimeout(function(){N||H(null)},10)})):H(null))}}function r(t){if(CKEDITOR.env.webkit){if(!t.match(/^[^<]*$/g)&&!t.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!t.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!t.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else if(CKEDITOR.env.gecko){if(!t.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}else return"html";return"htmlifiedtext"}function s(t,l){function f(E){return CKEDITOR.tools.repeat("</p><p>",~~(E/2))+(E%2==1?"<br>":"")}return l=l.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>"),l=l.replace(/<\/?[A-Z]+>/g,function(E){return E.toLowerCase()}),l.match(/^[^<]$/)?l:(CKEDITOR.env.webkit&&-1<l.indexOf("<div>")&&(l=l.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),l.match(/<div>(<br>|)<\/div>/)&&(l="<p>"+l.replace(/(<div>(<br>|)<\/div>)+/g,function(E){return f(E.split("</div><div>").length+1)})+"</p>"),l=l.replace(/<\/div><div>/g,"<br>"),l=l.replace(/<\/?div>/g,"")),CKEDITOR.env.gecko&&t.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(l=l.replace(/^<br><br>$/,"<br>")),-1<l.indexOf("<br><br>")&&(l="<p>"+l.replace(/(<br>){2,}/g,function(E){return f(E.length/4)})+"</p>")),h(t,l))}function a(){function t(){var f={},E;for(E in CKEDITOR.dtd)E.charAt(0)!="$"&&E!="div"&&E!="span"&&(f[E]=1);return f}var l={};return{get:function(f){return f=="plain-text"?l.plainText||(l.plainText=new CKEDITOR.filter("br")):f=="semantic-content"?((f=l.semanticContent)||(f=new CKEDITOR.filter,f.allow({$1:{elements:t(),attributes:!0,styles:!1,classes:!1}}),f=l.semanticContent=f),f):f?new CKEDITOR.filter(f):null}}}function u(t,l,f){l=CKEDITOR.htmlParser.fragment.fromHtml(l);var E=new CKEDITOR.htmlParser.basicWriter;return f.applyTo(l,!0,!1,t.activeEnterMode),l.writeHtml(E),E.getHtml()}function h(t,l){return t.enterMode==CKEDITOR.ENTER_BR?l=l.replace(/(<\/p><p>)+/g,function(f){return CKEDITOR.tools.repeat("<br>",f.length/7*2)}).replace(/<\/?p>/g,""):t.enterMode==CKEDITOR.ENTER_DIV&&(l=l.replace(/<(\/)?p>/g,"<$1div>")),l}function i(t){t.data.preventDefault(),t.data.$.dataTransfer.dropEffect="none"}function o(t){var l=CKEDITOR.plugins.clipboard;t.on("contentDom",function(){function f(g,D,O){D.select(),e(t,{dataTransfer:O,method:"drop"},1),O.sourceEditor.fire("saveSnapshot"),O.sourceEditor.editable().extractHtmlFromRange(g),O.sourceEditor.getSelection().selectRanges([g]),O.sourceEditor.fire("saveSnapshot")}function E(g,D){g.select(),e(t,{dataTransfer:D,method:"drop"},1),l.resetDragDataTransfer()}function C(g,D,O){var v={$:g.data.$,target:g.data.getTarget()};D&&(v.dragRange=D),O&&(v.dropRange=O),t.fire(g.name,v)===!1&&g.data.preventDefault()}function d(g){return g.type!=CKEDITOR.NODE_ELEMENT&&(g=g.getParent()),g.getChildCount()}var p=t.editable(),I=CKEDITOR.plugins.clipboard.getDropTarget(t),_=t.ui.space("top"),m=t.ui.space("bottom");l.preventDefaultDropOnElement(_),l.preventDefaultDropOnElement(m),p.attachListener(I,"dragstart",C),p.attachListener(t,"dragstart",l.resetDragDataTransfer,l,null,1),p.attachListener(t,"dragstart",function(g){l.initDragDataTransfer(g,t)},null,null,2),p.attachListener(t,"dragstart",function(){var g=l.dragRange=t.getSelection().getRanges()[0];CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(l.dragStartContainerChildCount=g?d(g.startContainer):null,l.dragEndContainerChildCount=g?d(g.endContainer):null)},null,null,100),p.attachListener(I,"dragend",C),p.attachListener(t,"dragend",l.initDragDataTransfer,l,null,1),p.attachListener(t,"dragend",l.resetDragDataTransfer,l,null,100),p.attachListener(I,"dragover",function(g){var D=g.data.getTarget();(D&&D.is&&D.is("html")||CKEDITOR.env.ie&&CKEDITOR.plugins.clipboard.isFileApiSupported&&g.data.$.dataTransfer.types.contains("Files"))&&g.data.preventDefault()}),p.attachListener(I,"drop",function(g){g.data.preventDefault();var D=g.data.getTarget();if(!D.isReadOnly()||D.type==CKEDITOR.NODE_ELEMENT&&D.is("html")){var D=l.getRangeAtDropPosition(g,t),O=l.dragRange;D&&C(g,O,D)}}),p.attachListener(t,"drop",l.initDragDataTransfer,l,null,1),p.attachListener(t,"drop",function(g){if(g=g.data){var D=g.dropRange,O=g.dragRange,v=g.dataTransfer;v.getTransferType(t)==CKEDITOR.DATA_TRANSFER_INTERNAL?setTimeout(function(){l.internalDrop(O,D,v,t)},0):v.getTransferType(t)==CKEDITOR.DATA_TRANSFER_CROSS_EDITORS?f(O,D,v):E(D,v)}},null,null,9999)})}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(t){var l,f=a();t.config.forcePasteAsPlainText?l="plain-text":t.config.pasteFilter?l=t.config.pasteFilter:!CKEDITOR.env.webkit||"pasteFilter"in t.config||(l="semantic-content"),t.pasteFilter=f.get(l),c(t),o(t),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),t.on("paste",function(E){if(E.data.dataTransfer||(E.data.dataTransfer=new CKEDITOR.plugins.clipboard.dataTransfer),!E.data.dataValue){var C=E.data.dataTransfer,d=C.getData("text/html");d?(E.data.dataValue=d,E.data.type="html"):(d=C.getData("text/plain"))&&(E.data.dataValue=t.editable().transformPlainTextToHtml(d),E.data.type="text")}},null,null,1),t.on("paste",function(E){var C=E.data.dataValue,d=CKEDITOR.dtd.$block;if(-1<C.indexOf("Apple-")&&(C=C.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),E.data.type!="html"&&(C=C.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(m,g){return g.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")})),-1<C.indexOf('<br class="Apple-interchange-newline">')&&(E.data.startsWithEOL=1,E.data.preSniffing="html",C=C.replace(/<br class="Apple-interchange-newline">/,"")),C=C.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),C.match(/^<[^<]+cke_(editable|contents)/i)){var p,I,_=new CKEDITOR.dom.element("div");for(_.setHtml(C);_.getChildCount()==1&&(p=_.getFirst())&&p.type==CKEDITOR.NODE_ELEMENT&&(p.hasClass("cke_editable")||p.hasClass("cke_contents"));)_=I=p;I&&(C=I.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?C=C.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(m,g){return g.toLowerCase()in d?(E.data.preSniffing="html","<"+g):m}):CKEDITOR.env.webkit?C=C.replace(/<\/(\w+)><div><br><\/div>$/,function(m,g){return g in d?(E.data.endsWithEOL=1,"</"+g+">"):m}):CKEDITOR.env.gecko&&(C=C.replace(/(\s)<br>$/,"$1")),E.data.dataValue=C},null,null,3),t.on("paste",function(E){E=E.data;var C=E.type,d=E.dataValue,p,I=t.config.clipboard_defaultContentType||"html",_=E.dataTransfer.getTransferType(t);p=C=="html"||E.preSniffing=="html"?"html":r(d),p=="htmlifiedtext"&&(d=s(t.config,d)),C=="text"&&p=="html"?d=u(t,d,f.get("plain-text")):_==CKEDITOR.DATA_TRANSFER_EXTERNAL&&t.pasteFilter&&!E.dontFilter&&(d=u(t,d,t.pasteFilter)),E.startsWithEOL&&(d='<br data-cke-eol="1">'+d),E.endsWithEOL&&(d+='<br data-cke-eol="1">'),C=="auto"&&(C=p=="html"||I=="html"?"html":"text"),E.type=C,E.dataValue=d,delete E.preSniffing,delete E.startsWithEOL,delete E.endsWithEOL},null,null,6),t.on("paste",function(E){E=E.data,E.dataValue&&(t.insertHtml(E.dataValue,E.type,E.range),setTimeout(function(){t.fire("afterPaste")},0))},null,null,1e3),t.on("pasteDialog",function(E){setTimeout(function(){t.openDialog("paste",E.data)},0)})}}),CKEDITOR.plugins.clipboard={isCustomCopyCutSupported:!CKEDITOR.env.ie&&!CKEDITOR.env.iOS,isCustomDataTypesSupported:!CKEDITOR.env.ie,isFileApiSupported:!CKEDITOR.env.ie||9<CKEDITOR.env.version,mainPasteEvent:CKEDITOR.env.ie&&!CKEDITOR.env.edge?"beforepaste":"paste",canClipboardApiBeTrusted:function(t,l){return!!(t.getTransferType(l)!=CKEDITOR.DATA_TRANSFER_EXTERNAL||CKEDITOR.env.chrome&&!t.isEmpty()||CKEDITOR.env.gecko&&(t.getData("text/html")||t.getFilesCount()))},getDropTarget:function(t){var l=t.editable();return CKEDITOR.env.ie&&9>CKEDITOR.env.version||l.isInline()?l:t.document},fixSplitNodesAfterDrop:function(t,l,f,E){function C(p,I,_){var m=p;if(m.type==CKEDITOR.NODE_TEXT&&(m=p.getParent()),m.equals(I)&&_!=I.getChildCount())return p=l.startContainer.getChild(l.startOffset-1),I=l.startContainer.getChild(l.startOffset),p&&p.type==CKEDITOR.NODE_TEXT&&I&&I.type==CKEDITOR.NODE_TEXT&&(_=p.getLength(),p.setText(p.getText()+I.getText()),I.remove(),l.setStart(p,_),l.collapse(!0)),!0}var d=l.startContainer;typeof E=="number"&&typeof f=="number"&&d.type==CKEDITOR.NODE_ELEMENT&&(C(t.startContainer,d,f)||C(t.endContainer,d,E))},isDropRangeAffectedByDragRange:function(t,l){var f=l.startContainer,E=l.endOffset;return!!(t.endContainer.equals(f)&&t.endOffset<=E||t.startContainer.getParent().equals(f)&&t.startContainer.getIndex()<E||t.endContainer.getParent().equals(f)&&t.endContainer.getIndex()<E)},internalDrop:function(t,l,f,E){var C=CKEDITOR.plugins.clipboard,d=E.editable(),p,I;E.fire("saveSnapshot"),E.fire("lockSnapshot",{dontUpdate:1}),CKEDITOR.env.ie&&10>CKEDITOR.env.version&&this.fixSplitNodesAfterDrop(t,l,C.dragStartContainerChildCount,C.dragEndContainerChildCount),(I=this.isDropRangeAffectedByDragRange(t,l))||(p=t.createBookmark(!1)),C=l.clone().createBookmark(!1),I&&(p=t.createBookmark(!1)),t=p.startNode,l=p.endNode,I=C.startNode,l&&t.getPosition(I)&CKEDITOR.POSITION_PRECEDING&&l.getPosition(I)&CKEDITOR.POSITION_FOLLOWING&&I.insertBefore(t),t=E.createRange(),t.moveToBookmark(p),d.extractHtmlFromRange(t,1),l=E.createRange(),l.moveToBookmark(C),e(E,{dataTransfer:f,method:"drop",range:l},1),E.fire("unlockSnapshot")},getRangeAtDropPosition:function(t,l){var f=t.data.$,E=f.clientX,C=f.clientY,d=l.getSelection(!0).getRanges()[0],p=l.createRange();if(t.data.testRange)return t.data.testRange;if(document.caretRangeFromPoint)f=l.document.$.caretRangeFromPoint(E,C),p.setStart(CKEDITOR.dom.node(f.startContainer),f.startOffset),p.collapse(!0);else if(f.rangeParent)p.setStart(CKEDITOR.dom.node(f.rangeParent),f.rangeOffset),p.collapse(!0);else{if(CKEDITOR.env.ie&&8<CKEDITOR.env.version&&d&&l.editable().hasFocus)return d;if(document.body.createTextRange){l.focus(),f=l.document.getBody().$.createTextRange();try{for(var I=!1,_=0;20>_&&!I;_++){if(!I)try{f.moveToPoint(E,C-_),I=!0}catch{}if(!I)try{f.moveToPoint(E,C+_),I=!0}catch{}}if(I){var m="cke-temp-"+new Date().getTime();f.pasteHTML('<span id="'+m+'">​</span>');var g=l.document.getById(m);p.moveToPosition(g,CKEDITOR.POSITION_BEFORE_START),g.remove()}else{var D=l.document.$.elementFromPoint(E,C),O=new CKEDITOR.dom.element(D),v;if(O.equals(l.editable())||O.getName()=="html")return d&&d.startContainer&&!d.startContainer.equals(l.editable())?d:null;v=O.getClientRect(),E<v.left?p.setStartAt(O,CKEDITOR.POSITION_AFTER_START):p.setStartAt(O,CKEDITOR.POSITION_BEFORE_END),p.collapse(!0)}}catch{return null}}else return null}return p},initDragDataTransfer:function(t,l){var f=t.data.$?t.data.$.dataTransfer:null,E=new this.dataTransfer(f,l);f?this.dragData&&E.id==this.dragData.id?E=this.dragData:this.dragData=E:this.dragData?E=this.dragData:this.dragData=E,t.data.dataTransfer=E},resetDragDataTransfer:function(){this.dragData=null},initPasteDataTransfer:function(t,l){if(this.isCustomCopyCutSupported&&t&&t.data&&t.data.$){var f=new this.dataTransfer(t.data.$.clipboardData,l);return this.copyCutData&&f.id==this.copyCutData.id?(f=this.copyCutData,f.$=t.data.$.clipboardData):this.copyCutData=f,f}return new this.dataTransfer(null,l)},preventDefaultDropOnElement:function(t){t&&t.on("dragover",i)}};var n=CKEDITOR.plugins.clipboard.isCustomDataTypesSupported?"cke/id":"Text";CKEDITOR.plugins.clipboard.dataTransfer=function(t,l){if(t&&(this.$=t),this._={metaRegExp:/^<meta.*?>/i,bodyRegExp:/<body(?:[\s\S]*?)>([\s\S]*)<\/body>/i,fragmentRegExp:/\x3c!--(?:Start|End)Fragment--\x3e/g,data:{},files:[],normalizeType:function(f){return f=f.toLowerCase(),f=="text"||f=="text/plain"?"Text":f=="url"?"URL":f}},this.id=this.getData(n),this.id||(this.id=n=="Text"?"":"cke-"+CKEDITOR.tools.getUniqueId()),n!="Text")try{this.$.setData(n,this.id)}catch{}l&&(this.sourceEditor=l,this.setData("text/html",l.getSelectedHtml(1)),n=="Text"||this.getData("text/plain")||this.setData("text/plain",l.getSelection().getSelectedText()))},CKEDITOR.DATA_TRANSFER_INTERNAL=1,CKEDITOR.DATA_TRANSFER_CROSS_EDITORS=2,CKEDITOR.DATA_TRANSFER_EXTERNAL=3,CKEDITOR.plugins.clipboard.dataTransfer.prototype={getData:function(t){t=this._.normalizeType(t);var l=this._.data[t];if(l==null||l==="")try{l=this.$.getData(t)}catch{}return(l==null||l==="")&&(l=""),t=="text/html"?(l=l.replace(this._.metaRegExp,""),(t=this._.bodyRegExp.exec(l))&&t.length&&(l=t[1],l=l.replace(this._.fragmentRegExp,""))):t=="Text"&&CKEDITOR.env.gecko&&this.getFilesCount()&&l.substring(0,7)=="file://"&&(l=""),l},setData:function(t,l){if(t=this._.normalizeType(t),this._.data[t]=l,CKEDITOR.plugins.clipboard.isCustomDataTypesSupported||t=="URL"||t=="Text"){n=="Text"&&t=="Text"&&(this.id=l);try{this.$.setData(t,l)}catch{}}},getTransferType:function(t){return this.sourceEditor?this.sourceEditor==t?CKEDITOR.DATA_TRANSFER_INTERNAL:CKEDITOR.DATA_TRANSFER_CROSS_EDITORS:CKEDITOR.DATA_TRANSFER_EXTERNAL},cacheData:function(){function t(C){C=l._.normalizeType(C);var d=l.getData(C);d&&(l._.data[C]=d)}if(this.$){var l=this,f,E;if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(f=0;f<this.$.types.length;f++)t(this.$.types[f])}else t("Text"),t("URL");if(E=this._getImageFromClipboard(),this.$&&this.$.files||E){for(this._.files=[],f=0;f<this.$.files.length;f++)this._.files.push(this.$.files[f]);this._.files.length===0&&E&&this._.files.push(E)}}},getFilesCount:function(){return this._.files.length?this._.files.length:this.$&&this.$.files&&this.$.files.length?this.$.files.length:this._getImageFromClipboard()?1:0},getFile:function(t){return this._.files.length?this._.files[t]:this.$&&this.$.files&&this.$.files.length?this.$.files[t]:t===0?this._getImageFromClipboard():void 0},isEmpty:function(){var t={},l;if(this.getFilesCount())return!1;for(l in this._.data)t[l]=1;if(this.$)if(CKEDITOR.plugins.clipboard.isCustomDataTypesSupported){if(this.$.types)for(var f=0;f<this.$.types.length;f++)t[this.$.types[f]]=1}else t.Text=1,t.URL=1;n!="Text"&&(t[n]=0);for(l in t)if(t[l]&&this.getData(l)!=="")return!1;return!0},_getImageFromClipboard:function(){var t;if(this.$&&this.$.items&&this.$.items[0])try{if((t=this.$.items[0].getAsFile())&&t.type)return t}catch{}}}}(),function(){CKEDITOR.plugins.add("panel",{beforeInit:function(s){s.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(s,a){a&&CKEDITOR.tools.extend(this,a),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=s,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(s){return new CKEDITOR.ui.panel(s)}};var e=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),c=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),r=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');CKEDITOR.ui.panel.prototype={render:function(s,a){this.getHolderElement=function(){var i=this._.holder;if(!i){if(this.isFramed){var i=this.document.getById(this.id+"_frame"),o=i.getParent(),i=i.getFrameDocument();CKEDITOR.env.iOS&&o.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),o=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),i.write(r.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+o+");"},u))),i.getWindow().$.CKEDITOR=CKEDITOR,i.on("keydown",function(t){var l=t.data.getKeystroke(),f=this.document.getById(this.id).getAttribute("dir");(this._.onKeyDown&&this._.onKeyDown(l)===!1||(l==27||l==(f=="rtl"?39:37))&&this.onEscape&&this.onEscape(l)===!1)&&t.data.preventDefault()},this),i=i.getBody(),i.unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(o)}else i=this.document.getById(this.id);this._.holder=i}return i};var u={editorId:s.id,id:this.id,langCode:s.langCode,dir:s.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":s.config.baseFloatZIndex+1};if(this.isFramed){var h=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";u.frame=c.output({id:this.id+"_frame",src:h})}return h=e.output(u),a&&a.push(h),h},addBlock:function(s,a){return a=this._.blocks[s]=a instanceof CKEDITOR.ui.panel.block?a:new CKEDITOR.ui.panel.block(this.getHolderElement(),a),this._.currentBlock||this.showBlock(s),a},getBlock:function(s){return this._.blocks[s]},showBlock:function(s){s=this._.blocks[s];var a=this._.currentBlock,u=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return a&&a.hide(),this._.currentBlock=s,CKEDITOR.fire("ariaWidget",u),s._.focusIndex=-1,this._.onKeyDown=s.onKeyDown&&CKEDITOR.tools.bind(s.onKeyDown,s),s.show(),s},destroy:function(){this.element&&this.element.remove()}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(s,a){this.element=s.append(s.getDocument().createElement("div",{attributes:{tabindex:-1,class:"cke_panel_block"},styles:{display:"none"}})),a&&CKEDITOR.tools.extend(this,a),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(s){s!=-1&&(s=this.element.getElementsByTag("a").getItem(this._.focusIndex=s),CKEDITOR.env.webkit&&s.getDocument().getWindow().focus(),s.focus(),this.onMark&&this.onMark(s))}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){this.onHide&&this.onHide.call(this)===!0||this.element.setStyle("display","none")},onKeyDown:function(s,a){var u=this.keys[s];switch(u){case"next":for(var h=this._.focusIndex,u=this.element.getElementsByTag("a"),i;i=u.getItem(++h);)if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=h,i.focus();break}return i||a?!1:(this._.focusIndex=-1,this.onKeyDown(s,1));case"prev":for(h=this._.focusIndex,u=this.element.getElementsByTag("a");0<h&&(i=u.getItem(--h));){if(i.getAttribute("_cke_focus")&&i.$.offsetWidth){this._.focusIndex=h,i.focus();break}i=null}return i||a?!1:(this._.focusIndex=u.count(),this.onKeyDown(s,1));case"click":case"mouseup":return h=this._.focusIndex,(i=0<=h&&this.element.getElementsByTag("a").getItem(h))&&(i.$[u]?i.$[u]():i.$["on"+u]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function e(r,s,a,u,h){h=CKEDITOR.tools.genKey(s.getUniqueId(),a.getUniqueId(),r.lang.dir,r.uiColor||"",u.css||"",h||"");var i=c[h];return i||(i=c[h]=new CKEDITOR.ui.panel(s,u),i.element=a.append(CKEDITOR.dom.element.createFromHtml(i.render(r),s)),i.element.setStyles({display:"none",position:"absolute"})),i}var c={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(r,s,a,u){function h(){t.hide()}a.forceIFrame=1,a.toolbarRelated&&r.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(s=CKEDITOR.document.getById("cke_"+r.name));var i=s.getDocument();u=e(r,i,s,a,u||0);var o=u.element,n=o.getFirst(),t=this;o.disableContextMenu(),this.element=o,this._={editor:r,panel:u,parentElement:s,definition:a,document:i,iframe:n,children:[],dir:r.lang.dir,showBlockParams:null},r.on("mode",h),r.on("resize",h),i.getWindow().on("resize",function(){this.reposition()},this)},proto:{addBlock:function(r,s){return this._.panel.addBlock(r,s)},addListBlock:function(r,s){return this._.panel.addListBlock(r,s)},getBlock:function(r){return this._.panel.getBlock(r)},showBlock:function(r,s,a,u,h,i){var o=this._.panel,n=o.showBlock(r);this._.showBlockParams=[].slice.call(arguments),this.allowBlur(!1);var l=this._.editor.editable();this._.returnFocus=l.hasFocus?l:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement),this._.hideTimeout=0;var t=this.element,l=this._.iframe,l=CKEDITOR.env.ie&&!CKEDITOR.env.edge?l:new CKEDITOR.dom.window(l.$.contentWindow),C=t.getDocument(),f=this._.parentElement.getPositionedAncestor(),E=s.getDocumentPosition(C),C=f?f.getDocumentPosition(C):{x:0,y:0},d=this._.dir=="rtl",p=E.x+(u||0)-C.x,I=E.y+(h||0)-C.y;!d||a!=1&&a!=4?d||a!=2&&a!=3||(p+=s.$.offsetWidth-1):p+=s.$.offsetWidth,(a==3||a==4)&&(I+=s.$.offsetHeight-1),this._.panel._.offsetParentId=s.getId(),t.setStyles({top:I+"px",left:0,display:""}),t.setOpacity(0),t.getFirst().removeStyle("width"),this._.editor.focusManager.add(l),this._.blurSet||(CKEDITOR.event.useCapture=!0,l.on("blur",function(_){function m(){delete this._.returnFocus,this.hide()}this.allowBlur()&&_.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(CKEDITOR.env.iOS?this._.hideTimeout||(this._.hideTimeout=CKEDITOR.tools.setTimeout(m,0,this)):m.call(this))},this),l.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.env.iOS&&(l.on("touchstart",function(){clearTimeout(this._.hideTimeout)},this),l.on("touchend",function(){this._.hideTimeout=0,this.focus()},this)),CKEDITOR.event.useCapture=!1,this._.blurSet=1),o.onEscape=CKEDITOR.tools.bind(function(_){if(this.onEscape&&this.onEscape(_)===!1)return!1},this),CKEDITOR.tools.setTimeout(function(){var _=CKEDITOR.tools.bind(function(){var K=t;if(K.removeStyle("width"),n.autoSize){var m=n.element.getDocument(),m=(CKEDITOR.env.webkit?n.element:m.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<m&&(m+=(K.$.offsetWidth||0)-(K.$.clientWidth||0)+3),K.setStyle("width",m+10+"px"),m=n.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&0<m&&(m+=(K.$.offsetHeight||0)-(K.$.clientHeight||0)+3),K.setStyle("height",m+"px"),o._.currentBlock.element.setStyle("display","none").removeStyle("display")}else K.removeStyle("height");d&&(p-=t.$.offsetWidth),t.setStyle("left",p+"px");var m=o.element.getWindow(),K=t.$.getBoundingClientRect(),m=m.getViewPaneSize(),g=K.width||K.right-K.left,D=K.height||K.bottom-K.top,O=d?K.right:m.width-K.left,v=d?m.width-K.right:K.left;d?O<g&&(p=v>g?p+g:m.width>g?p-K.left:p-K.right+m.width):O<g&&(p=v>g?p-g:m.width>g?p-K.right+m.width:p-K.left),g=K.top,m.height-K.top<D&&(I=g>D?I-D:m.height>D?I-K.bottom+m.height:I-K.top),CKEDITOR.env.ie&&(m=K=new CKEDITOR.dom.element(t.$.offsetParent),m.getName()=="html"&&(m=m.getDocument().getBody()),m.getComputedStyle("direction")=="rtl"&&(p=CKEDITOR.env.ie8Compat?p-2*t.getDocument().getDocumentElement().$.scrollLeft:p-(K.$.scrollWidth-K.$.clientWidth)));var K=t.getFirst(),k;(k=K.getCustomData("activePanel"))&&k.onHide&&k.onHide.call(this,1),K.setCustomData("activePanel",this),t.setStyles({top:I+"px",left:p+"px"}),t.setOpacity(1),i&&i()},this);o.isLoaded?_():o.onLoad=_,CKEDITOR.tools.setTimeout(function(){var m=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),n.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=m),this.allowBlur(!0),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},reposition:function(){var r=this._.showBlockParams;this.visible&&this._.showBlockParams&&(this.hide(),this.showBlock.apply(this,r))},focus:function(){if(CKEDITOR.env.webkit){var r=CKEDITOR.document.getActive();r&&!r.equals(this._.iframe)&&r.$.blur()}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var r=this._.iframe.getFrameDocument().getActive();r&&r.is("a")&&(this._.lastFocused=r)},hide:function(r){this.visible&&(!this.onHide||this.onHide.call(this)!==!0)&&(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(r=r&&this._.returnFocus)&&(CKEDITOR.env.webkit&&r.type&&r.getWindow().$.focus(),r.focus()),delete this._.lastFocused,this._.showBlockParams=null,this._.editor.fire("panelHide",this))},allowBlur:function(r){var s=this._.panel;return r!==void 0&&(s.allowBlur=r),s.allowBlur},showAsChild:function(r,s,a,u,h,i){(this._.activeChild!=r||r._.panel._.offsetParentId!=a.getId())&&(this.hideChild(),r.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=r,this._.focused=!1,r.showBlock(s,a,u,h,i),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){r.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(r){var s=this._.activeChild;s&&(delete s.onHide,delete this._.activeChild,s.hide(),r&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var r=CKEDITOR.tools.isEmpty(CKEDITOR.instances),s;for(s in c){var a=c[s];r?a.destroy():a.element.hide()}r&&(c={})})}(),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(e){for(var c=e.config.menu_groups.split(","),r=e._.menuGroups={},s=e._.menuItems={},a=0;a<c.length;a++)r[c[a]]=a+1;e.addMenuGroup=function(u,h){r[u]=h||100},e.addMenuItem=function(u,h){r[h.group]&&(s[u]=new CKEDITOR.menuItem(this,u,h))},e.addMenuItems=function(u){for(var h in u)this.addMenuItem(h,u[h])},e.getMenuItem=function(u){return s[u]},e.removeMenuItem=function(u){delete s[u]}}}),function(){function e(a){a.sort(function(u,h){return u.group<h.group?-1:u.group>h.group?1:u.order<h.order?-1:u.order>h.order?1:0})}var c='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1"_cke_focus=1 hidefocus="true" role="{role}" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked}';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(c+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(c+=' onblur="this.style.cssText = this.style.cssText;"');var c=c+(' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">'),r=CKEDITOR.addTemplate("menuItem",c+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{arrowHtml}</span></a></span>'),s=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>');CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(a,u){u=this._.definition=u||{},this.id=CKEDITOR.tools.getNextId(),this.editor=a,this.items=[],this._.listeners=[],this._.level=u.level||1;var h=CKEDITOR.tools.extend({},u.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),i=h.block.attributes=h.attributes||{};!i.role&&(i.role="menu"),this._.panelDefinition=h},_:{onShow:function(){var a=this.editor.getSelection(),u=a&&a.getStartElement(),h=this.editor.elementPath(),i=this._.listeners;this.removeAll();for(var o=0;o<i.length;o++){var n=i[o](u,a,h);if(n)for(var t in n){var l=this.editor.getMenuItem(t);!l||l.command&&!this.editor.getCommand(l.command).state||(l.state=n[t],this.add(l))}}},onClick:function(a){this.hide(),a.onClick?a.onClick():a.command&&this.editor.execCommand(a.command)},onEscape:function(a){var u=this.parent;return u?u._.panel.hideChild(1):a==27&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(a){var u=this._.subMenu,h=this.items[a];if(h=h.getItems&&h.getItems()){u?u.removeAll():(u=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),u.parent=this,u._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var i in h){var o=this.editor.getMenuItem(i);o&&(o.state=h[i],u.add(o))}var n=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+String(a));setTimeout(function(){u.show(n,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(a){a.order||(a.order=this.items.length),this.items.push(a)},removeAll:function(){this.items=[]},show:function(a,u,h,i){if(!(!this.parent&&(this._.onShow(),!this.items.length))){u=u||(this.editor.lang.dir=="rtl"?2:1);var o=this.items,n=this.editor,t=this._.panel,l=this._.element;if(!t){t=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level),t.onEscape=CKEDITOR.tools.bind(function(I){if(this._.onEscape(I)===!1)return!1},this),t.onShow=function(){t._.panel.getHolderElement().getParent().addClass("cke").addClass("cke_reset_all")},t.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),l=t.addBlock(this.id,this._.panelDefinition.block),l.autoSize=!0;var f=l.keys;f[40]="next",f[9]="next",f[38]="prev",f[CKEDITOR.SHIFT+9]="prev",f[n.lang.dir=="rtl"?37:39]=CKEDITOR.env.ie?"mouseup":"click",f[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(f[13]="mouseup"),l=this._.element=l.element,f=l.getDocument(),f.getBody().setStyle("overflow","hidden"),f.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(I){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,n.config.menu_subMenuDelay||400,this,[I])},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(I){var _=this.items[I];_.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):_.getItems?this._.showSubMenu(I):this._.onClick(_)},this)}e(o);for(var f=n.elementPath(),f=['<div class="cke_menu'+(f&&f.direction()!=n.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],E=o.length,C=E&&o[0].group,d=0;d<E;d++){var p=o[d];C!=p.group&&(f.push('<div class="cke_menuseparator" role="separator"></div>'),C=p.group),p.render(this,d,f)}f.push("</div>"),l.setHtml(f.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(t,this.id,a,u,h,i):t.showBlock(this.id,a,u,h,i),n.fire("menuShow",[t])}},addListener:function(a){this._.listeners.push(a)},hide:function(a){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(a)}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(a,u,h){CKEDITOR.tools.extend(this,h,{order:0,className:"cke_menubutton__"+u}),this.group=a._.menuGroups[this.group],this.editor=a,this.name=u},proto:{render:function(a,u,h){var i=a.id+String(u),o=typeof this.state>"u"?CKEDITOR.TRISTATE_OFF:this.state,n="",t=o==CKEDITOR.TRISTATE_ON?"on":o==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(n=' aria-checked="'+(o==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var l=this.getItems,f="&#"+(this.editor.lang.dir=="rtl"?"9668":"9658")+";",E=this.name;this.icon&&!/\./.test(this.icon)&&(E=this.icon),a={id:i,name:this.name,iconName:E,label:this.label,cls:this.className||"",state:t,hasPopup:l?"true":"false",disabled:o==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:a._.itemOverFn,moveOutFn:a._.itemOutFn,clickFn:a._.itemClickFn,index:u,iconStyle:CKEDITOR.skin.getIconStyle(E,this.editor.lang.dir=="rtl",E==this.icon?null:this.icon,this.iconOffset),arrowHtml:l?s.output({label:f}):"",role:this.role?this.role:"menuitem",ariaChecked:n},r.output(a,h)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(e){this.base.call(this,e,{panel:{className:"cke_menu_panel",attributes:{"aria-label":e.lang.contextmenu.options}}})},proto:{addTarget:function(e,c){if(e.on("contextmenu",function(a){a=a.data;var u=CKEDITOR.env.webkit?r:CKEDITOR.env.mac?a.$.metaKey:a.$.ctrlKey;if(!c||!u){if(a.preventDefault(),CKEDITOR.env.mac&&CKEDITOR.env.webkit){var u=this.editor,i=new CKEDITOR.dom.elementPath(a.getTarget(),u.editable()).contains(function(E){return E.hasAttribute("contenteditable")},!0);i&&i.getAttribute("contenteditable")=="false"&&u.getSelection().fake(i)}var i=a.getTarget().getDocument(),h=a.getTarget().getDocument().getDocumentElement(),u=!i.equals(CKEDITOR.document),i=i.getWindow().getScrollPosition(),o=u?a.$.clientX:a.$.pageX||i.x+a.$.clientX,n=u?a.$.clientY:a.$.pageY||i.y+a.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(h,null,o,n)},CKEDITOR.env.ie?200:0,this)}},this),CKEDITOR.env.webkit){var r,s=function(){r=0};e.on("keydown",function(a){r=CKEDITOR.env.mac?a.data.$.metaKey:a.data.$.ctrlKey}),e.on("keyup",s),e.on("contextmenu",s)}},open:function(e,c,r,s){this.editor.focus(),e=e||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(e,c,r,s)}}})},beforeInit:function(e){var c=e.contextMenu=new CKEDITOR.plugins.contextMenu(e);e.on("contentDom",function(){c.addTarget(e.editable(),e.config.browserContextMenuOnCtrl!==!1)}),e.addCommand("contextMenu",{exec:function(){e.contextMenu.open(e.document.getBody())}}),e.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),e.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),CKEDITOR.plugins.add("resize",{init:function(e){function c(f){var E=o.width,C=o.height,d=E+(f.data.$.screenX-i.x)*(u=="rtl"?-1:1);f=C+(f.data.$.screenY-i.y),n&&(E=Math.max(s.resize_minWidth,Math.min(d,s.resize_maxWidth))),t&&(C=Math.max(s.resize_minHeight,Math.min(f,s.resize_maxHeight))),e.resize(n?E:null,C)}function r(){CKEDITOR.document.removeListener("mousemove",c),CKEDITOR.document.removeListener("mouseup",r),e.document&&(e.document.removeListener("mousemove",c),e.document.removeListener("mouseup",r))}var s=e.config,a=e.ui.spaceId("resizer"),u=e.element?e.element.getDirection(1):"ltr";if(!s.resize_dir&&(s.resize_dir="vertical"),s.resize_maxWidth===void 0&&(s.resize_maxWidth=3e3),s.resize_maxHeight===void 0&&(s.resize_maxHeight=3e3),s.resize_minWidth===void 0&&(s.resize_minWidth=750),s.resize_minHeight===void 0&&(s.resize_minHeight=250),s.resize_enabled!==!1){var h=null,i,o,n=(s.resize_dir=="both"||s.resize_dir=="horizontal")&&s.resize_minWidth!=s.resize_maxWidth,t=(s.resize_dir=="both"||s.resize_dir=="vertical")&&s.resize_minHeight!=s.resize_maxHeight,l=CKEDITOR.tools.addFunction(function(f){h||(h=e.getResizable()),o={width:h.$.offsetWidth||0,height:h.$.offsetHeight||0},i={x:f.screenX,y:f.screenY},s.resize_minWidth>o.width&&(s.resize_minWidth=o.width),s.resize_minHeight>o.height&&(s.resize_minHeight=o.height),CKEDITOR.document.on("mousemove",c),CKEDITOR.document.on("mouseup",r),e.document&&(e.document.on("mousemove",c),e.document.on("mouseup",r)),f.preventDefault&&f.preventDefault()});e.on("destroy",function(){CKEDITOR.tools.removeFunction(l)}),e.on("uiSpace",function(f){if(f.data.space=="bottom"){var E="";n&&!t&&(E=" cke_resizer_horizontal"),!n&&t&&(E=" cke_resizer_vertical");var C='<span id="'+a+'" class="cke_resizer'+E+" cke_resizer_"+u+'" title="'+CKEDITOR.tools.htmlEncode(e.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+l+', event)">'+(u=="ltr"?"◢":"◣")+"</span>";u=="ltr"&&E=="ltr"?f.data.html+=C:f.data.html=C+f.data.html}},e,null,100),e.on("maximize",function(f){e.ui.space("resizer")[f.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),function(){var e='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":` href="javascript:void('{titleJs}')"`)+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var e=e+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"'),e=e+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span>{arrowHtml}</a>',c=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),r=CKEDITOR.addTemplate("button",e);CKEDITOR.plugins.add("button",{beforeInit:function(s){s.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(s){CKEDITOR.tools.extend(this,s,{title:s.label,click:s.click||function(a){a.execCommand(s.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(s){return new CKEDITOR.ui.button(s)}},CKEDITOR.ui.button.prototype={render:function(s,a){function u(){var I=s.mode;I&&(I=this.modes[I]?C[I]!==void 0?C[I]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,I=s.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:I,this.setState(I),this.refresh&&this.refresh())}var h=CKEDITOR.env,i=this._.id=CKEDITOR.tools.getNextId(),o="",n=this.command,t;this._.editor=s;var l={id:i,button:this,editor:s,focus:function(){CKEDITOR.document.getById(i).focus()},execute:function(){this.button.click(s)},attach:function(I){this.button.attach(I)}},f=CKEDITOR.tools.addFunction(function(I){if(l.onkey)return I=new CKEDITOR.dom.event(I),l.onkey(l,I.getKeystroke())!==!1}),E=CKEDITOR.tools.addFunction(function(I){var _;return l.onfocus&&(_=l.onfocus(l,new CKEDITOR.dom.event(I))!==!1),_});if(l.clickFn=t=CKEDITOR.tools.addFunction(function(){l.execute(),h.iOS&&s.focus()}),this.modes){var C={};s.on("beforeModeUnload",function(){s.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(C[s.mode]=this._.state)},this),s.on("activeFilterChange",u,this),s.on("mode",u,this),!this.readOnly&&s.on("readOnly",u,this)}else n&&(n=s.getCommand(n))&&(n.on("state",function(){this.setState(n.state)},this),o+=n.state==CKEDITOR.TRISTATE_ON?"on":n.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");this.directional&&s.on("contentDirChanged",function(I){var _=CKEDITOR.document.getById(this._.id),m=_.getFirst();I=I.data,I!=s.lang.dir?_.addClass("cke_"+I):_.removeClass("cke_ltr").removeClass("cke_rtl"),m.setAttribute("style",CKEDITOR.skin.getIconStyle(p,I=="rtl",this.icon,this.iconOffset))},this),n||(o+="off");var d=this.name||this.command,p=d;return this.icon&&!/\./.test(this.icon)&&(p=this.icon,this.icon=null),o={id:i,name:d,iconName:p,label:this.label,cls:this.className||"",state:o,ariaDisabled:o=="disabled"?"true":"false",title:this.title,titleJs:h.gecko&&!h.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:f,focusFn:E,clickFn:t,style:CKEDITOR.skin.getIconStyle(p,s.lang.dir=="rtl",this.icon,this.iconOffset),arrowHtml:this.hasArrow?c.output():""},r.output(o,a),this.onRender&&this.onRender(),l},setState:function(s){if(this._.state==s)return!1;this._.state=s;var a=CKEDITOR.document.getById(this._.id);return a?(a.setState(s,"cke_button"),s==CKEDITOR.TRISTATE_DISABLED?a.setAttribute("aria-disabled",!0):a.removeAttribute("aria-disabled"),this.hasArrow?(s=s==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(s)):s==CKEDITOR.TRISTATE_ON?a.setAttribute("aria-pressed",!0):a.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(s){if(this._.feature)return this._.feature;var a=this;return this.allowedContent||this.requiredContent||!this.command||(a=s.getCommand(this.command)||a),this._.feature=a}},CKEDITOR.ui.prototype.addButton=function(s,a){this.add(s,CKEDITOR.UI_BUTTON,a)}}(),function(){function e(a){function u(){for(var l=h(),f=CKEDITOR.tools.clone(a.config.toolbarGroups)||c(a),E=0;E<f.length;E++){var C=f[E];if(C!="/"){typeof C=="string"&&(C=f[E]={name:C});var d,p=C.groups;if(p)for(var I=0;I<p.length;I++)d=p[I],(d=l[d])&&i(C,d);(d=l[C.name])&&i(C,d)}}return f}function h(){var l={},f,E,C;for(f in a.ui.items)E=a.ui.items[f],C=E.toolbar||"others",C=C.split(","),E=C[0],C=parseInt(C[1]||-1,10),l[E]||(l[E]=[]),l[E].push({name:f,order:C});for(E in l)l[E]=l[E].sort(function(d,p){return d.order==p.order?0:0>p.order?-1:0>d.order?1:d.order<p.order?-1:1});return l}function i(l,f){if(f.length){l.items?l.items.push(a.ui.create("-")):l.items=[];for(var E;E=f.shift();)E=typeof E=="string"?E:E.name,n&&CKEDITOR.tools.indexOf(n,E)!=-1||(E=a.ui.create(E))&&a.addFeature(E)&&l.items.push(E)}}function o(l){var f=[],E,C,d;for(E=0;E<l.length;++E)C=l[E],d={},C=="/"?f.push(C):CKEDITOR.tools.isArray(C)?(i(d,CKEDITOR.tools.clone(C)),f.push(d)):C.items&&(i(d,CKEDITOR.tools.clone(C.items)),d.name=C.name,f.push(d));return f}var n=a.config.removeButtons,n=n&&n.split(","),t=a.config.toolbar;return typeof t=="string"&&(t=a.config["toolbar_"+t]),a.toolbar=t?o(t):u()}function c(a){return a._.toolbarGroups||(a._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])}var r=function(){this.toolbars=[],this.focusCommandExecuted=!1};r.prototype.focus=function(){for(var a=0,u;u=this.toolbars[a++];)for(var h=0,i;i=u.items[h++];)if(i.focus){i.focus();return}};var s={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){a.toolbox.focus()},100):a.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(a){var u,h=function(i,o){var n,l=a.lang.dir=="rtl",f=a.config.toolbarGroupCycling,t=l?37:39,l=l?39:37,f=f===void 0||f;switch(o){case 9:case CKEDITOR.SHIFT+9:for(;!n||!n.items.length;)if(n=o==9?(n?n.next:i.toolbar.next)||a.toolbox.toolbars[0]:(n?n.previous:i.toolbar.previous)||a.toolbox.toolbars[a.toolbox.toolbars.length-1],n.items.length)for(i=n.items[u?n.items.length-1:0];i&&!i.focus;)(i=u?i.previous:i.next)||(n=0);return i&&i.focus(),!1;case t:n=i;do n=n.next,!n&&f&&(n=i.toolbar.items[0]);while(n&&!n.focus);return n?n.focus():h(i,9),!1;case 40:return i.button&&i.button.hasArrow?(a.once("panelShow",function(E){E.data._.panel._.currentBlock.onKeyDown(40)}),i.execute()):h(i,o==40?t:l),!1;case l:case 38:n=i;do n=n.previous,!n&&f&&(n=i.toolbar.items[i.toolbar.items.length-1]);while(n&&!n.focus);return n?n.focus():(u=1,h(i,CKEDITOR.SHIFT+9),u=0),!1;case 27:return a.focus(),!1;case 13:case 32:return i.execute(),!1}return!0};a.on("uiSpace",function(i){if(i.data.space==a.config.toolbarLocation){i.removeListener(),a.toolbox=new r;var n=CKEDITOR.tools.getNextId(),o=['<span id="',n,'" class="cke_voice_label">',a.lang.toolbar.toolbars,"</span>",'<span id="'+a.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',n,'" onmousedown="return false;">'],n=a.config.toolbarStartupExpanded!==!1,t,l;a.config.toolbarCanCollapse&&a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&o.push('<span class="cke_toolbox_main"'+(n?">":' style="display:none">'));for(var f=a.toolbox.toolbars,E=e(a),C=0;C<E.length;C++){var d,p=0,I,_=E[C],m;if(_)if(t&&(o.push("</span>"),l=t=0),_==="/")o.push('<span class="cke_toolbar_break"></span>');else{m=_.items||_;for(var g=0;g<m.length;g++){var D=m[g],O;if(D){var v=function(L){L=L.render(a,o),K=p.items.push(L)-1,0<K&&(L.previous=p.items[K-1],L.previous.next=L),L.toolbar=p,L.onkey=h,L.onfocus=function(){a.toolbox.focusCommandExecuted||a.focus()}};if(D.type==CKEDITOR.UI_SEPARATOR)l=t&&D;else{if(O=D.canGroup!==!1,!p){d=CKEDITOR.tools.getNextId(),p={id:d,items:[]},I=_.name&&(a.lang.toolbar.toolbarGroups[_.name]||_.name),o.push('<span id="',d,'" class="cke_toolbar"',I?' aria-labelledby="'+d+'_label"':"",' role="toolbar">'),I&&o.push('<span id="',d,'_label" class="cke_voice_label">',I,"</span>"),o.push('<span class="cke_toolbar_start"></span>');var K=f.push(p)-1;0<K&&(p.previous=f[K-1],p.previous.next=p)}O?t||(o.push('<span class="cke_toolgroup" role="presentation">'),t=1):t&&(o.push("</span>"),t=0),l&&(v(l),l=0),v(D)}}}t&&(o.push("</span>"),l=t=0),p&&o.push('<span class="cke_toolbar_end"></span></span>')}}if(a.config.toolbarCanCollapse&&o.push("</span>"),a.config.toolbarCanCollapse&&a.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var k=CKEDITOR.tools.addFunction(function(){a.execCommand("toolbarCollapse")});a.on("destroy",function(){CKEDITOR.tools.removeFunction(k)}),a.addCommand("toolbarCollapse",{readOnly:1,exec:function(L){var B=L.ui.space("toolbar_collapser"),F=B.getPrevious(),H=L.ui.space("contents"),z=F.getParent(),T=parseInt(H.$.style.height,10),x=z.$.offsetHeight,S=B.hasClass("cke_toolbox_collapser_min");S?(F.show(),B.removeClass("cke_toolbox_collapser_min"),B.setAttribute("title",L.lang.toolbar.toolbarCollapse)):(F.hide(),B.addClass("cke_toolbox_collapser_min"),B.setAttribute("title",L.lang.toolbar.toolbarExpand)),B.getFirst().setText(S?"▲":"◀"),H.setStyle("height",T-(z.$.offsetHeight-x)+"px"),L.fire("resize",{outerHeight:L.container.$.offsetHeight,contentsHeight:H.$.offsetHeight,outerWidth:L.container.$.offsetWidth})},modes:{wysiwyg:1,source:1}}),a.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),o.push('<a title="'+(n?a.lang.toolbar.toolbarCollapse:a.lang.toolbar.toolbarExpand)+'" id="'+a.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),n||o.push(" cke_toolbox_collapser_min"),o.push('" onclick="CKEDITOR.tools.callFunction('+k+')">','<span class="cke_arrow">&#9650;</span>',"</a>")}o.push("</span>"),i.data.html+=o.join("")}}),a.on("destroy",function(){if(this.toolbox){var i,o=0,n,t,l;for(i=this.toolbox.toolbars;o<i.length;o++)for(t=i[o].items,n=0;n<t.length;n++)l=t[n],l.clickFn&&CKEDITOR.tools.removeFunction(l.clickFn),l.keyDownFn&&CKEDITOR.tools.removeFunction(l.keyDownFn)}}),a.on("uiReady",function(){var i=a.ui.space("toolbox");i&&a.focusManager.add(i,1)}),a.addCommand("toolbarFocus",s),a.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),a.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),a.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(i,o){return o.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(a,u,h){var i=c(this.editor),o=u===0,n={name:a};if(h){if(h=CKEDITOR.tools.search(i,function(t){return t.name==h})){if(!h.groups&&(h.groups=[]),u&&(u=CKEDITOR.tools.indexOf(h.groups,u),0<=u)){h.groups.splice(u+1,0,a);return}o?h.groups.splice(0,0,a):h.groups.push(a);return}u=null}u&&(u=CKEDITOR.tools.indexOf(i,function(t){return t.name==u})),o?i.splice(0,0,a):typeof u=="number"?i.splice(u+1,0,n):i.push(a)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function e(a,u){function h(C){if(C=t.list[C],C.equals(a.editable())||C.getAttribute("contenteditable")=="true"){var d=a.createRange();d.selectNodeContents(C),d.select()}else a.getSelection().selectElement(C);a.focus()}function i(){n&&n.setHtml('<span class="cke_path_empty">&nbsp;</span>'),delete t.list}var o=a.ui.spaceId("path"),n,t=a._.elementsPath,l=t.idBase;u.html+='<span id="'+o+'_label" class="cke_voice_label">'+a.lang.elementspath.eleLabel+'</span><span id="'+o+'" class="cke_path" role="group" aria-labelledby="'+o+'_label"><span class="cke_path_empty">&nbsp;</span></span>',a.on("uiReady",function(){var C=a.ui.space("path");C&&a.focusManager.add(C,1)}),t.onClick=h;var f=CKEDITOR.tools.addFunction(h),E=CKEDITOR.tools.addFunction(function(C,d){var p=t.idBase,I;switch(d=new CKEDITOR.dom.event(d),I=a.lang.dir=="rtl",d.getKeystroke()){case(I?39:37):case 9:return(I=CKEDITOR.document.getById(p+(C+1)))||(I=CKEDITOR.document.getById(p+"0")),I.focus(),!1;case(I?37:39):case CKEDITOR.SHIFT+9:return(I=CKEDITOR.document.getById(p+(C-1)))||(I=CKEDITOR.document.getById(p+(t.list.length-1))),I.focus(),!1;case 27:return a.focus(),!1;case 13:case 32:return h(C),!1}return!0});a.on("selectionChange",function(){for(var C=[],d=t.list=[],p=[],I=t.filters,_=!0,m=a.elementPath().elements,g,D=m.length;D--;){var O=m[D],v=0;g=O.data("cke-display-name")?O.data("cke-display-name"):O.data("cke-real-element-type")?O.data("cke-real-element-type"):O.getName(),(_=O.hasAttribute("contenteditable")?O.getAttribute("contenteditable")=="true":_)||O.hasAttribute("contenteditable")||(v=1);for(var K=0;K<I.length;K++){var k=I[K](O,g);if(k===!1){v=1;break}g=k||g}v||(d.unshift(O),p.unshift(g))}for(d=d.length,I=0;I<d;I++)g=p[I],_=a.lang.elementspath.eleTitle.replace(/%1/,g),g=s.output({id:l+I,label:_,text:g,jsTitle:"javascript:void('"+g+"')",index:I,keyDownFn:E,clickFn:f}),C.unshift(g);n||(n=CKEDITOR.document.getById(o)),p=n,p.setHtml(C.join("")+'<span class="cke_path_empty">&nbsp;</span>'),a.fire("elementsPathUpdate",{space:p})}),a.on("readOnly",i),a.on("contentDomUnload",i),a.addCommand("elementsPathFocus",c.toolbarFocus),a.setKeystroke(CKEDITOR.ALT+122,"elementsPathFocus")}var c={toolbarFocus:{editorFocus:!1,readOnly:1,exec:function(a){(a=CKEDITOR.document.getById(a._.elementsPath.idBase+"0"))&&a.focus(CKEDITOR.env.ie||CKEDITOR.env.air)}}},r="";CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(r+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(r+=' onblur="this.style.cssText = this.style.cssText;"');var s=CKEDITOR.addTemplate("pathItem",'<a id="{id}" href="{jsTitle}" tabindex="-1" class="cke_path_item" title="{label}"'+r+' hidefocus="true"  onkeydown="return CKEDITOR.tools.callFunction({keyDownFn},{index}, event );" onclick="CKEDITOR.tools.callFunction({clickFn},{index}); return false;" role="button" aria-label="{label}">{text}</a>');CKEDITOR.plugins.add("elementspath",{init:function(a){a._.elementsPath={idBase:"cke_elementspath_"+CKEDITOR.tools.getNextNumber()+"_",filters:[]},a.on("uiSpace",function(u){u.data.space=="bottom"&&e(a,u.data)})}})}(),function(){function e(n,t,l){l=n.config.forceEnterMode||l,n.mode=="wysiwyg"&&(t||(t=n.activeEnterMode),n.elementPath().isContextFor("p")||(t=CKEDITOR.ENTER_BR,l=1),n.fire("saveSnapshot"),t==CKEDITOR.ENTER_BR?h(n,t,null,l):i(n,t,null,l),n.fire("saveSnapshot"))}function c(n){n=n.getSelection().getRanges(!0);for(var t=n.length-1;0<t;t--)n[t].deleteContents();return n[0]}function r(n){var t=n.startContainer.getAscendant(function(l){return l.type==CKEDITOR.NODE_ELEMENT&&l.getAttribute("contenteditable")=="true"},!0);return n.root.equals(t)?n:(t=new CKEDITOR.dom.range(t),t.moveToRange(n),t)}CKEDITOR.plugins.add("enterkey",{init:function(n){n.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t)}}),n.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(t){e(t,t.activeShiftEnterMode,1)}}),n.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var s=CKEDITOR.dom.walker.whitespaces(),a=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(n,t,l,f){if(l=l||c(n)){l=r(l);var E=l.document,C=l.checkStartOfBlock(),d=l.checkEndOfBlock(),p=n.elementPath(l.startContainer),I=p.block,_=t==CKEDITOR.ENTER_DIV?"div":"p",m;if(C&&d){if(I&&(I.is("li")||I.getParent().is("li"))){I.is("li")||(I=I.getParent()),l=I.getParent(),m=l.getParent(),f=!I.hasPrevious();var g=!I.hasNext(),_=n.getSelection(),D=_.createBookmarks(),C=I.getDirection(1),d=I.getAttribute("class"),O=I.getAttribute("style"),v=m.getDirection(1)!=C;if(n=n.enterMode!=CKEDITOR.ENTER_BR||v||O||d,m.is("li"))f||g?(f&&g&&l.remove(),I[g?"insertAfter":"insertBefore"](m)):I.breakParent(m);else{if(n)p.block.is("li")?(m=E.createElement(t==CKEDITOR.ENTER_P?"p":"div"),v&&m.setAttribute("dir",C),O&&m.setAttribute("style",O),d&&m.setAttribute("class",d),I.moveChildren(m)):m=p.block,f||g?m[f?"insertBefore":"insertAfter"](l):(I.breakParent(l),m.insertAfter(l));else if(I.appendBogus(!0),f||g)for(;E=I[f?"getFirst":"getLast"]();)E[f?"insertBefore":"insertAfter"](l);else for(I.breakParent(l);E=I.getLast();)E.insertAfter(l);I.remove()}_.selectBookmarks(D);return}if(I&&I.getParent().is("blockquote")){I.breakParent(I.getParent()),I.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||I.getPrevious().remove(),I.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||I.getNext().remove(),l.moveToElementEditStart(I),l.select();return}}else if(I&&I.is("pre")&&!d){h(n,t,l,f);return}if(C=l.splitBlock(_)){if(t=C.previousBlock,I=C.nextBlock,p=C.wasStartOfBlock,n=C.wasEndOfBlock,I?(D=I.getParent(),D.is("li")&&(I.breakParent(D),I.move(I.getNext(),1))):t&&(D=t.getParent())&&D.is("li")&&(t.breakParent(D),D=t.getNext(),l.moveToElementEditStart(D),t.move(t.getPrevious())),p||n){if(t?(t.is("li")||!o.test(t.getName())&&!t.is("pre"))&&(m=t.clone()):I&&(m=I.clone()),m?f&&!m.is("li")&&m.renameNode(_):D&&D.is("li")?m=D:(m=E.createElement(_),t&&(g=t.getDirection())&&m.setAttribute("dir",g)),E=C.elementPath)for(f=0,_=E.elements.length;f<_&&(D=E.elements[f],!(D.equals(E.block)||D.equals(E.blockLimit)));f++)CKEDITOR.dtd.$removeEmpty[D.getName()]&&(D=D.clone(),m.moveChildren(D),m.append(D));m.appendBogus(),m.getParent()||l.insertNode(m),m.is("li")&&m.removeAttribute("value"),!CKEDITOR.env.ie||!p||n&&t.getChildCount()||(l.moveToElementEditStart(n?t:m),l.select()),l.moveToElementEditStart(p&&!n?I:m)}else I.is("li")&&(m=l.clone(),m.selectNodeContents(I),m=new CKEDITOR.dom.walker(m),m.evaluator=function(K){return!(a(K)||s(K)||K.type==CKEDITOR.NODE_ELEMENT&&K.getName()in CKEDITOR.dtd.$inline&&!(K.getName()in CKEDITOR.dtd.$empty))},(D=m.next())&&D.type==CKEDITOR.NODE_ELEMENT&&D.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?E.createElement("br"):E.createText(" ")).insertBefore(D)),I&&l.moveToElementEditStart(I);l.select(),l.scrollIntoView()}}},enterBr:function(n,t,l,f){if(l=l||c(n)){var E=l.document,C=l.checkEndOfBlock(),d=new CKEDITOR.dom.elementPath(n.getSelection().getStartElement()),p=d.block,I=p&&d.block.getName();f||I!="li"?(!f&&C&&o.test(I)?(C=p.getDirection())?(E=E.createElement("div"),E.setAttribute("dir",C),E.insertAfter(p),l.setStart(E,0)):(E.createElement("br").insertAfter(p),CKEDITOR.env.gecko&&E.createText("").insertAfter(p),l.setStartAt(p.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(n=I=="pre"&&CKEDITOR.env.ie&&8>CKEDITOR.env.version?E.createText("\r"):E.createElement("br"),l.deleteContents(),l.insertNode(n),CKEDITOR.env.needsBrFiller?(E.createText("\uFEFF").insertAfter(n),C&&(p||d.blockLimit).appendBogus(),n.getNext().$.nodeValue="",l.setStartAt(n.getNext(),CKEDITOR.POSITION_AFTER_START)):l.setStartAt(n,CKEDITOR.POSITION_AFTER_END)),l.collapse(!0),l.select(),l.scrollIntoView()):i(n,t,l,f)}}};var u=CKEDITOR.plugins.enterkey,h=u.enterBr,i=u.enterBlock,o=/^h[1-6]$/}(),function(){function e(c,r){var s={},a=[],u={nbsp:" ",shy:"­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'};if(c=c.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(n,t){var l=r?"&"+t+";":u[t];return s[l]=r?u[t]:"&"+t+";",a.push(l),""}),!r&&c){c=c.split(",");var h=document.createElement("div"),i;for(h.innerHTML="&"+c.join(";&")+";",i=h.innerHTML,h=null,h=0;h<i.length;h++){var o=i.charAt(h);s[o]="&"+c[h]+";",a.push(o)}}return s.regex=a.join(r?"|":""),s}CKEDITOR.plugins.add("entities",{afterInit:function(c){function r(t){return o[t]}function s(t){return a.entities_processNumerical!="force"&&h[t]?h[t]:"&#"+t.charCodeAt(0)+";"}var a=c.config;if(c=(c=c.dataProcessor)&&c.htmlFilter){var u=[];a.basicEntities!==!1&&u.push("nbsp,gt,lt,amp"),a.entities&&(u.length&&u.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),a.entities_latin&&u.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),a.entities_greek&&u.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),a.entities_additional&&u.push(a.entities_additional));var h=e(u.join(",")),i=h.regex?"["+h.regex+"]":"a^";delete h.regex,a.entities&&a.entities_processNumerical&&(i="[^ -~]|"+i);var i=new RegExp(i,"g"),o=e("nbsp,gt,lt,amp,shy",!0),n=new RegExp(o.regex,"g");c.addRules({text:function(t){return t.replace(n,r).replace(i,s)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("popup"),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{popup:function(e,c,r,s){c=c||"80%",r=r||"70%",typeof c=="string"&&1<c.length&&c.substr(c.length-1,1)=="%"&&(c=parseInt(window.screen.width*parseInt(c,10)/100,10)),typeof r=="string"&&1<r.length&&r.substr(r.length-1,1)=="%"&&(r=parseInt(window.screen.height*parseInt(r,10)/100,10)),640>c&&(c=640),420>r&&(r=420);var a=parseInt((window.screen.height-r)/2,10),u=parseInt((window.screen.width-c)/2,10);s=(s||"location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes")+",width="+c+",height="+r+",top="+a+",left="+u;var h=window.open("",null,s,!0);if(!h)return!1;try{navigator.userAgent.toLowerCase().indexOf(" chrome/")==-1&&(h.moveTo(u,a),h.resizeTo(c,r)),h.focus(),h.location.href=e}catch{window.open(e,null,s,!0)}return!0}}),function(){function e(o,n){var t=[];if(n)for(var l in n)t.push(l+"="+encodeURIComponent(n[l]));else return o;return o+(o.indexOf("?")!=-1?"&":"?")+t.join("&")}function c(o){return o+="",o.charAt(0).toUpperCase()+o.substr(1)}function r(){var t=this.getDialog(),o=t.getParentEditor();o._.filebrowserSe=this;var n=o.config["filebrowser"+c(t.getName())+"WindowWidth"]||o.config.filebrowserWindowWidth||"80%",t=o.config["filebrowser"+c(t.getName())+"WindowHeight"]||o.config.filebrowserWindowHeight||"70%",l=this.filebrowser.params||{};l.CKEditor=o.name,l.CKEditorFuncNum=o._.filebrowserFn,l.langCode||(l.langCode=o.langCode),l=e(this.filebrowser.url,l),o.popup(l,n,t,o.config.filebrowserWindowFeatures||o.config.fileBrowserWindowFeatures)}function s(){var o=this.getDialog();return o.getParentEditor()._.filebrowserSe=this,!!(o.getContentElement(this.for[0],this.for[1]).getInputElement().$.value&&o.getContentElement(this.for[0],this.for[1]).getAction())}function a(o,n,t){var l=t.params||{};l.CKEditor=o.name,l.CKEditorFuncNum=o._.filebrowserFn,l.langCode||(l.langCode=o.langCode),n.action=e(t.url,l),n.filebrowser=t}function u(o,n,t,l){if(l&&l.length){for(var f,E=l.length;E--;)if(f=l[E],f.type!="hbox"&&f.type!="vbox"&&f.type!="fieldset"||u(o,n,t,f.children),f.filebrowser){if(typeof f.filebrowser=="string"&&(f.filebrowser={action:f.type=="fileButton"?"QuickUpload":"Browse",target:f.filebrowser}),f.filebrowser.action=="Browse"){var C=f.filebrowser.url;C===void 0&&(C=o.config["filebrowser"+c(n)+"BrowseUrl"],C===void 0&&(C=o.config.filebrowserBrowseUrl)),C&&(f.onClick=r,f.filebrowser.url=C,f.hidden=!1)}else if(f.filebrowser.action=="QuickUpload"&&f.for&&(C=f.filebrowser.url,C===void 0&&(C=o.config["filebrowser"+c(n)+"UploadUrl"],C===void 0&&(C=o.config.filebrowserUploadUrl)),C)){var d=f.onClick;f.onClick=function(p){var I=p.sender;return d&&d.call(I,p)===!1?!1:s.call(I,p)},f.filebrowser.url=C,f.hidden=!1,a(o,t.getContents(f.for[0]).get(f.for[1]),f.filebrowser)}}}}function h(o,n,t){if(t.indexOf(";")!==-1){t=t.split(";");for(var l=0;l<t.length;l++)if(h(o,n,t[l]))return!0;return!1}return(o=o.getContents(n).get(t).filebrowser)&&o.url}function i(o,n){var t=this._.filebrowserSe.getDialog(),l=this._.filebrowserSe.for,f=this._.filebrowserSe.filebrowser.onSelect;l&&t.getContentElement(l[0],l[1]).reset(),(typeof n!="function"||n.call(this._.filebrowserSe)!==!1)&&(!f||f.call(this._.filebrowserSe,o,n)!==!1)&&(typeof n=="string"&&n&&alert(n),o&&(l=this._.filebrowserSe,t=l.getDialog(),l=l.filebrowser.target||null)&&(l=l.split(":"),(f=t.getContentElement(l[0],l[1]))&&(f.setValue(o),t.selectPage(l[0]))))}CKEDITOR.plugins.add("filebrowser",{requires:"popup",init:function(o){o._.filebrowserFn=CKEDITOR.tools.addFunction(i,o),o.on("destroy",function(){CKEDITOR.tools.removeFunction(this._.filebrowserFn)})}}),CKEDITOR.on("dialogDefinition",function(o){if(o.editor.plugins.filebrowser)for(var n=o.data.definition,t,l=0;l<n.contents.length;++l)(t=n.contents[l])&&(u(o.editor,o.data.name,n,t.elements),t.hidden&&t.filebrowser&&(t.hidden=!h(n,t.id,t.filebrowser)))})}(),function(){function e(s){var a=s.config,u=s.fire("uiSpace",{space:"top",html:""}).html,h=function(){function l(K,k,L){o.setStyle(k,r(L)),o.setStyle("position",K)}function f(K){var k=C.getDocumentPosition();switch(K){case"top":l("absolute","top",k.y-_-D);break;case"pin":l("fixed","top",v);break;case"bottom":l("absolute","top",k.y+(p.height||p.bottom-p.top)+D)}E=K}var E,C,d,p,I,_,m,g=a.floatSpaceDockedOffsetX||0,D=a.floatSpaceDockedOffsetY||0,O=a.floatSpacePinnedOffsetX||0,v=a.floatSpacePinnedOffsetY||0;return function(K){if(C=s.editable()){var k=K&&K.name=="focus";k&&o.show(),s.fire("floatingSpaceLayout",{show:k}),o.removeStyle("left"),o.removeStyle("right"),d=o.getClientRect(),p=C.getClientRect(),I=c.getViewPaneSize(),_=d.height,m="pageXOffset"in c.$?c.$.pageXOffset:CKEDITOR.document.$.documentElement.scrollLeft,E?(_+D<=p.top?f("top"):_+D>I.height-p.bottom?f("pin"):f("bottom"),K=I.width/2,K=a.floatSpacePreferRight?"right":0<p.left&&p.right<I.width&&p.width>d.width?a.contentsLangDirection=="rtl"?"right":"left":K-p.left>p.right-K?"left":"right",d.width>I.width?(K="left",k=0):(k=K=="left"?0<p.left?p.left:0:p.right<I.width?I.width-p.right:0,k+d.width>I.width&&(K=K=="left"?"right":"left",k=0)),o.setStyle(K,r((E=="pin"?O:g)+k+(E=="pin"?0:K=="left"?m:-m)))):(E="pin",f("pin"),h(K))}}}();if(u){var i=new CKEDITOR.template('<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}"'+(s.title?' aria-labelledby="cke_{name}_arialbl"':" ")+">"+(s.title?'<span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span>':" ")+'<div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div></div>'),o=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(i.output({content:u,id:s.id,langDir:s.lang.dir,langCode:s.langCode,name:s.name,style:"display:none;z-index:"+(a.baseFloatZIndex-1),topId:s.ui.spaceId("top"),voiceLabel:s.title}))),n=CKEDITOR.tools.eventsBuffer(500,h),t=CKEDITOR.tools.eventsBuffer(100,h);o.unselectable(),o.on("mousedown",function(l){l=l.data,l.getTarget().hasAscendant("a",1)||l.preventDefault()}),s.on("focus",function(l){h(l),s.on("change",n.input),c.on("scroll",t.input),c.on("resize",t.input)}),s.on("blur",function(){o.hide(),s.removeListener("change",n.input),c.removeListener("scroll",t.input),c.removeListener("resize",t.input)}),s.on("destroy",function(){c.removeListener("scroll",t.input),c.removeListener("resize",t.input),o.clearCustomData(),o.remove()}),s.focusManager.hasFocus&&o.show(),s.focusManager.add(o,1)}}var c=CKEDITOR.document.getWindow(),r=CKEDITOR.tools.cssLength;CKEDITOR.plugins.add("floatingspace",{init:function(s){s.on("loaded",function(){e(this)},null,null,20)}})}(),CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var e=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),c=CKEDITOR.addTemplate("panel-list-item",`<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void('{val}')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},'{val}'); return false;" role="option">{text}</a></li>`),r=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),s=/\'/g;CKEDITOR.ui.panel.prototype.addListBlock=function(a,u){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),u))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(a,u){u=u||{};var h=u.attributes||(u.attributes={});(this.multiSelect=!!u.multiSelect)&&(h["aria-multiselectable"]=!0),!h.role&&(h.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",h.role),h=this.keys,h[40]="next",h[9]="next",h[38]="prev",h[CKEDITOR.SHIFT+9]="prev",h[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(h[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}},_:{close:function(){if(this._.started){var a=e.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(a),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(a){var u=this.toggle(a);this.onClick&&this.onClick(a,u)},this)),this._.click}},proto:{add:function(a,u,h){var i=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[a]=i;var o;o=CKEDITOR.tools.htmlEncodeAttr(a).replace(s,"\\'"),a={id:i,val:o,onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(h||a),text:u||a},this._.pendingList.push(c.output(a))},startGroup:function(a){this._.close();var u=CKEDITOR.tools.getNextId();this._.groups[a]=u,this._.pendingHtml.push(r.output({id:u,label:a}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(a){var u=this.isMarked(a);return u?this.unmark(a):this.mark(a),!u},hideGroup:function(a){var u=(a=this.element.getDocument().getById(this._.groups[a]))&&a.getNext();a&&(a.setStyle("display","none"),u&&u.getName()=="ul"&&u.setStyle("display","none"))},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var a=this._.items,u=this._.groups,h=this.element.getDocument(),i;for(i in a)h.getById(a[i]).setStyle("display","");for(var o in u)a=h.getById(u[o]),i=a.getNext(),a.setStyle("display",""),i&&i.getName()=="ul"&&i.setStyle("display","")},mark:function(a){this.multiSelect||this.unmarkAll(),a=this._.items[a];var u=this.element.getDocument().getById(a);u.addClass("cke_selected"),this.element.getDocument().getById(a+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(u)},unmark:function(a){var u=this.element.getDocument();a=this._.items[a];var h=u.getById(a);h.removeClass("cke_selected"),u.getById(a+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(h)},unmarkAll:function(){var a=this._.items,u=this.element.getDocument(),h;for(h in a){var i=a[h];u.getById(i).removeClass("cke_selected"),u.getById(i+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){this._.focusIndex=-1;var u=this.element.getElementsByTag("a"),h,i=-1;if(a){for(h=this.element.getDocument().getById(this._.items[a]).getFirst();a=u.getItem(++i);)if(a.equals(h)){this._.focusIndex=i;break}}else this.element.focus();h&&setTimeout(function(){h.focus()},0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)}}),function(){var e='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&!CKEDITOR.env.hc?"":` href="javascript:void('{titleJs}')"`)+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';CKEDITOR.env.gecko&&CKEDITOR.env.mac&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var e=e+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>"),c=CKEDITOR.addTemplate("combo",e);CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(r){CKEDITOR.tools.extend(this,r,{canGroup:!1,title:r.label,modes:{wysiwyg:1},editorFocus:1}),r=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=r.parent&&r.parent.getDocument()||CKEDITOR.document,r.className="cke_combopanel",r.block={multiSelect:r.multiSelect,attributes:r.attributes},r.toolbarRelated=!0,this._={panelDefinition:r,items:{}}},proto:{renderHtml:function(r){var s=[];return this.render(r,s),s.join("")},render:function(r,s){function a(){if(this.getState()!=CKEDITOR.TRISTATE_ON){var E=this.modes[r.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;r.readOnly&&!this.readOnly&&(E=CKEDITOR.TRISTATE_DISABLED),this.setState(E),this.setValue(""),E!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()}}var u=CKEDITOR.env,h="cke_"+this.id,i=CKEDITOR.tools.addFunction(function(E){f&&(r.unlockSelection(1),f=0),n.execute(E)},this),o=this,n={id:h,combo:this,focus:function(){CKEDITOR.document.getById(h).getChild(1).focus()},execute:function(E){var C=o._;if(C.state!=CKEDITOR.TRISTATE_DISABLED)if(o.createPanel(r),C.on)C.panel.hide();else{o.commit();var d=o.getValue();d?C.list.mark(d):C.list.unmarkAll(),C.panel.showBlock(o.id,new CKEDITOR.dom.element(E),4)}},clickFn:i};r.on("activeFilterChange",a,this),r.on("mode",a,this),r.on("selectionChange",a,this),!this.readOnly&&r.on("readOnly",a,this);var t=CKEDITOR.tools.addFunction(function(E,C){E=new CKEDITOR.dom.event(E);var d=E.getKeystroke();switch(d==40&&r.once("panelShow",function(p){p.data._.panel._.currentBlock.onKeyDown(40)}),d){case 13:case 32:case 40:CKEDITOR.tools.callFunction(i,C);break;default:n.onkey(n,d)}E.preventDefault()}),l=CKEDITOR.tools.addFunction(function(){n.onfocus&&n.onfocus()}),f=0;return n.keyDownFn=t,u={id:h,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:u.gecko&&!u.hc?"":(this.title||"").replace("'",""),keydownFn:t,focusFn:l,clickFn:i},c.output(u,s),this.onRender&&this.onRender(),n},createPanel:function(r){if(!this._.panel){var s=this._.panelDefinition,a=this._.panelDefinition.block,u=s.parent||CKEDITOR.document.getBody(),h="cke_combopanel__"+this.name,i=new CKEDITOR.ui.floatPanel(r,u,s),o=i.addListBlock(this.id,a),n=this;i.onShow=function(){this.element.addClass(h),n.setState(CKEDITOR.TRISTATE_ON),n._.on=1,n.editorFocus&&!r.focusManager.hasFocus&&r.focus(),n.onOpen&&n.onOpen(),r.once("panelShow",function(){o.focus(!o.multiSelect&&n.getValue())})},i.onHide=function(t){this.element.removeClass(h),n.setState(n.modes&&n.modes[r.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),n._.on=0,!t&&n.onClose&&n.onClose()},i.onEscape=function(){i.hide(1)},o.onClick=function(t,l){n.onClick&&n.onClick.call(n,t,l),i.hide()},this._.panel=i,this._.list=o,i.getBlock(this.id).onHide=function(){n._.on=0,n.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(r,s){this._.value=r;var a=this.document.getById("cke_"+this.id+"_text");a&&(r||s?a.removeClass("cke_combo_inlinelabel"):(s=this.label,a.addClass("cke_combo_inlinelabel")),a.setText(typeof s<"u"?s:r))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(r){this._.list.mark(r)},hideItem:function(r){this._.list.hideItem(r)},hideGroup:function(r){this._.list.hideGroup(r)},showAll:function(){this._.list.showAll()},add:function(r,s,a){this._.items[r]=a||r,this._.list.add(r,s,a)},startGroup:function(r){this._.list.startGroup(r)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(r){if(this._.state!=r){var s=this.document.getById("cke_"+this.id);s.setState(r,"cke_combo"),r==CKEDITOR.TRISTATE_DISABLED?s.setAttribute("aria-disabled",!0):s.removeAttribute("aria-disabled"),this._.state=r}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))}},statics:{handler:{create:function(r){return new CKEDITOR.ui.richCombo(r)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(r,s){this.add(r,CKEDITOR.UI_RICHCOMBO,s)}}(),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(e){if(!e.blockless){for(var c=e.config,r=e.lang.format,s=c.format_tags.split(";"),a={},u=0,h=[],i=0;i<s.length;i++){var o=s[i],n=new CKEDITOR.style(c["format_"+o]);(!e.filter.customConfig||e.filter.check(n))&&(u++,a[o]=n,a[o]._.enterMode=e.config.enterMode,h.push(n))}u!==0&&e.ui.addRichCombo("Format",{label:r.label,title:r.panelTitle,toolbar:"styles,20",allowedContent:h,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(c.contentsCss),multiSelect:!1,attributes:{"aria-label":r.panelTitle}},init:function(){this.startGroup(r.panelTitle);for(var t in a){var l=r["tag_"+t];this.add(t,a[t].buildPreview(l),l)}},onClick:function(t){e.focus(),e.fire("saveSnapshot"),t=a[t];var l=e.elementPath();e[t.checkActive(l,e)?"removeStyle":"applyStyle"](t),setTimeout(function(){e.fire("saveSnapshot")},0)},onRender:function(){e.on("selectionChange",function(t){var l=this.getValue();t=t.data.path,this.refresh();for(var f in a)if(a[f].checkActive(t,e)){f!=l&&this.setValue(f,e.lang.format["tag_"+f]);return}this.setValue("")},this)},onOpen:function(){this.showAll();for(var t in a)e.activeFilter.check(a[t])||this.hideItem(t)},refresh:function(){var t=e.elementPath();if(t){if(t.isContextFor("p")){for(var l in a)if(e.activeFilter.check(a[l]))return}this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var e={canUndo:!1,exec:function(c){var r=c.document.createElement("hr");c.insertElement(r)},allowedContent:"hr",requiredContent:"hr"};CKEDITOR.plugins.add("horizontalrule",{init:function(c){c.blockless||(c.addCommand("horizontalrule",e),c.ui.addButton&&c.ui.addButton("HorizontalRule",{label:c.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(e){var c=new CKEDITOR.htmlWriter;c.forceSimpleAmpersand=e.config.forceSimpleAmpersand,c.indentationChars=e.config.dataIndentationChars||"	",e.dataProcessor.writer=c}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="	",this.selfClosingEnd=" />",this.lineBreakChars=`
`,this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};var e=CKEDITOR.dtd,c;for(c in CKEDITOR.tools.extend({},e.$nonBodyContent,e.$block,e.$listItem,e.$tableContent))this.setRules(c,{indent:!e[c]["#"],breakBeforeOpen:1,breakBeforeClose:!e[c]["#"],breakAfterClose:1,needsSpace:c in e.$block&&!(c in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(e){var c=this._.rules[e];this._.afterCloser&&c&&c.needsSpace&&this._.needsSpace&&this._.output.push(`
`),this._.indent?this.indentation():c&&c.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",e),this._.afterCloser=0},openTagClose:function(e,c){var r=this._.rules[e];c?(this._.output.push(this.selfClosingEnd),r&&r.breakAfterClose&&(this._.needsSpace=r.needsSpace)):(this._.output.push(">"),r&&r.indent&&(this._.indentation+=this.indentationChars)),r&&r.breakAfterOpen&&this.lineBreak(),e=="pre"&&(this._.inPre=1)},attribute:function(e,c){typeof c=="string"&&(this.forceSimpleAmpersand&&(c=c.replace(/&amp;/g,"&")),c=CKEDITOR.tools.htmlEncodeAttr(c)),this._.output.push(" ",e,'="',c,'"')},closeTag:function(e){var c=this._.rules[e];c&&c.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():c&&c.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",e,">"),e=="pre"&&(this._.inPre=0),c&&c.breakAfterClose&&(this.lineBreak(),this._.needsSpace=c.needsSpace),this._.afterCloser=1},text:function(e){this._.indent&&(this.indentation(),!this._.inPre&&(e=CKEDITOR.tools.ltrim(e))),this._.output.push(e)},comment:function(e){this._.indent&&this.indentation(),this._.output.push("<!--",e,"-->")},lineBreak:function(){!this._.inPre&&0<this._.output.length&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0},setRules:function(e,c){var r=this._.rules[e];r?CKEDITOR.tools.extend(r,c,!0):this._.rules[e]=c}}}),function(){function e(a){function u(l){var f=!1;t.attachListener(t,"keydown",function(){var E=i.getBody().getElementsByTag(l);if(!f){for(var C=0;C<E.count();C++)E.getItem(C).setCustomData("retain",!0);f=!0}},null,null,1),t.attachListener(t,"keyup",function(){var E=i.getElementsByTag(l);f&&(E.count()!=1||E.getItem(0).getCustomData("retain")||E.getItem(0).remove(1),f=!1)})}var h=this.editor,i=a.document,o=i.body,n=i.getElementById("cke_actscrpt");n&&n.parentNode.removeChild(n),(n=i.getElementById("cke_shimscrpt"))&&n.parentNode.removeChild(n),(n=i.getElementById("cke_basetagscrpt"))&&n.parentNode.removeChild(n),o.contentEditable=!0,CKEDITOR.env.ie&&(o.hideFocus=!0,o.disabled=!0,o.removeAttribute("disabled")),delete this._.isLoadingData,this.$=o,i=new CKEDITOR.dom.document(i),this.setup(),this.fixInitialSelection();var t=this;CKEDITOR.env.ie&&!CKEDITOR.env.edge&&h.enterMode!=CKEDITOR.ENTER_P?u("p"):CKEDITOR.env.edge&&h.enterMode!=CKEDITOR.ENTER_DIV&&u("div"),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&10<CKEDITOR.env.version)&&i.getDocumentElement().on("mousedown",function(l){l.data.getTarget().is("html")&&setTimeout(function(){h.editable().focus()})}),c(h);try{h.document.$.execCommand("2D-position",!1,!0)}catch{}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&h.document.$.compatMode=="CSS1Compat")&&this.attachListener(this,"keydown",function(l){var f=l.data.getKeystroke();if(f==33||f==34){if(CKEDITOR.env.ie)setTimeout(function(){h.getSelection().scrollIntoView()},0);else if(h.window.$.innerHeight>this.$.offsetHeight){var E=h.createRange();E[f==33?"moveToElementEditStart":"moveToElementEditEnd"](this),E.select(),l.data.preventDefault()}}}),CKEDITOR.env.ie&&this.attachListener(i,"blur",function(){try{i.$.selection.empty()}catch{}}),CKEDITOR.env.iOS&&this.attachListener(i,"touchend",function(){a.focus()}),o=h.document.getElementsByTag("title").getItem(0),o.data("cke-title",o.getText()),CKEDITOR.env.ie&&(h.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){this.status=="unloaded"&&(this.status="ready"),h.fire("contentDom"),this._.isPendingFocus&&(h.focus(),this._.isPendingFocus=!1),setTimeout(function(){h.fire("dataReady")},0)},0,this)}function c(a){function u(){var o;a.editable().attachListener(a,"selectionChange",function(){var n=a.getSelection().getSelectedElement();n&&(o&&(o.detachEvent("onresizestart",h),o=null),n.$.attachEvent("onresizestart",h),o=n.$)})}function h(o){o.returnValue=!1}if(CKEDITOR.env.gecko)try{var i=a.document.$;i.execCommand("enableObjectResizing",!1,!a.config.disableObjectResizing),i.execCommand("enableInlineTableEditing",!1,!a.config.disableNativeTableHandles)}catch{}else CKEDITOR.env.ie&&11>CKEDITOR.env.version&&a.config.disableObjectResizing&&u()}function r(){var a=[];if(8<=CKEDITOR.document.$.documentMode){a.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var u=[],h;for(h in CKEDITOR.dtd.$removeEmpty)u.push("html.CSS1Compat "+h+"[contenteditable=false]");a.push(u.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(a.push("html{height:100% !important}"),a.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return a.push("html{cursor:text;*cursor:auto}"),a.push("img,input,textarea{cursor:default}"),a.join(`
`)}CKEDITOR.plugins.add("wysiwygarea",{init:function(a){a.config.fullPage&&a.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),a.addMode("wysiwyg",function(u){function h(E){E&&E.removeListener(),a.editable(new s(a,o.$.contentWindow.document.body)),a.setData(a.getData(1),u)}var i="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",i=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie&&!CKEDITOR.env.edge?"javascript:void(function(){"+encodeURIComponent(i)+"}())":"",o=CKEDITOR.dom.element.createFromHtml('<iframe src="'+i+'" frameBorder="0"></iframe>');o.setStyles({width:"100%",height:"100%"}),o.addClass("cke_wysiwyg_frame").addClass("cke_reset"),i=a.ui.space("contents"),i.append(o);var n=CKEDITOR.env.ie&&!CKEDITOR.env.edge||CKEDITOR.env.gecko;n&&o.on("load",h);var t=a.title,l=a.fire("ariaEditorHelpLabel",{}).label;if(t&&(CKEDITOR.env.ie&&l&&(t+=", "+l),o.setAttribute("title",t)),l){var t=CKEDITOR.tools.getNextId(),f=CKEDITOR.dom.element.createFromHtml('<span id="'+t+'" class="cke_voice_label">'+l+"</span>");i.append(f,1),o.setAttribute("aria-describedby",t)}a.on("beforeModeUnload",function(E){E.removeListener(),f&&f.remove()}),o.setAttributes({tabIndex:a.tabIndex,allowTransparency:"true"}),!n&&h(),a.fire("ariaWidget",o)})}}),CKEDITOR.editor.prototype.addContentsCss=function(a){var u=this.config,h=u.contentsCss;CKEDITOR.tools.isArray(h)||(u.contentsCss=h?[h]:[]),u.contentsCss.push(a)};var s=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(a){CKEDITOR.tools.setTimeout(e,0,this,a)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(a,u){var h=this.editor;if(u)this.setHtml(a),this.fixInitialSelection(),h.fire("dataReady");else{this._.isLoadingData=!0,h._.dataStore={id:1};var i=h.config,o=i.fullPage,n=i.docType,t=CKEDITOR.tools.buildStyleHtml(r()).replace(/<style>/,'<style data-cke-temp="1">');o||(t+=CKEDITOR.tools.buildStyleHtml(h.config.contentsCss));var l=i.baseHref?'<base href="'+i.baseHref+'" data-cke-temp="1" />':"";o&&(a=a.replace(/<!DOCTYPE[^>]*>/i,function(E){return h.docType=n=E,""}).replace(/<\?xml\s[^\?]*\?>/i,function(E){return h.xmlDeclaration=E,""})),a=h.dataProcessor.toHtml(a),o?(/<body[\s|>]/.test(a)||(a="<body>"+a),/<html[\s|>]/.test(a)||(a="<html>"+a+"</html>"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$&<title></title>")):a=a.replace(/<html[^>]*>/,"$&<head><title></title></head>"),l&&(a=a.replace(/<head[^>]*?>/,"$&"+l)),a=a.replace(/<\/head\s*>/,t+"$&"),a=n+a):a=i.docType+'<html dir="'+i.contentsLangDirection+'" lang="'+(i.contentsLanguage||h.langCode)+'"><head><title>'+this._.docTitle+"</title>"+l+t+"</head><body"+(i.bodyId?' id="'+i.bodyId+'"':"")+(i.bodyClass?' class="'+i.bodyClass+'"':"")+">"+a+"</body></html>",CKEDITOR.env.gecko&&(a=a.replace(/<body/,'<body contenteditable="true" '),2e4>CKEDITOR.env.version&&(a=a.replace(/<body[^>]*>/,"$&<!-- cke-content-start -->"))),i='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"<\/script>",CKEDITOR.env.ie&&9>CKEDITOR.env.version&&(i+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)<\/script>'),l&&CKEDITOR.env.ie&&10>CKEDITOR.env.version&&(i+='<script id="cke_basetagscrpt">var baseTag = document.querySelector( "base" );baseTag.href = baseTag.href;<\/script>'),a=a.replace(/(?=\s*<\/(:?head)>)/,i),this.clearCustomData(),this.clearListeners(),h.fire("contentDomUnload");var f=this.getDocument();try{f.write(a)}catch{setTimeout(function(){f.write(a)},0)}}},getData:function(a){if(a)return this.getHtml();a=this.editor;var u=a.config,n=u.fullPage,h=n&&a.docType,i=n&&a.xmlDeclaration,o=this.getDocument(),n=n?o.getDocumentElement().getOuterHtml():o.getBody().getHtml();return CKEDITOR.env.gecko&&u.enterMode!=CKEDITOR.ENTER_BR&&(n=n.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),n=a.dataProcessor.toDataFormat(n),i&&(n=i+`
`+n),h&&(n=h+`
`+n),n},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:s.baseProto.focus.call(this)},detach:function(){var u=this.editor,a=u.document,u=u.window.getFrame();s.baseProto.detach.call(this),this.clearCustomData(),a.getDocumentElement().clearCustomData(),u.clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),(a=u.removeCustomData("onResize"))&&a.removeListener(),u.remove()}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.contentsCss=CKEDITOR.getUrl("contents.css"),function(){function e(r,s){if(s||(s=r.getSelection().getSelectedElement()),s&&s.is("img")&&!s.data("cke-realelement")&&!s.isReadOnly())return s}function c(r){var s=r.getStyle("float");return(s=="inherit"||s=="none")&&(s=0),s||(s=r.getAttribute("align")),s}CKEDITOR.plugins.add("image",{requires:"dialog",init:function(r){if(!r.plugins.image2){CKEDITOR.dialog.add("image",this.path+"dialogs/image.js");var s="img[alt,!src]{border-style,border-width,float,height,margin,margin-bottom,margin-left,margin-right,margin-top,width}";CKEDITOR.dialog.isTabEnabled(r,"image","advanced")&&(s="img[alt,dir,id,lang,longdesc,!src,title]{*}(*)"),r.addCommand("image",new CKEDITOR.dialogCommand("image",{allowedContent:s,requiredContent:"img[alt,src]",contentTransformations:[["img{width}: sizeToStyle","img[width]: sizeToAttribute"],["img{float}: alignmentToStyle","img[align]: alignmentToAttribute"]]})),r.ui.addButton&&r.ui.addButton("Image",{label:r.lang.common.image,command:"image",toolbar:"insert,10"}),r.on("doubleclick",function(a){var u=a.data.element;!u.is("img")||u.data("cke-realelement")||u.isReadOnly()||(a.data.dialog="image")}),r.addMenuItems&&r.addMenuItems({image:{label:r.lang.image.menu,command:"image",group:"image"}}),r.contextMenu&&r.contextMenu.addListener(function(a){if(e(r,a))return{image:CKEDITOR.TRISTATE_OFF}})}},afterInit:function(r){function s(a){var u=r.getCommand("justify"+a);u&&((a=="left"||a=="right")&&u.on("exec",function(h){var i=e(r),o;i&&(o=c(i),o==a?(i.removeStyle("float"),a==c(i)&&i.removeAttribute("align")):i.setStyle("float",a),h.cancel())}),u.on("refresh",function(h){var i=e(r);i&&(i=c(i),this.setState(i==a?CKEDITOR.TRISTATE_ON:a=="right"||a=="left"?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),h.cancel())}))}r.plugins.image2||(s("left"),s("right"),s("center"),s("block"))}})}(),CKEDITOR.config.image_removeLinkByEmptyURL=!0,function(){function e(s,a){var u,h;a.on("refresh",function(i){var o=[c],n;for(n in i.data.states)o.push(i.data.states[n]);this.setState(CKEDITOR.tools.search(o,r)?r:c)},a,null,100),a.on("exec",function(i){u=s.getSelection(),h=u.createBookmarks(1),i.data||(i.data={}),i.data.done=!1},a,null,0),a.on("exec",function(){s.forceNextSelectionCheck(),u.selectBookmarks(h)},a,null,100)}var c=CKEDITOR.TRISTATE_DISABLED,r=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(s){var a=CKEDITOR.plugins.indent.genericDefinition;e(s,s.addCommand("indent",new a(!0))),e(s,s.addCommand("outdent",new a)),s.ui.addButton&&(s.ui.addButton("Indent",{label:s.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),s.ui.addButton("Outdent",{label:s.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),s.on("dirChanged",function(u){var h=s.createRange(),i=u.data.node;h.setStartBefore(i),h.setEndAfter(i);for(var o=new CKEDITOR.dom.walker(h),n;n=o.next();)if(n.type==CKEDITOR.NODE_ELEMENT)if(!n.equals(i)&&n.getDirection())h.setStartAfter(n),o=new CKEDITOR.dom.walker(h);else{var t=s.config.indentClasses;if(t)for(var l=u.data.dir=="ltr"?["_rtl",""]:["","_rtl"],f=0;f<t.length;f++)n.hasClass(t[f]+l[0])&&(n.removeClass(t[f]+l[0]),n.addClass(t[f]+l[1]));t=n.getStyle("margin-right"),l=n.getStyle("margin-left"),t?n.setStyle("margin-left",t):n.removeStyle("margin-left"),l?n.setStyle("margin-right",l):n.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(s){this.isIndent=!!s,this.startDisabled=!this.isIndent},specificDefinition:function(s,a,u){this.name=a,this.editor=s,this.jobs={},this.enterBr=s.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!u,this.relatedGlobal=u?"indent":"outdent",this.indentKey=u?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(s,a){s.on("pluginsLoaded",function(){for(var u in a)(function(h,i){var o=h.getCommand(i.relatedGlobal),n;for(n in i.jobs)o.on("exec",function(t){t.data.done||(h.fire("lockSnapshot"),i.execJob(h,n)&&(t.data.done=!0),h.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(i.database))},this,null,n),o.on("refresh",function(t){t.data.states||(t.data.states={}),t.data.states[i.name+"@"+n]=i.refreshJob(h,n,t.data.path)},this,null,n);h.addFeature(i)})(this,a[u])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(s,a){var u=this.jobs[a];if(u.state!=c)return u.exec.call(this,s)},refreshJob:function(s,a,u){return a=this.jobs[a],s.activeFilter.checkFeature(this)?a.state=a.refresh.call(this,s,u):a.state=c,a.state},getContext:function(s){return s.contains(this.context)}}}(),function(){function e(i){function o(p){for(var I=E.startContainer,_=E.endContainer;I&&!I.getParent().equals(p);)I=I.getParent();for(;_&&!_.getParent().equals(p);)_=_.getParent();if(!I||!_)return!1;for(var m=I,I=[],g=!1;!g;)m.equals(_)&&(g=!0),I.push(m),m=m.getNext();if(1>I.length)return!1;for(m=p.getParents(!0),_=0;_<m.length;_++)if(m[_].getName&&l[m[_].getName()]){p=m[_];break}for(var m=n.isIndent?1:-1,_=I[0],I=I[I.length-1],g=CKEDITOR.plugins.list.listToArray(p,t),D=g[I.getCustomData("listarray_index")].indent,_=_.getCustomData("listarray_index");_<=I.getCustomData("listarray_index");_++)if(g[_].indent+=m,0<m){var O=g[_].parent;g[_].parent=new CKEDITOR.dom.element(O.getName(),O.getDocument())}for(_=I.getCustomData("listarray_index")+1;_<g.length&&g[_].indent>D;_++)g[_].indent+=m;if(I=CKEDITOR.plugins.list.arrayToList(g,t,null,i.config.enterMode,p.getDirection()),!n.isIndent){var v;if((v=p.getParent())&&v.is("li"))for(var m=I.listNode.getChildren(),K=[],k,_=m.count()-1;0<=_;_--)(k=m.getItem(_))&&k.is&&k.is("li")&&K.push(k)}if(I&&I.listNode.replace(p),K&&K.length)for(_=0;_<K.length;_++){for(k=p=K[_];(k=k.getNext())&&k.is&&k.getName()in l;)CKEDITOR.env.needsNbspFiller&&!p.getFirst(r)&&p.append(E.document.createText(" ")),p.append(k);p.insertAfter(v)}return I&&i.fire("contentDomInvalidated"),!0}for(var n=this,t=this.database,l=this.context,f=i.getSelection(),f=(f&&f.getRanges()).createIterator(),E;E=f.getNextRange();){for(var C=E.getCommonAncestor();C&&(C.type!=CKEDITOR.NODE_ELEMENT||!l[C.getName()]);){if(i.editable().equals(C)){C=!1;break}C=C.getParent()}if(C||(C=E.startPath().contains(l))&&E.setEndAt(C,CKEDITOR.POSITION_BEFORE_END),!C){var d=E.getEnclosedNode();d&&d.type==CKEDITOR.NODE_ELEMENT&&d.getName()in l&&(E.setStartAt(d,CKEDITOR.POSITION_AFTER_START),E.setEndAt(d,CKEDITOR.POSITION_BEFORE_END),C=d)}if(C&&E.startContainer.type==CKEDITOR.NODE_ELEMENT&&E.startContainer.getName()in l&&(d=new CKEDITOR.dom.walker(E),d.evaluator=c,E.startContainer=d.next()),C&&E.endContainer.type==CKEDITOR.NODE_ELEMENT&&E.endContainer.getName()in l&&(d=new CKEDITOR.dom.walker(E),d.evaluator=c,E.endContainer=d.previous()),C)return o(C)}return 0}function c(i){return i.type==CKEDITOR.NODE_ELEMENT&&i.is("li")}function r(i){return s(i)&&a(i)}var s=CKEDITOR.dom.walker.whitespaces(!0),a=CKEDITOR.dom.walker.bookmark(!1,!0),u=CKEDITOR.TRISTATE_DISABLED,h=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(i){function o(t){n.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],t.on("key",function(l){if(t.mode=="wysiwyg"&&l.data.keyCode==this.indentKey){var f=this.getContext(t.elementPath());!f||this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,t.elementPath(),f)||(t.execCommand(this.relatedGlobal),l.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(l,f){var E=this.getContext(f),C=CKEDITOR.plugins.indentList.firstItemInPath(this.context,f,E);return E&&this.isIndent&&!C?h:u}:function(l,f){return!this.getContext(f)||this.isIndent?u:h},exec:CKEDITOR.tools.bind(e,this)}}var n=CKEDITOR.plugins.indent;n.registerCommands(i,{indentlist:new o(i,"indentlist",!0),outdentlist:new o(i,"outdentlist")}),CKEDITOR.tools.extend(o.prototype,n.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(i,o,n){var t=o.contains(c);return n||(n=o.contains(i)),n&&t&&t.equals(n.getFirst(c))}}(),function(){function e(u,h){var i=s.exec(u),o=s.exec(h);if(i){if(!i[2]&&o[2]=="px")return o[1];if(i[2]=="px"&&!o[2])return o[1]+"px"}return h}var c=CKEDITOR.htmlParser.cssStyle,r=CKEDITOR.tools.cssLength,s=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,a={elements:{$:function(u){var h=u.attributes;if((h=(h=(h=h&&h["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(h)))&&h.children[0])&&u.attributes["data-cke-resizable"]){var o=new c(u).rules;u=h.attributes;var i=o.width,o=o.height;i&&(u.width=e(u.width,i)),o&&(u.height=e(u.height,o))}return h}}};CKEDITOR.plugins.add("fakeobjects",{init:function(u){u.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(u){(u=(u=u.dataProcessor)&&u.htmlFilter)&&u.addRules(a,{applyToAll:!0})}}),CKEDITOR.editor.prototype.createFakeElement=function(u,h,i,o){var n=this.lang.fakeobjects,n=n[i]||n.unknown;return h={class:h,"data-cke-realelement":encodeURIComponent(u.getOuterHtml()),"data-cke-real-node-type":u.type,alt:n,title:n,align:u.getAttribute("align")||""},CKEDITOR.env.hc||(h.src=CKEDITOR.tools.transparentImageData),i&&(h["data-cke-real-element-type"]=i),o&&(h["data-cke-resizable"]=o,i=new c,o=u.getAttribute("width"),u=u.getAttribute("height"),o&&(i.rules.width=r(o)),u&&(i.rules.height=r(u)),i.populate(h)),this.document.createElement("img",{attributes:h})},CKEDITOR.editor.prototype.createFakeParserElement=function(u,h,i,o){var n=this.lang.fakeobjects,n=n[i]||n.unknown,t;return t=new CKEDITOR.htmlParser.basicWriter,u.writeHtml(t),t=t.getHtml(),h={class:h,"data-cke-realelement":encodeURIComponent(t),"data-cke-real-node-type":u.type,alt:n,title:n,align:u.attributes.align||""},CKEDITOR.env.hc||(h.src=CKEDITOR.tools.transparentImageData),i&&(h["data-cke-real-element-type"]=i),o&&(h["data-cke-resizable"]=o,o=u.attributes,u=new c,i=o.width,o=o.height,i!==void 0&&(u.rules.width=r(i)),o!==void 0&&(u.rules.height=r(o)),u.populate(h)),new CKEDITOR.htmlParser.element("img",h)},CKEDITOR.editor.prototype.restoreRealElement=function(u){if(u.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;var h=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(u.data("cke-realelement")),this.document);if(u.data("cke-resizable")){var i=u.getStyle("width");u=u.getStyle("height"),i&&h.setAttribute("width",e(h.getAttribute("width"),i)),u&&h.setAttribute("height",e(h.getAttribute("height"),u))}return h}}(),function(){function e(p){return p.replace(/'/g,"\\$&")}function c(p){for(var I,_=p.length,m=[],g=0;g<_;g++)I=p.charCodeAt(g),m.push(I);return"String.fromCharCode("+m.join(",")+")"}function r(p,I){var _=p.plugins.link,m=_.compiledProtectionFunction.params,g,D;D=[_.compiledProtectionFunction.name,"("];for(var O=0;O<m.length;O++)_=m[O].toLowerCase(),g=I[_],0<O&&D.push(","),D.push("'",g?e(encodeURIComponent(I[_])):"","'");return D.push(")"),D.join("")}function s(p){p=p.config.emailProtection||"";var I;return p&&p!="encode"&&(I={},p.replace(/^([^(]+)\(([^)]+)\)$/,function(_,m,g){I.name=m,I.params=[],g.replace(/[^,\s]+/g,function(D){I.params.push(D)})})),I}CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function p(m){return _.replace(/%1/g,m=="rtl"?"right":"left").replace(/%2/g,"cke_contents_"+m)}var I="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",_=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+I+"padding-%1:18px;cursor:auto;}.%2 img.cke_anchor{"+I+"width:16px;min-height:15px;height:1.15em;vertical-align:text-bottom;}";CKEDITOR.addCss(p("ltr")+p("rtl"))},init:function(p){var I="a[!href]";CKEDITOR.dialog.isTabEnabled(p,"link","advanced")&&(I=I.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)")),CKEDITOR.dialog.isTabEnabled(p,"link","target")&&(I=I.replace("]",",target,onclick]")),p.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:I,requiredContent:"a[href]"})),p.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),p.addCommand("unlink",new CKEDITOR.unlinkCommand),p.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),p.setKeystroke(CKEDITOR.CTRL+76,"link"),p.ui.addButton&&(p.ui.addButton("Link",{label:p.lang.link.toolbar,command:"link",toolbar:"links,10"}),p.ui.addButton("Unlink",{label:p.lang.link.unlink,command:"unlink",toolbar:"links,20"}),p.ui.addButton("Anchor",{label:p.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),p.on("doubleclick",function(_){var m=CKEDITOR.plugins.link.getSelectedLink(p)||_.data.element;m.isReadOnly()||(m.is("a")?(_.data.dialog=!m.getAttribute("name")||m.getAttribute("href")&&m.getChildCount()?"link":"anchor",_.data.link=m):CKEDITOR.plugins.link.tryRestoreFakeAnchor(p,m)&&(_.data.dialog="anchor"))},null,null,0),p.on("doubleclick",function(_){_.data.dialog in{link:1,anchor:1}&&_.data.link&&p.getSelection().selectElement(_.data.link)},null,null,20),p.addMenuItems&&p.addMenuItems({anchor:{label:p.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:p.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:p.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:p.lang.link.unlink,command:"unlink",group:"link",order:5}}),p.contextMenu&&p.contextMenu.addListener(function(_){if(!_||_.isReadOnly()||(_=CKEDITOR.plugins.link.tryRestoreFakeAnchor(p,_),!_&&!(_=CKEDITOR.plugins.link.getSelectedLink(p))))return null;var m={};return _.getAttribute("href")&&_.getChildCount()&&(m={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),_&&_.hasAttribute("name")&&(m.anchor=m.removeAnchor=CKEDITOR.TRISTATE_OFF),m}),this.compiledProtectionFunction=s(p)},afterInit:function(p){p.dataProcessor.dataFilter.addRules({elements:{a:function(_){return _.attributes.name?_.children.length?null:p.createFakeParserElement(_,"cke_anchor","anchor"):null}}});var I=p._.elementsPath&&p._.elementsPath.filters;I&&I.push(function(_,m){if(m=="a"&&(CKEDITOR.plugins.link.tryRestoreFakeAnchor(p,_)||_.getAttribute("name")&&(!_.getAttribute("href")||!_.getChildCount())))return"anchor"})}});var a=/^javascript:/,u=/^mailto:([^?]+)(?:\?(.+))?$/,h=/subject=([^;?:@&=$,\/]*)/,i=/body=([^;?:@&=$,\/]*)/,o=/^#(.*)$/,n=/^((?:http|https|ftp|news):\/\/)?(.*)$/,t=/^(_(?:self|top|parent|blank))$/,l=/^javascript:void\(location\.href='mailto:'\+String\.fromCharCode\(([^)]+)\)(?:\+'(.*)')?\)$/,f=/^javascript:([^(]+)\(([^)]+)\)$/,E=/\s*window.open\(\s*this\.href\s*,\s*(?:'([^']*)'|null)\s*,\s*'([^']*)'\s*\)\s*;\s*return\s*false;*\s*/,C=/(?:^|,)([^=]+)=(\d+|yes|no)/gi,d={id:"advId",dir:"advLangDir",accessKey:"advAccessKey",name:"advName",lang:"advLangCode",tabindex:"advTabIndex",title:"advTitle",type:"advContentType",class:"advCSSClasses",charset:"advCharset",style:"advStyles",rel:"advRel"};CKEDITOR.plugins.link={getSelectedLink:function(p){var I=p.getSelection(),_=I.getSelectedElement();return _&&_.is("a")?_:(I=I.getRanges()[0])?(I.shrink(CKEDITOR.SHRINK_TEXT),p.elementPath(I.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(p){for(var I=p.editable(),_=I.isInline()&&!p.plugins.divarea?p.document:I,I=_.getElementsByTag("a"),_=_.getElementsByTag("img"),m=[],g=0,D;D=I.getItem(g++);)(D.data("cke-saved-name")||D.hasAttribute("name"))&&m.push({name:D.data("cke-saved-name")||D.getAttribute("name"),id:D.getAttribute("id")});for(g=0;D=_.getItem(g++);)(D=this.tryRestoreFakeAnchor(p,D))&&m.push({name:D.getAttribute("name"),id:D.getAttribute("id")});return m},fakeAnchor:!0,tryRestoreFakeAnchor:function(p,I){if(I&&I.data("cke-real-element-type")&&I.data("cke-real-element-type")=="anchor"){var _=p.restoreRealElement(I);if(_.data("cke-saved-name"))return _}},parseLinkAttributes:function(p,I){var _=I&&(I.data("cke-saved-href")||I.getAttribute("href"))||"",m=p.plugins.link.compiledProtectionFunction,g=p.config.emailProtection,D,O={};if(_.match(a)&&(g=="encode"?_=_.replace(l,function(k,L,B){return"mailto:"+String.fromCharCode.apply(String,L.split(","))+(B&&B.replace(/\\'/g,"'"))}):g&&_.replace(f,function(k,L,B){if(L==m.name){O.type="email",k=O.email={},L=/(^')|('$)/g,B=B.match(/[^,\s]+/g);for(var F=B.length,H,z,T=0;T<F;T++)H=decodeURIComponent,z=B[T].replace(L,"").replace(/\\'/g,"'"),z=H(z),H=m.params[T].toLowerCase(),k[H]=z;k.address=[k.name,k.domain].join("@")}})),!O.type)if(g=_.match(o))O.type="anchor",O.anchor={},O.anchor.name=O.anchor.id=g[1];else if(g=_.match(u)){D=_.match(h),_=_.match(i),O.type="email";var v=O.email={};v.address=g[1],D&&(v.subject=decodeURIComponent(D[1])),_&&(v.body=decodeURIComponent(_[1]))}else _&&(D=_.match(n))&&(O.type="url",O.url={},O.url.protocol=D[1],O.url.url=D[2]);if(I){if(_=I.getAttribute("target"))O.target={type:_.match(t)?_:"frame",name:_};else if(_=(_=I.data("cke-pa-onclick")||I.getAttribute("onclick"))&&_.match(E))for(O.target={type:"popup",name:_[1]};g=C.exec(_[2]);)g[2]!="yes"&&g[2]!="1"||g[1]in{height:1,width:1,top:1,left:1}?isFinite(g[2])&&(O.target[g[1]]=g[2]):O.target[g[1]]=!0;var _={},K;for(K in d)(g=I.getAttribute(K))&&(_[d[K]]=g);(K=I.data("cke-saved-name")||_.advName)&&(_.advName=K),CKEDITOR.tools.isEmpty(_)||(O.advanced=_)}return O},getLinkAttributes:function(p,I){var _=p.config.emailProtection||"",m={};switch(I.type){case"url":var _=I.url&&I.url.protocol!==void 0?I.url.protocol:"http://",D=I.url&&CKEDITOR.tools.trim(I.url.url)||"";m["data-cke-saved-href"]=D.indexOf("/")===0?D:_+D;break;case"anchor":_=I.anchor&&I.anchor.id,m["data-cke-saved-href"]="#"+(I.anchor&&I.anchor.name||_||"");break;case"email":var g=I.email,D=g.address;switch(_){case"":case"encode":var O=encodeURIComponent(g.subject||""),v=encodeURIComponent(g.body||""),g=[];O&&g.push("subject="+O),v&&g.push("body="+v),g=g.length?"?"+g.join("&"):"",_=="encode"?(_=["javascript:void(location.href='mailto:'+",c(D)],g&&_.push("+'",e(g),"'"),_.push(")")):_=["mailto:",D,g];break;default:_=D.split("@",2),g.name=_[0],g.domain=_[1],_=["javascript:",r(p,g)]}m["data-cke-saved-href"]=_.join("")}if(I.target)if(I.target.type=="popup"){for(var _=["window.open(this.href, '",I.target.name||"","', '"],K="resizable status location toolbar menubar fullscreen scrollbars dependent".split(" "),D=K.length,O=function(T){I.target[T]&&K.push(T+"="+I.target[T])},g=0;g<D;g++)K[g]+=I.target[K[g]]?"=yes":"=no";O("width"),O("left"),O("height"),O("top"),_.push(K.join(","),"'); return false;"),m["data-cke-pa-onclick"]=_.join("")}else I.target.type!="notSet"&&I.target.name&&(m.target=I.target.name);if(I.advanced){for(var k in d)(_=I.advanced[d[k]])&&(m[k]=_);m.name&&(m["data-cke-saved-name"]=m.name)}m["data-cke-saved-href"]&&(m.href=m["data-cke-saved-href"]),k={target:1,onclick:1,"data-cke-pa-onclick":1,"data-cke-saved-name":1},I.advanced&&CKEDITOR.tools.extend(k,d);for(var L in m)delete k[L];return{set:m,removed:CKEDITOR.tools.objectKeys(k)}}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(p){var I=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});p.removeStyle(I)},refresh:function(p,I){var _=I.lastElement&&I.lastElement.getAscendant("a",!0);_&&_.getName()=="a"&&_.getAttribute("href")&&_.getChildCount()?this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(p){var I=p.getSelection(),_=I.createBookmarks(),m;I&&(m=I.getSelectedElement())&&(m.getChildCount()?m.is("a"):CKEDITOR.plugins.link.tryRestoreFakeAnchor(p,m))?m.remove(1):(m=CKEDITOR.plugins.link.getSelectedLink(p))&&(m.hasAttribute("href")?(m.removeAttributes({name:1,"data-cke-saved-name":1}),m.removeClass("cke_anchor")):m.remove(1)),I.selectBookmarks(_)},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0})}(),function(){function e(C,d,p){function I(k){!(v=O[k?"getFirst":"getLast"]())||v.is&&v.isBlockBoundary()||!(K=d.root[k?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||K.is&&K.isBlockBoundary({br:1})||C.document.createElement("br")[k?"insertBefore":"insertAfter"](v)}for(var _=CKEDITOR.plugins.list.listToArray(d.root,p),m=[],g=0;g<d.contents.length;g++){var D=d.contents[g];(D=D.getAscendant("li",!0))&&!D.getCustomData("list_item_processed")&&(m.push(D),CKEDITOR.dom.element.setMarker(p,D,"list_item_processed",!0))}for(D=null,g=0;g<m.length;g++)D=m[g].getCustomData("listarray_index"),_[D].indent=-1;for(g=D+1;g<_.length;g++)if(_[g].indent>_[g-1].indent+1){for(m=_[g-1].indent+1-_[g].indent,D=_[g].indent;_[g]&&_[g].indent>=D;)_[g].indent+=m,g++;g--}var O=CKEDITOR.plugins.list.arrayToList(_,p,null,C.config.enterMode,d.root.getAttribute("dir")).listNode,v,K;I(!0),I(),O.replace(d.root),C.fire("contentDomInvalidated")}function c(C,d){this.name=C,this.context=this.type=d,this.allowedContent=d+" li",this.requiredContent=d}function r(C,d,p,I){for(var _,m;_=C[I?"getLast":"getFirst"](E);)(m=_.getDirection(1))!==d.getDirection(1)&&_.setAttribute("dir",m),_.remove(),p?_[I?"insertBefore":"insertAfter"](p):d.append(_,I)}function s(C){function d(p){var I=C[p?"getPrevious":"getNext"](t);I&&I.type==CKEDITOR.NODE_ELEMENT&&I.is(C.getName())&&(r(C,I,null,!p),C.remove(),C=I)}d(),d(1)}function a(C){return C.type==CKEDITOR.NODE_ELEMENT&&(C.getName()in CKEDITOR.dtd.$block||C.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[C.getName()]["#"]}function u(C,d,p){C.fire("saveSnapshot"),p.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var I=p.extractContents();d.trim(!1,!0);var _=d.createBookmark(),g=new CKEDITOR.dom.elementPath(d.startContainer),m=g.block,g=g.lastElement.getAscendant("li",1)||m,O=new CKEDITOR.dom.elementPath(p.startContainer),D=O.contains(CKEDITOR.dtd.$listItem),O=O.contains(CKEDITOR.dtd.$list);for(m?(m=m.getBogus())&&m.remove():O&&(m=O.getPrevious(t))&&l(m)&&m.remove(),(m=I.getLast())&&m.type==CKEDITOR.NODE_ELEMENT&&m.is("br")&&m.remove(),(m=d.startContainer.getChild(d.startOffset))?I.insertBefore(m):d.startContainer.append(I),D&&(I=h(D))&&(g.contains(D)?(r(I,D.getParent(),D),I.remove()):g.append(I));p.checkStartOfBlock()&&p.checkEndOfBlock()&&(O=p.startPath(),I=O.block,!!I);)I.is("li")&&(g=I.getParent(),I.equals(g.getLast(t))&&I.equals(g.getFirst(t))&&(I=g)),p.moveToPosition(I,CKEDITOR.POSITION_BEFORE_START),I.remove();p=p.clone(),I=C.editable(),p.setEndAt(I,CKEDITOR.POSITION_BEFORE_END),p=new CKEDITOR.dom.walker(p),p.evaluator=function(v){return t(v)&&!l(v)},(p=p.next())&&p.type==CKEDITOR.NODE_ELEMENT&&p.getName()in CKEDITOR.dtd.$list&&s(p),d.moveToBookmark(_),d.select(),C.fire("saveSnapshot")}function h(C){return(C=C.getLast(t))&&C.type==CKEDITOR.NODE_ELEMENT&&C.getName()in i?C:null}var i={ol:1,ul:1},o=CKEDITOR.dom.walker.whitespaces(),n=CKEDITOR.dom.walker.bookmark(),t=function(C){return!(o(C)||n(C))},l=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(C,d,p,I,_){if(!i[C.getName()])return[];I||(I=0),p||(p=[]);for(var m=0,g=C.getChildCount();m<g;m++){var D=C.getChild(m);if(D.type==CKEDITOR.NODE_ELEMENT&&D.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(D,d,p,I+1),D.$.nodeName.toLowerCase()=="li"){var O={parent:C,indent:I,element:D,contents:[]};_?O.grandparent=_:(O.grandparent=C.getParent(),O.grandparent&&O.grandparent.$.nodeName.toLowerCase()=="li"&&(O.grandparent=O.grandparent.getParent())),d&&CKEDITOR.dom.element.setMarker(d,D,"listarray_index",p.length),p.push(O);for(var v=0,K=D.getChildCount(),k;v<K;v++)k=D.getChild(v),k.type==CKEDITOR.NODE_ELEMENT&&i[k.getName()]?CKEDITOR.plugins.list.listToArray(k,d,p,I+1,O.grandparent):O.contents.push(k)}}return p},arrayToList:function(C,d,p,I,_){if(p||(p=0),!C||C.length<p+1)return null;for(var m,g=C[p].parent.getDocument(),D=new CKEDITOR.dom.documentFragment(g),O=null,v=p,K=Math.max(C[p].indent,0),k=null,L,B,F=I==CKEDITOR.ENTER_P?"p":"div";;){var H=C[v];if(m=H.grandparent,L=H.element.getDirection(1),H.indent==K){for(O&&C[v].parent.getName()==O.getName()||(O=C[v].parent.clone(!1,1),_&&O.setAttribute("dir",_),D.append(O)),k=O.append(H.element.clone(0,1)),L!=O.getDirection(1)&&k.setAttribute("dir",L),m=0;m<H.contents.length;m++)k.append(H.contents[m].clone(1,1));v++}else if(H.indent==Math.max(K,0)+1)H=C[v-1].element.getDirection(1),v=CKEDITOR.plugins.list.arrayToList(C,null,v,I,H!=L?L:null),!k.getChildCount()&&CKEDITOR.env.needsNbspFiller&&7>=g.$.documentMode&&k.append(g.createText(" ")),k.append(v.listNode),v=v.nextIndex;else if(H.indent==-1&&!p&&m){i[m.getName()]?(k=H.element.clone(!1,!0),L!=m.getDirection(1)&&k.setAttribute("dir",L)):k=new CKEDITOR.dom.documentFragment(g);var O=m.getDirection(1)!=L,z=H.element,T=z.getAttribute("class"),x=z.getAttribute("style"),S=k.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(I!=CKEDITOR.ENTER_BR||O||x||T),y,N=H.contents.length,w;for(m=0;m<N;m++)if(y=H.contents[m],n(y)&&1<N)S?w=y.clone(1,1):k.append(y.clone(1,1));else if(y.type==CKEDITOR.NODE_ELEMENT&&y.isBlockBoundary()){O&&!y.getDirection()&&y.setAttribute("dir",L),B=y;var R=z.getAttribute("style");R&&B.setAttribute("style",R.replace(/([^;])$/,"$1;")+(B.getAttribute("style")||"")),T&&y.addClass(T),B=null,w&&(k.append(w),w=null),k.append(y.clone(1,1))}else S?(B||(B=g.createElement(F),k.append(B),O&&B.setAttribute("dir",L)),x&&B.setAttribute("style",x),T&&B.setAttribute("class",T),w&&(B.append(w),w=null),B.append(y.clone(1,1))):k.append(y.clone(1,1));w&&((B||k).append(w),w=null),k.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&v!=C.length-1&&(CKEDITOR.env.needsBrFiller&&(L=k.getLast())&&L.type==CKEDITOR.NODE_ELEMENT&&L.is("br")&&L.remove(),(L=k.getLast(t))&&L.type==CKEDITOR.NODE_ELEMENT&&L.is(CKEDITOR.dtd.$block)||k.append(g.createElement("br"))),L=k.$.nodeName.toLowerCase(),L!="div"&&L!="p"||k.appendBogus(),D.append(k),O=null,v++}else return null;if(B=null,C.length<=v||Math.max(C[v].indent,0)<K)break}if(d)for(C=D.getFirst();C;){if(C.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(d,C),C.getName()in CKEDITOR.dtd.$listItem&&(p=C,g=_=I=void 0,I=p.getDirection()))){for(_=p.getParent();_&&!(g=_.getDirection());)_=_.getParent();I==g&&p.removeAttribute("dir")}C=C.getNextSourceNode()}return{listNode:D,nextIndex:v}}};var f=/^h[1-6]$/,E=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);c.prototype={exec:function(C){this.refresh(C,C.elementPath());var d=C.config,p=C.getSelection(),I=p&&p.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var _=C.editable();if(_.getFirst(t)){var m=I.length==1&&I[0];(d=m&&m.getEnclosedNode())&&d.is&&this.type==d.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else d.enterMode==CKEDITOR.ENTER_BR?_.appendBogus():I[0].fixBlock(1,d.enterMode==CKEDITOR.ENTER_P?"p":"div"),p.selectRanges(I)}for(var d=p.createBookmarks(!0),_=[],g={},I=I.createIterator(),D=0;(m=I.getNextRange())&&++D;){var O=m.getBoundaryNodes(),v=O.startNode,K=O.endNode;for(v.type==CKEDITOR.NODE_ELEMENT&&v.getName()=="td"&&m.setStartAt(O.startNode,CKEDITOR.POSITION_AFTER_START),K.type==CKEDITOR.NODE_ELEMENT&&K.getName()=="td"&&m.setEndAt(O.endNode,CKEDITOR.POSITION_BEFORE_END),m=m.createIterator(),m.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;O=m.getNextParagraph();)if(!O.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(g,O,"list_block",1);for(var k=C.elementPath(O),v=k.elements,K=0,k=k.blockLimit,L,B=v.length-1;0<=B&&(L=v[B]);B--)if(i[L.getName()]&&k.contains(L)){k.removeCustomData("list_group_object_"+D),(v=L.getCustomData("list_group_object"))?v.contents.push(O):(v={root:L,contents:[O]},_.push(v),CKEDITOR.dom.element.setMarker(g,L,"list_group_object",v)),K=1;break}K||(K=k,K.getCustomData("list_group_object_"+D)?K.getCustomData("list_group_object_"+D).contents.push(O):(v={root:K,contents:[O]},CKEDITOR.dom.element.setMarker(g,K,"list_group_object_"+D,v),_.push(v)))}}for(L=[];0<_.length;)if(v=_.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(i[v.root.getName()]){for(I=C,D=v,v=g,m=L,K=CKEDITOR.plugins.list.listToArray(D.root,v),k=[],O=0;O<D.contents.length;O++)B=D.contents[O],(B=B.getAscendant("li",!0))&&!B.getCustomData("list_item_processed")&&(k.push(B),CKEDITOR.dom.element.setMarker(v,B,"list_item_processed",!0));for(var B=D.root.getDocument(),F=void 0,H=void 0,O=0;O<k.length;O++){var z=k[O].getCustomData("listarray_index"),F=K[z].parent;F.is(this.type)||(H=B.createElement(this.type),F.copyAttributes(H,{start:1,type:1}),H.removeStyle("list-style-type"),K[z].parent=H)}for(v=CKEDITOR.plugins.list.arrayToList(K,v,null,I.config.enterMode),K=void 0,k=v.listNode.getChildCount(),O=0;O<k&&(K=v.listNode.getChild(O));O++)K.getName()==this.type&&m.push(K);v.listNode.replace(D.root),I.fire("contentDomInvalidated")}else{for(K=C,m=v,O=L,k=m.contents,I=m.root.getDocument(),D=[],k.length==1&&k[0].equals(m.root)&&(v=I.createElement("div"),k[0].moveChildren&&k[0].moveChildren(v),k[0].append(v),k[0]=v),m=m.contents[0].getParent(),B=0;B<k.length;B++)m=m.getCommonAncestor(k[B].getParent());for(F=K.config.useComputedState,K=v=void 0,F=F===void 0||F,B=0;B<k.length;B++)for(H=k[B];z=H.getParent();){if(z.equals(m)){D.push(H),!K&&H.getDirection()&&(K=1),H=H.getDirection(F),v!==null&&(v=v&&v!=H?null:H);break}H=z}if(!(1>D.length)){for(k=D[D.length-1].getNext(),B=I.createElement(this.type),O.push(B),F=O=void 0;D.length;)O=D.shift(),F=I.createElement("li"),H=O,H.is("pre")||f.test(H.getName())||H.getAttribute("contenteditable")=="false"?O.appendTo(F):(O.copyAttributes(F),v&&O.getDirection()&&(F.removeStyle("direction"),F.removeAttribute("dir")),O.moveChildren(F),O.remove()),F.appendTo(B);v&&K&&B.setAttribute("dir",v),k?B.insertBefore(k):B.appendTo(m)}}else this.state==CKEDITOR.TRISTATE_ON&&i[v.root.getName()]&&e.call(this,C,v,g);for(B=0;B<L.length;B++)s(L[B]);CKEDITOR.dom.element.clearAllMarkers(g),p.selectBookmarks(d),C.focus()},refresh:function(C,d){var p=d.contains(i,1),I=d.blockLimit||d.root;p&&I.contains(p)?this.setState(p.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(C){C.blockless||(C.addCommand("numberedlist",new c("numberedlist","ol")),C.addCommand("bulletedlist",new c("bulletedlist","ul")),C.ui.addButton&&(C.ui.addButton("NumberedList",{label:C.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),C.ui.addButton("BulletedList",{label:C.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),C.on("key",function(d){var p=d.data.domEvent.getKey(),I;if(C.mode=="wysiwyg"&&p in{8:1,46:1}){var _=C.getSelection().getRanges()[0],m=_&&_.startPath();if(_&&_.collapsed){var g=p==8,D=C.editable(),O=new CKEDITOR.dom.walker(_.clone());if(O.evaluator=function(k){return t(k)&&!l(k)},O.guard=function(k,L){return!(L&&k.type==CKEDITOR.NODE_ELEMENT&&k.is("table"))},p=_.clone(),g){var v;if((v=m.contains(i))&&_.checkBoundaryOfElement(v,CKEDITOR.START)&&(v=v.getParent())&&v.is("li")&&(v=h(v))?(I=v,v=v.getPrevious(t),p.moveToPosition(v&&l(v)?v:I,CKEDITOR.POSITION_BEFORE_START)):(O.range.setStartAt(D,CKEDITOR.POSITION_AFTER_START),O.range.setEnd(_.startContainer,_.startOffset),(v=O.previous())&&v.type==CKEDITOR.NODE_ELEMENT&&(v.getName()in i||v.is("li"))&&(v.is("li")||(O.range.selectNodeContents(v),O.reset(),O.evaluator=a,v=O.previous()),I=v,p.moveToElementEditEnd(I),p.moveToPosition(p.endPath().block,CKEDITOR.POSITION_BEFORE_END))),I)u(C,p,_),d.cancel();else{var K=m.contains(i);K&&_.checkBoundaryOfElement(K,CKEDITOR.START)&&(I=K.getFirst(t),_.checkBoundaryOfElement(I,CKEDITOR.START)&&(v=K.getPrevious(t),h(I)?v&&(_.moveToElementEditEnd(v),_.select()):C.execCommand("outdent"),d.cancel()))}}else if(I=m.contains("li")){if(O.range.setEndAt(D,CKEDITOR.POSITION_BEFORE_END),g=(D=I.getLast(t))&&a(D)?D:I,m=0,(v=O.next())&&v.type==CKEDITOR.NODE_ELEMENT&&v.getName()in i&&v.equals(D)?(m=1,v=O.next()):_.checkBoundaryOfElement(g,CKEDITOR.END)&&(m=2),m&&v){if(_=_.clone(),_.moveToElementEditStart(v),m==1&&(p.optimize(),!p.startContainer.equals(I))){for(I=p.startContainer;I.is(CKEDITOR.dtd.$inline);)K=I,I=I.getParent();K&&p.moveToPosition(K,CKEDITOR.POSITION_AFTER_END)}m==2&&(p.moveToPosition(p.endPath().block,CKEDITOR.POSITION_BEFORE_END),_.endPath().block&&_.moveToPosition(_.endPath().block,CKEDITOR.POSITION_AFTER_START)),u(C,p,_),d.cancel()}}else O.range.setEndAt(D,CKEDITOR.POSITION_BEFORE_END),(v=O.next())&&v.type==CKEDITOR.NODE_ELEMENT&&v.is(i)&&(v=v.getFirst(t),m.block&&_.checkStartOfBlock()&&_.checkEndOfBlock()?(m.block.remove(),_.moveToElementEditStart(v),_.select()):h(v)?(_.moveToElementEditStart(v),_.select()):(_=_.clone(),_.moveToElementEditStart(v),u(C,p,_)),d.cancel());setTimeout(function(){C.selectionChange(1)})}}}))}})}(),function(){function e(q,G,X){return l(G)&&l(X)&&X.equals(G.getNext(function(j){return!(Q(j)||J(j)||f(j))}))}function c(q){this.upper=q[0],this.lower=q[1],this.set.apply(this,q.slice(2))}function r(q){var G=q.element;if(G&&l(G)&&(G=G.getAscendant(q.triggers,!0))&&q.editable.contains(G)){var X=h(G);if(X.getAttribute("contenteditable")=="true")return G;if(X.is(q.triggers))return X}return null}function s(q,G,X){return g(q,G),g(q,X),q=G.size.bottom,X=X.size.top,q&&X?0|(q+X)/2:q||X}function a(q,G,X){return G=G[X?"getPrevious":"getNext"](function(j){return j&&j.type==CKEDITOR.NODE_TEXT&&!Q(j)||l(j)&&!f(j)&&!t(q,j)})}function u(q,G,X){return q>G&&q<X}function h(q,G){if(q.data("cke-editable"))return null;for(G||(q=q.getParent());q&&!q.data("cke-editable");){if(q.hasAttribute("contenteditable"))return q;q=q.getParent()}return null}function i(q){var G=q.doc,X=L('<span contenteditable="false" style="'+V+"position:absolute;border-top:1px dashed "+q.boxColor+'"></span>',G),j=CKEDITOR.getUrl(this.path+"images/"+(B.hidpi?"hidpi/":"")+"icon"+(q.rtl?"-rtl":"")+".png");for(K(X,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(q.editable,!0),this},lineChildren:[K(L('<span title="'+q.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',G),{base:V+"height:17px;width:17px;"+(q.rtl?"left":"right")+":17px;background:url("+j+") center no-repeat "+q.boxColor+";cursor:pointer;"+(B.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(B.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px; border-radius: 2px;","top:-17px; border-radius: 2px 2px 0px 0px;","top:-1px; border-radius: 0px 0px 2px 2px;"]}),K(L(Y,G),{base:W+"left:0px;border-left-color:"+q.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),K(L(Y,G),{base:W+"right:0px;border-right-color:"+q.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this},mouseNear:function(){g(q,this);var Z=q.holdDistance,ee=this.size;return!!(ee&&u(q.mouse.y,ee.top-Z,ee.bottom+Z)&&u(q.mouse.x,ee.left-Z,ee.right+Z))},place:function(){var Z=q.view,ee=q.editable,oe=q.trigger,ie=oe.upper,se=oe.lower,ue=ie||se,le=ue.getParent(),ae={};this.trigger=oe,ie&&g(q,ie,!0),se&&g(q,se,!0),g(q,le,!0),q.inInlineMode&&D(q,!0),le.equals(ee)?(ae.left=Z.scroll.x,ae.right=-Z.scroll.x,ae.width=""):(ae.left=ue.size.left-ue.size.margin.left+Z.scroll.x-(q.inInlineMode?Z.editable.left+Z.editable.border.left:0),ae.width=ue.size.outerWidth+ue.size.margin.left+ue.size.margin.right+Z.scroll.x,ae.right=""),ie&&se?ae.top=ie.size.margin.bottom===se.size.margin.top?0|ie.size.bottom+ie.size.margin.bottom/2:ie.size.margin.bottom<se.size.margin.top?ie.size.bottom+ie.size.margin.bottom:ie.size.bottom+ie.size.margin.bottom-se.size.margin.top:ie?se||(ae.top=ie.size.bottom+ie.size.margin.bottom):ae.top=se.size.top-se.size.margin.top,oe.is(N)||u(ae.top,Z.scroll.y-15,Z.scroll.y+5)?(ae.top=q.inInlineMode?0:Z.scroll.y,this.look(N)):oe.is(w)||u(ae.top,Z.pane.bottom-5,Z.pane.bottom+15)?(ae.top=q.inInlineMode?Z.editable.height+Z.editable.padding.top+Z.editable.padding.bottom:Z.pane.bottom-1,this.look(w)):(q.inInlineMode&&(ae.top-=Z.editable.top+Z.editable.border.top),this.look(R)),q.inInlineMode&&(ae.top--,ae.top+=Z.editable.scroll.top,ae.left+=Z.editable.scroll.left);for(var ce in ae)ae[ce]=CKEDITOR.tools.cssLength(ae[ce]);this.setStyles(ae)},look:function(Z){if(this.oldLook!=Z){for(var ee=this.lineChildren.length,oe;ee--;)(oe=this.lineChildren[ee]).setAttribute("style",oe.base+oe.looks[0|Z/2]);this.oldLook=Z}},wrap:new k("span",q.doc)}),G=X.lineChildren.length;G--;)X.lineChildren[G].appendTo(X);X.look(R),X.appendTo(X.wrap),X.unselectable(),X.lineChildren[0].on("mouseup",function(Z){X.detach(),o(q,function(ee){var oe=q.line.trigger;ee[oe.is(T)?"insertBefore":"insertAfter"](oe.is(T)?oe.lower:oe.upper)},!0),q.editor.focus(),B.ie||q.enterMode==CKEDITOR.ENTER_BR||q.hotNode.scrollIntoView(),Z.data.preventDefault(!0)}),X.on("mousedown",function(Z){Z.data.preventDefault(!0)}),q.line=X}function o(q,G,X){var j=new CKEDITOR.dom.range(q.doc),Z=q.editor,ee;B.ie&&q.enterMode==CKEDITOR.ENTER_BR?ee=q.doc.createText(b):(ee=(ee=h(q.element,!0))&&ee.data("cke-enter-mode")||q.enterMode,ee=new k(z[ee],q.doc),ee.is("br")||q.doc.createText(b).appendTo(ee)),X&&Z.fire("saveSnapshot"),G(ee),j.moveToPosition(ee,CKEDITOR.POSITION_AFTER_START),Z.getSelection().selectRanges([j]),q.hotNode=ee,X&&Z.fire("saveSnapshot")}function n(q,G){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function X(j){var Z=B.ie&&9>B.version?" ":b,ee=q.hotNode&&q.hotNode.getText()==Z&&q.element.equals(q.hotNode)&&q.lastCmdDirection===!!G;o(q,function(oe){ee&&q.hotNode&&q.hotNode.remove(),oe[G?"insertAfter":"insertBefore"](j),oe.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!G}),q.lastCmdDirection=!!G}),B.ie||q.enterMode==CKEDITOR.ENTER_BR||q.hotNode.scrollIntoView(),q.line.detach()}return function(j){j=j.getSelection().getStartElement();var Z;if(j=j.getAscendant(M,1),!d(q,j)&&j&&!j.equals(q.editable)&&!j.contains(q.editable)){(Z=h(j))&&Z.getAttribute("contenteditable")=="false"&&(j=Z),q.element=j,Z=a(q,j,!G);var ee;l(Z)&&Z.is(q.triggers)&&Z.is($)&&(!a(q,Z,!G)||(ee=a(q,Z,!G))&&l(ee)&&ee.is(q.triggers))?X(Z):(ee=r(q),l(ee)&&(a(q,ee,!G)?(j=a(q,ee,!G))&&l(j)&&j.is(q.triggers)&&X(ee):X(ee)))}}}()}}function t(q,G){if(!G||G.type!=CKEDITOR.NODE_ELEMENT||!G.$)return!1;var X=q.line;return X.wrap.equals(G)||X.wrap.contains(G)}function l(q){return q&&q.type==CKEDITOR.NODE_ELEMENT&&q.$}function f(q){if(!l(q))return!1;var G;return(G=E(q))||(l(q)?(G={left:1,right:1,center:1},G=!(!G[q.getComputedStyle("float")]&&!G[q.getAttribute("align")])):G=!1),G}function E(q){return!!{absolute:1,fixed:1}[q.getComputedStyle("position")]}function C(q,G){return l(G)?G.is(q.triggers):null}function d(q,G){if(!G)return!1;for(var X=G.getParents(1),j=X.length;j--;)for(var Z=q.tabuList.length;Z--;)if(X[j].hasAttribute(q.tabuList[Z]))return!0;return!1}function p(q,G,X){return G=G[X?"getLast":"getFirst"](function(j){return q.isRelevant(j)&&!j.is(P)}),G?(g(q,G),X?G.size.top>q.mouse.y:G.size.bottom<q.mouse.y):!1}function I(q){var ee=q.editable,G=q.mouse,X=q.view,j=q.triggerOffset;D(q);var Z=G.y>(q.inInlineMode?X.editable.top+X.editable.height/2:Math.min(X.editable.height,X.pane.height)/2),ee=ee[Z?"getLast":"getFirst"](function(oe){return!(Q(oe)||J(oe))});return!ee||(t(q,ee)&&(ee=q.line.wrap[Z?"getPrevious":"getNext"](function(oe){return!(Q(oe)||J(oe))})),!l(ee)||f(ee)||!C(q,ee))?null:(g(q,ee),!Z&&0<=ee.size.top&&u(G.y,0,ee.size.top+j)?(q=q.inInlineMode||X.scroll.y===0?N:R,new c([null,ee,T,y,q])):Z&&ee.size.bottom<=X.pane.height&&u(G.y,ee.size.bottom-j,X.pane.height)?(q=q.inInlineMode||u(ee.size.bottom,X.pane.height-j,X.pane.height)?w:R,new c([ee,null,x,y,q])):null)}function _(q){var G=q.mouse,X=q.view,Z=q.triggerOffset,j=r(q);if(!j)return null;g(q,j);var Z=Math.min(Z,0|j.size.outerHeight/2),ee=[],oe,ie;if(u(G.y,j.size.top-1,j.size.top+Z))ie=!1;else if(u(G.y,j.size.bottom-Z,j.size.bottom+1))ie=!0;else return null;if(f(j)||p(q,j,ie)||j.getParent().is(A))return null;var se=a(q,j,!ie);if(se){if(se&&se.type==CKEDITOR.NODE_TEXT)return null;if(l(se)){if(f(se)||!C(q,se)||se.getParent().is(A))return null;ee=[se,j][ie?"reverse":"concat"]().concat([S,y])}}else j.equals(q.editable[ie?"getLast":"getFirst"](q.isRelevant))?(D(q),ie&&u(G.y,j.size.bottom-Z,X.pane.height)&&u(j.size.bottom,X.pane.height-Z,X.pane.height)?oe=w:u(G.y,0,j.size.top+Z)&&(oe=N)):oe=R,ee=[null,j][ie?"reverse":"concat"]().concat([ie?x:T,y,oe,j.equals(q.editable[ie?"getLast":"getFirst"](q.isRelevant))?ie?w:N:R]);return 0 in ee?new c(ee):null}function m(q,G,X,j){for(var Z=G.getDocumentPosition(),ee={},oe={},ie={},se={},ue=ne.length;ue--;)ee[ne[ue]]=parseInt(G.getComputedStyle.call(G,"border-"+ne[ue]+"-width"),10)||0,ie[ne[ue]]=parseInt(G.getComputedStyle.call(G,"padding-"+ne[ue]),10)||0,oe[ne[ue]]=parseInt(G.getComputedStyle.call(G,"margin-"+ne[ue]),10)||0;return X&&!j||O(q,j),se.top=Z.y-(X?0:q.view.scroll.y),se.left=Z.x-(X?0:q.view.scroll.x),se.outerWidth=G.$.offsetWidth,se.outerHeight=G.$.offsetHeight,se.height=se.outerHeight-(ie.top+ie.bottom+ee.top+ee.bottom),se.width=se.outerWidth-(ie.left+ie.right+ee.left+ee.right),se.bottom=se.top+se.outerHeight,se.right=se.left+se.outerWidth,q.inInlineMode&&(se.scroll={top:G.$.scrollTop,left:G.$.scrollLeft}),K({border:ee,padding:ie,margin:oe,ignoreScroll:X},se,!0)}function g(q,G,X){if(!l(G))return G.size=null;if(!G.size)G.size={};else if(G.size.ignoreScroll==X&&G.size.date>new Date-U)return null;return K(G.size,m(q,G,X),{date:+new Date},!0)}function D(q,G){q.view.editable=m(q,q.editable,G,!0)}function O(q,G){q.view||(q.view={});var X=q.view;if(!(!G&&X&&X.date>new Date-U)){var j=q.win,X=j.getScrollPosition(),j=j.getViewPaneSize();K(q.view,{scroll:{x:X.x,y:X.y,width:q.doc.$.documentElement.scrollWidth-j.width,height:q.doc.$.documentElement.scrollHeight-j.height},pane:{width:j.width,height:j.height,bottom:j.height+X.y},date:+new Date},!0)}}function v(q,G,X,j){for(var Z=j,ee=j,oe=0,ie=!1,se=!1,ue=q.view.pane.height,le=q.mouse;le.y+oe<ue&&0<le.y-oe&&(ie||(ie=G(Z,j)),se||(se=G(ee,j)),!ie&&0<le.y-oe&&(Z=X(q,{x:le.x,y:le.y-oe})),!se&&le.y+oe<ue&&(ee=X(q,{x:le.x,y:le.y+oe})),!(ie&&se));)oe+=2;return new c([Z,ee,null,null])}CKEDITOR.plugins.add("magicline",{init:function(q){var G=q.config,X=G.magicline_triggerOffset||30,j={editor:q,enterMode:G.enterMode,triggerOffset:X,holdDistance:0|X*(G.magicline_holdDistance||.5),boxColor:G.magicline_color||"#ff0000",rtl:G.contentsLangDirection=="rtl",tabuList:["data-cke-hidden-sel"].concat(G.magicline_tabuList||[]),triggers:G.magicline_everywhere?M:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}},Z,ee,oe;j.isRelevant=function(ie){return l(ie)&&!t(j,ie)&&!f(ie)},q.on("contentDom",function(){var ie=q.editable(),se=q.document,ue=q.window;K(j,{editable:ie,inInlineMode:ie.isInline(),doc:se,win:ue,hotNode:null},!0),j.boundary=j.inInlineMode?j.editable:j.doc.getDocumentElement(),ie.is(H.$inline)||(j.inInlineMode&&!E(ie)&&ie.setStyles({position:"relative",top:null,left:null}),i.call(this,j),O(j),ie.attachListener(q,"beforeUndoImage",function(){j.line.detach()}),ie.attachListener(q,"beforeGetData",function(){j.line.wrap.getParent()&&(j.line.detach(),q.once("getData",function(){j.line.attach()},null,null,1e3))},null,null,0),ie.attachListener(j.inInlineMode?se:se.getWindow().getFrame(),"mouseout",function(le){if(q.mode=="wysiwyg")if(j.inInlineMode){var ae=le.data.$.clientX;le=le.data.$.clientY,O(j),D(j,!0);var ce=j.view.editable,de=j.view.scroll;ae>ce.left-de.x&&ae<ce.right-de.x&&le>ce.top-de.y&&le<ce.bottom-de.y||(clearTimeout(oe),oe=null,j.line.detach())}else clearTimeout(oe),oe=null,j.line.detach()}),ie.attachListener(ie,"keyup",function(){j.hiddenMode=0}),ie.attachListener(ie,"keydown",function(le){if(q.mode=="wysiwyg")switch(le.data.getKeystroke()){case 2228240:case 16:j.hiddenMode=1,j.line.detach()}}),ie.attachListener(j.inInlineMode?ie:se,"mousemove",function(le){if(ee=!0,q.mode=="wysiwyg"&&!q.readOnly&&!oe){var ae={x:le.data.$.clientX,y:le.data.$.clientY};oe=setTimeout(function(){j.mouse=ae,oe=j.trigger=null,O(j),ee&&!j.hiddenMode&&q.focusManager.hasFocus&&!j.line.mouseNear()&&(j.element=te(j,!0))&&((j.trigger=I(j)||_(j)||re(j))&&!d(j,j.trigger.upper||j.trigger.lower)?j.line.attach().place():(j.trigger=null,j.line.detach()),ee=!1)},30)}}),ie.attachListener(ue,"scroll",function(){q.mode=="wysiwyg"&&(j.line.detach(),B.webkit&&(j.hiddenMode=1,clearTimeout(Z),Z=setTimeout(function(){j.mouseDown||(j.hiddenMode=0)},50)))}),ie.attachListener(F?se:ue,"mousedown",function(){q.mode=="wysiwyg"&&(j.line.detach(),j.hiddenMode=1,j.mouseDown=1)}),ie.attachListener(F?se:ue,"mouseup",function(){j.hiddenMode=0,j.mouseDown=0}),q.addCommand("accessPreviousSpace",n(j)),q.addCommand("accessNextSpace",n(j,!0)),q.setKeystroke([[G.magicline_keystrokePrevious,"accessPreviousSpace"],[G.magicline_keystrokeNext,"accessNextSpace"]]),q.on("loadSnapshot",function(){var le,ae,ce,de;for(de in{p:1,br:1,div:1})for(le=q.document.getElementsByTag(de),ce=le.count();ce--;)if((ae=le.getItem(ce)).data("cke-magicline-hot")){j.hotNode=ae,j.lastCmdDirection=ae.data("cke-magicline-dir")==="true";return}}),this.backdoor={accessFocusSpace:o,boxTrigger:c,isLine:t,getAscendantTrigger:r,getNonEmptyNeighbour:a,getSize:m,that:j,triggerEdge:_,triggerEditable:I,triggerExpand:re})},this)}});var K=CKEDITOR.tools.extend,k=CKEDITOR.dom.element,L=k.createFromHtml,B=CKEDITOR.env,F=CKEDITOR.env.ie&&9>CKEDITOR.env.version,H=CKEDITOR.dtd,z={},T=128,x=64,S=32,y=16,N=4,w=2,R=1,b=" ",A=H.$listItem,P=H.$tableContent,$=K({},H.$nonEditable,H.$empty),M=H.$block,U=100,V="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",W=V+"border-color:transparent;display:block;border-style:solid;",Y="<span>"+b+"</span>";z[CKEDITOR.ENTER_BR]="br",z[CKEDITOR.ENTER_P]="p",z[CKEDITOR.ENTER_DIV]="div",c.prototype={set:function(q,G,X){return this.properties=q+G+(X||R),this},is:function(q){return(this.properties&q)==q}};var te=function(){function q(G,X){var j=G.$.elementFromPoint(X.x,X.y);return j&&j.nodeType?new CKEDITOR.dom.element(j):null}return function(G,X,j){if(!G.mouse)return null;var Z=G.doc,ee=G.line.wrap;j=j||G.mouse;var oe=q(Z,j);return X&&t(G,oe)&&(ee.hide(),oe=q(Z,j),ee.show()),!oe||oe.type!=CKEDITOR.NODE_ELEMENT||!oe.$||B.ie&&9>B.version&&!G.boundary.equals(oe)&&!G.boundary.contains(oe)?null:oe}}(),Q=CKEDITOR.dom.walker.whitespaces(),J=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),re=function(){function q(X){var j=X.element,Z,ee,oe;if(!l(j)||j.contains(X.editable)||j.isReadOnly())return null;if(oe=v(X,function(ae,ce){return!ce.equals(ae)},function(ae,ce){return te(ae,!0,ce)},j),Z=oe.upper,ee=oe.lower,e(X,Z,ee))return oe.set(S,8);if(Z&&j.contains(Z))for(;!Z.getParent().equals(j);)Z=Z.getParent();else Z=j.getFirst(function(ae){return G(X,ae)});if(ee&&j.contains(ee))for(;!ee.getParent().equals(j);)ee=ee.getParent();else ee=j.getLast(function(ae){return G(X,ae)});if(!Z||!ee||(g(X,Z),g(X,ee),!u(X.mouse.y,Z.size.top,ee.size.bottom)))return null;for(var j=Number.MAX_VALUE,ie,se,ue,le;ee&&!ee.equals(Z)&&(se=Z.getNext(X.isRelevant));)ie=Math.abs(s(X,Z,se)-X.mouse.y),ie<j&&(j=ie,ue=Z,le=se),Z=se,g(X,Z);return!ue||!le||!u(X.mouse.y,ue.size.top,le.size.bottom)?null:(oe.upper=ue,oe.lower=le,oe.set(S,8))}function G(X,j){return!(j&&j.type==CKEDITOR.NODE_TEXT||J(j)||f(j)||t(X,j)||j.type==CKEDITOR.NODE_ELEMENT&&j.$&&j.is("br"))}return function(X){var j=q(X),Z;if(Z=j){Z=j.upper;var ee=j.lower;Z=!Z||!ee||f(ee)||f(Z)||ee.equals(Z)||Z.equals(ee)||ee.contains(Z)||Z.contains(ee)?!1:!!(C(X,Z)&&C(X,ee)&&e(X,Z,ee))}return Z?j:null}}(),ne=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){function e(u){if(!u||u.type!=CKEDITOR.NODE_ELEMENT||u.getName()!="form")return[];for(var h=[],i=["style","className"],o=0;o<i.length;o++){var n=u.$.elements.namedItem(i[o]);n&&(n=new CKEDITOR.dom.element(n),h.push([n,n.nextSibling]),n.remove())}return h}function c(u,h){if(u&&u.type==CKEDITOR.NODE_ELEMENT&&u.getName()=="form"&&0<h.length)for(var i=h.length-1;0<=i;i--){var o=h[i][0],n=h[i][1];n?o.insertBefore(n):o.appendTo(u)}}function r(u,h){var i=e(u),o={},n=u.$;return h||(o.class=n.className||"",n.className=""),o.inline=n.style.cssText||"",h||(n.style.cssText="position: static; overflow: visible"),c(i),o}function s(u,h){var i=e(u),o=u.$;"class"in h&&(o.className=h.class),"inline"in h&&(o.style.cssText=h.inline),c(i)}function a(u){if(!u.editable().isInline()){var h=CKEDITOR.instances,i;for(i in h){var o=h[i];o.mode!="wysiwyg"||o.readOnly||(o=o.document.getBody(),o.setAttribute("contentEditable",!1),o.setAttribute("contentEditable",!0))}u.editable().hasFocus&&(u.toolbox.focus(),u.focus())}}CKEDITOR.plugins.add("maximize",{init:function(u){function h(){var C=n.getViewPaneSize();u.resize(C.width,C.height,null,!0)}if(u.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var i=u.lang,o=CKEDITOR.document,n=o.getWindow(),t,l,f,E=CKEDITOR.TRISTATE_OFF;u.addCommand("maximize",{modes:{wysiwyg:!CKEDITOR.env.iOS,source:!CKEDITOR.env.iOS},readOnly:1,editorFocus:!1,exec:function(){var C=u.container.getFirst(function(m){return m.type==CKEDITOR.NODE_ELEMENT&&m.hasClass("cke_inner")}),d=u.ui.space("contents");if(u.mode=="wysiwyg"){var p=u.getSelection();t=p&&p.getRanges(),l=n.getScrollPosition()}else{var I=u.editable().$;t=!CKEDITOR.env.ie&&[I.selectionStart,I.selectionEnd],l=[I.scrollLeft,I.scrollTop]}if(this.state==CKEDITOR.TRISTATE_OFF){for(n.on("resize",h),f=n.getScrollPosition(),p=u.container;p=p.getParent();)p.setCustomData("maximize_saved_styles",r(p)),p.setStyle("z-index",u.config.baseFloatZIndex-5);d.setCustomData("maximize_saved_styles",r(d,!0)),C.setCustomData("maximize_saved_styles",r(C,!0)),d={overflow:CKEDITOR.env.webkit?"":"hidden",width:0,height:0},o.getDocumentElement().setStyles(d),!CKEDITOR.env.gecko&&o.getDocumentElement().setStyle("position","fixed"),CKEDITOR.env.gecko&&CKEDITOR.env.quirks||o.getBody().setStyles(d),CKEDITOR.env.ie?setTimeout(function(){n.$.scrollTo(0,0)},0):n.$.scrollTo(0,0),C.setStyle("position",CKEDITOR.env.gecko&&CKEDITOR.env.quirks?"fixed":"absolute"),C.$.offsetLeft,C.setStyles({"z-index":u.config.baseFloatZIndex-5,left:"0px",top:"0px"}),C.addClass("cke_maximized"),h(),d=C.getDocumentPosition(),C.setStyles({left:-1*d.x+"px",top:-1*d.y+"px"}),CKEDITOR.env.gecko&&a(u)}else if(this.state==CKEDITOR.TRISTATE_ON){n.removeListener("resize",h);for(var p=[d,C],_=0;_<p.length;_++)s(p[_],p[_].getCustomData("maximize_saved_styles")),p[_].removeCustomData("maximize_saved_styles");for(p=u.container;p=p.getParent();)s(p,p.getCustomData("maximize_saved_styles")),p.removeCustomData("maximize_saved_styles");CKEDITOR.env.ie?setTimeout(function(){n.$.scrollTo(f.x,f.y)},0):n.$.scrollTo(f.x,f.y),C.removeClass("cke_maximized"),CKEDITOR.env.webkit&&(C.setStyle("display","inline"),setTimeout(function(){C.setStyle("display","block")},0)),u.fire("resize",{outerHeight:u.container.$.offsetHeight,contentsHeight:d.$.offsetHeight,outerWidth:u.container.$.offsetWidth})}this.toggleState(),(p=this.uiItems[0])&&(d=this.state==CKEDITOR.TRISTATE_OFF?i.maximize.maximize:i.maximize.minimize,p=CKEDITOR.document.getById(p._.id),p.getChild(1).setHtml(d),p.setAttribute("title",d),p.setAttribute("href",'javascript:void("'+d+'");')),u.mode=="wysiwyg"?t?(CKEDITOR.env.gecko&&a(u),u.getSelection().selectRanges(t),(I=u.getSelection().getStartElement())&&I.scrollIntoView(!0)):n.$.scrollTo(l.x,l.y):(t&&(I.selectionStart=t[0],I.selectionEnd=t[1]),I.scrollLeft=l[0],I.scrollTop=l[1]),t=l=null,E=this.state,u.fire("maximize",this.state)},canUndo:!1}),u.ui.addButton&&u.ui.addButton("Maximize",{label:i.maximize.maximize,command:"maximize",toolbar:"tools,10"}),u.on("mode",function(){var C=u.getCommand("maximize");C.setState(C.state==CKEDITOR.TRISTATE_DISABLED?CKEDITOR.TRISTATE_DISABLED:E)},null,null,100)}}})}(),function(){var e={canUndo:!1,async:!0,exec:function(c){c.getClipboardData({title:c.lang.pastetext.title},function(r){r&&c.fire("paste",{type:"text",dataValue:r.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()}),c.fire("afterCommandExec",{name:"pastetext",command:e,returnValue:!!r})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(c){c.addCommand("pastetext",e),c.ui.addButton&&c.ui.addButton("PasteText",{label:c.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),c.config.forcePasteAsPlainText&&c.on("beforePaste",function(r){r.data.type!="html"&&(r.data.type="text")}),c.on("pasteState",function(r){c.getCommand("pastetext").setState(r.data)})}})}(),function(){function e(r,s,a){var u=CKEDITOR.cleanWord;return u?a():(r=CKEDITOR.getUrl(r.config.pasteFromWordCleanupFile||s+"filter/default.js"),CKEDITOR.scriptLoader.load(r,a,null,!0)),!u}function c(r){r.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(r){var s=0,a=this.path;r.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(u){var h=this;s=1,u.once("beforePaste",c),u.getClipboardData({title:u.lang.pastefromword.title},function(i){i&&u.fire("paste",{type:"html",dataValue:i.dataValue,method:"paste",dataTransfer:CKEDITOR.plugins.clipboard.initPasteDataTransfer()}),u.fire("afterCommandExec",{name:"pastefromword",command:h,returnValue:!!i})})}}),r.ui.addButton&&r.ui.addButton("PasteFromWord",{label:r.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),r.on("pasteState",function(u){r.getCommand("pastefromword").setState(u.data)}),r.on("paste",function(u){var h=u.data,i=h.dataValue;if(i&&(s||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(i))){h.dontFilter=!0;var o=e(r,a,function(){o?r.fire("paste",h):(!r.config.pasteFromWordPromptCleanup||s||confirm(r.lang.pastefromword.confirmCleanup))&&(h.dataValue=CKEDITOR.cleanWord(i,r)),s=0});o&&u.cancel()}},null,null,3)}})}(),CKEDITOR.plugins.add("removeformat",{init:function(e){e.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),e.ui.addButton&&e.ui.addButton("RemoveFormat",{label:e.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(e){for(var c=e._.removeFormatRegex||(e._.removeFormatRegex=new RegExp("^(?:"+e.config.removeFormatTags.replace(/,/g,"|")+")$","i")),r=e._.removeAttributes||(e._.removeAttributes=e.config.removeFormatAttributes.split(",")),s=CKEDITOR.plugins.removeformat.filter,a=e.getSelection().getRanges(),u=a.createIterator(),h=function(f){return f.type==CKEDITOR.NODE_ELEMENT},i;i=u.getNextRange();){i.collapsed||i.enlarge(CKEDITOR.ENLARGE_ELEMENT);var o=i.createBookmark(),n=o.startNode,t=o.endNode,l=function(f){for(var E=e.elementPath(f),C=E.elements,d=1,p;(p=C[d])&&!p.equals(E.block)&&!p.equals(E.blockLimit);d++)c.test(p.getName())&&s(e,p)&&f.breakParent(p)};if(l(n),t)for(l(t),n=n.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);n&&!n.equals(t);)if(n.isReadOnly()){if(n.getPosition(t)&CKEDITOR.POSITION_CONTAINS)break;n=n.getNext(h)}else l=n.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),n.getName()=="img"&&n.data("cke-realelement")||!s(e,n)||(c.test(n.getName())?n.remove(1):(n.removeAttributes(r),e.fire("removeFormatCleanup",n))),n=l;i.moveToBookmark(o)}e.forceNextSelectionCheck(),e.getSelection().selectRanges(a)}}},filter:function(e,c){for(var r=e._.removeFormatFilters||[],s=0;s<r.length;s++)if(r[s](c)===!1)return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(e){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(e)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",function(){var e={preserveState:!0,editorFocus:!1,readOnly:1,exec:function(c){this.toggleState(),this.refresh(c)},refresh:function(c){if(c.document){var r=this.state==CKEDITOR.TRISTATE_ON?"attachClass":"removeClass";c.editable()[r]("cke_show_borders")}}};CKEDITOR.plugins.add("showborders",{modes:{wysiwyg:1},onLoad:function(){var c;c=(CKEDITOR.env.ie6Compat?[".%1 table.%2,",".%1 table.%2 td, .%1 table.%2 th","{","border : #d3d3d3 1px dotted","}"]:".%1 table.%2,;.%1 table.%2 > tr > td, .%1 table.%2 > tr > th,;.%1 table.%2 > tbody > tr > td, .%1 table.%2 > tbody > tr > th,;.%1 table.%2 > thead > tr > td, .%1 table.%2 > thead > tr > th,;.%1 table.%2 > tfoot > tr > td, .%1 table.%2 > tfoot > tr > th;{;border : #d3d3d3 1px dotted;}".split(";")).join("").replace(/%2/g,"cke_show_border").replace(/%1/g,"cke_show_borders "),CKEDITOR.addCss(c)},init:function(c){var r=c.addCommand("showborders",e);r.canUndo=!1,c.config.startupShowBorders!==!1&&r.setState(CKEDITOR.TRISTATE_ON),c.on("mode",function(){r.state!=CKEDITOR.TRISTATE_DISABLED&&r.refresh(c)},null,null,100),c.on("contentDom",function(){r.state!=CKEDITOR.TRISTATE_DISABLED&&r.refresh(c)}),c.on("removeFormatCleanup",function(s){s=s.data,c.getCommand("showborders").state==CKEDITOR.TRISTATE_ON&&s.is("table")&&(!s.hasAttribute("border")||0>=parseInt(s.getAttribute("border"),10))&&s.addClass("cke_show_border")})},afterInit:function(c){var r=c.dataProcessor;c=r&&r.dataFilter,r=r&&r.htmlFilter,c&&c.addRules({elements:{table:function(s){s=s.attributes;var a=s.class,u=parseInt(s.border,10);u&&!(0>=u)||a&&a.indexOf("cke_show_border")!=-1||(s.class=(a||"")+" cke_show_border")}}}),r&&r.addRules({elements:{table:function(s){s=s.attributes;var a=s.class;a&&(s.class=a.replace("cke_show_border","").replace(/\s{2}/," ").replace(/^\s+|\s+$/,""))}}})}}),CKEDITOR.on("dialogDefinition",function(c){var r=c.data.name;(r=="table"||r=="tableProperties")&&(c=c.data.definition,r=c.getContents("info").get("txtBorder"),r.commit=CKEDITOR.tools.override(r.commit,function(s){return function(a,u){s.apply(this,arguments);var h=parseInt(this.getValue(),10);u[!h||0>=h?"addClass":"removeClass"]("cke_show_border")}}),(c=(c=c.getContents("advanced"))&&c.get("advCSSClasses"))&&(c.setup=CKEDITOR.tools.override(c.setup,function(s){return function(){s.apply(this,arguments),this.setValue(this.getValue().replace(/cke_show_border/,""))}}),c.commit=CKEDITOR.tools.override(c.commit,function(s){return function(a,u){s.apply(this,arguments),parseInt(u.getAttribute("border"),10)||u.addClass("cke_show_border")}})))})}(),function(){CKEDITOR.plugins.add("sourcearea",{init:function(c){function r(){var u=a&&this.equals(CKEDITOR.document.getActive());this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show(),u&&this.focus()}if(c.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var s=CKEDITOR.plugins.sourcearea;c.addMode("source",function(u){var h=c.ui.space("contents").getDocument().createElement("textarea");h.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",c.config.sourceAreaTabSize||4))),h.setAttribute("dir","ltr"),h.addClass("cke_source").addClass("cke_reset").addClass("cke_enable_context_menu"),c.ui.space("contents").append(h),h=c.editable(new e(c,h)),h.setData(c.getData(1)),CKEDITOR.env.ie&&(h.attachListener(c,"resize",r,h),h.attachListener(CKEDITOR.document.getWindow(),"resize",r,h),CKEDITOR.tools.setTimeout(r,0,h)),c.fire("ariaWidget",this),u()}),c.addCommand("source",s.commands.source),c.ui.addButton&&c.ui.addButton("Source",{label:c.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),c.on("mode",function(){c.getCommand("source").setState(c.mode=="source"?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)});var a=CKEDITOR.env.ie&&CKEDITOR.env.version==9}}});var e=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(c){this.setValue(c),this.status="ready",this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(c){this[(c?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){e.baseProto.detach.call(this),this.clearCustomData(),this.remove()}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(e){e.mode=="wysiwyg"&&e.fire("saveSnapshot"),e.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),e.setMode(e.mode=="source"?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{af:1,ar:1,bg:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,en:1,"en-gb":1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lt:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,tt:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(e){var c=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),e.addCommand("specialchar",{exec:function(){var r=e.langCode,r=c.availableLangs[r]?r:c.availableLangs[r.replace(/-.*/,"")]?r.replace(/-.*/,""):"en";CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(c.path+"dialogs/lang/"+r+".js"),function(){CKEDITOR.tools.extend(e.lang.specialchar,c.langEntries[r]),e.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),e.ui.addButton&&e.ui.addButton("SpecialChar",{label:e.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),CKEDITOR.plugins.add("menubutton",{requires:"button,menu",onLoad:function(){var e=function(c){var r=this._,s=r.menu;r.state!==CKEDITOR.TRISTATE_DISABLED&&(r.on&&s?s.hide():(r.previousState=r.state,s||(s=r.menu=new CKEDITOR.menu(c,{panel:{className:"cke_menu_panel",attributes:{"aria-label":c.lang.common.options}}}),s.onHide=CKEDITOR.tools.bind(function(){var a=this.command?c.getCommand(this.command).modes:this.modes;this.setState(!a||a[c.mode]?r.previousState:CKEDITOR.TRISTATE_DISABLED),r.on=0},this),this.onMenu&&s.addListener(this.onMenu)),this.setState(CKEDITOR.TRISTATE_ON),r.on=1,setTimeout(function(){s.show(CKEDITOR.document.getById(r.id),4)},0)))};CKEDITOR.ui.menuButton=CKEDITOR.tools.createClass({base:CKEDITOR.ui.button,$:function(c){delete c.panel,this.base(c),this.hasArrow=!0,this.click=e},statics:{handler:{create:function(c){return new CKEDITOR.ui.menuButton(c)}}}})},beforeInit:function(e){e.ui.addHandler(CKEDITOR.UI_MENUBUTTON,CKEDITOR.ui.menuButton.handler)}}),CKEDITOR.UI_MENUBUTTON="menubutton",CKEDITOR.plugins.add("scayt",{requires:"menubutton,dialog",tabToOpen:null,dialogName:"scaytDialog",init:function(e){var c=this,r=CKEDITOR.plugins.scayt;this.bindEvents(e),this.parseConfig(e),this.addRule(e),CKEDITOR.dialog.add(this.dialogName,CKEDITOR.getUrl(this.path+"dialogs/options.js")),this.addMenuItems(e);var s=e.lang.scayt,a=CKEDITOR.env;e.ui.add("Scayt",CKEDITOR.UI_MENUBUTTON,{label:s.text_title,title:e.plugins.wsc?e.lang.wsc.title:s.text_title,modes:{wysiwyg:!(a.ie&&(8>a.version||a.quirks))},toolbar:"spellchecker,20",refresh:function(){var u=e.ui.instances.Scayt.getState();e.scayt&&(u=r.state[e.name]?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF),e.fire("scaytButtonState",u)},onRender:function(){var u=this;e.on("scaytButtonState",function(h){typeof h.data!==void 0&&u.setState(h.data)})},onMenu:function(){var u=e.scayt;return e.getMenuItem("scaytToggle").label=e.lang.scayt[u&&r.state[e.name]?"btn_disable":"btn_enable"],u={scaytToggle:CKEDITOR.TRISTATE_OFF,scaytOptions:u?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytLangs:u?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytDict:u?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,scaytAbout:u?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,WSC:e.plugins.wsc?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED},e.config.scayt_uiTabs[0]||delete u.scaytOptions,e.config.scayt_uiTabs[1]||delete u.scaytLangs,e.config.scayt_uiTabs[2]||delete u.scaytDict,u}}),e.contextMenu&&e.addMenuItems&&(e.contextMenu.addListener(function(u,h){var i=e.scayt,o;if(i){var n=i.getSelectionNode();(n=n&&n.getAttribute(i.getNodeAttribute()))&&(o=c.menuGenerator(e,n,c),i.showBanner("."+e.contextMenu._.definition.panel.className.split(" ").join(" .")))}return o}),e.contextMenu._.onHide=CKEDITOR.tools.override(e.contextMenu._.onHide,function(u){return function(){var h=e.scayt;return h&&h.hideBanner(),u.apply(this)}}))},addMenuItems:function(e){var c=this,r=CKEDITOR.plugins.scayt;e.addMenuGroup("scaytButton");var s=e.config.scayt_contextMenuItemsOrder.split("|");if(s&&s.length)for(var a=0;a<s.length;a++)e.addMenuGroup("scayt_"+s[a],a-10);e.addCommand("scaytToggle",{exec:function(u){var h=u.scayt;r.state[u.name]=!r.state[u.name],r.state[u.name]===!0?h||r.createScayt(u):h&&r.destroy(u)}}),e.addCommand("scaytAbout",{exec:function(u){u.scayt.tabToOpen="about",u.lockSelection(),u.openDialog(c.dialogName)}}),e.addCommand("scaytOptions",{exec:function(u){u.scayt.tabToOpen="options",u.lockSelection(),u.openDialog(c.dialogName)}}),e.addCommand("scaytLangs",{exec:function(u){u.scayt.tabToOpen="langs",u.lockSelection(),u.openDialog(c.dialogName)}}),e.addCommand("scaytDict",{exec:function(u){u.scayt.tabToOpen="dictionaries",u.lockSelection(),u.openDialog(c.dialogName)}}),s={scaytToggle:{label:e.lang.scayt.btn_enable,group:"scaytButton",command:"scaytToggle"},scaytAbout:{label:e.lang.scayt.btn_about,group:"scaytButton",command:"scaytAbout"},scaytOptions:{label:e.lang.scayt.btn_options,group:"scaytButton",command:"scaytOptions"},scaytLangs:{label:e.lang.scayt.btn_langs,group:"scaytButton",command:"scaytLangs"},scaytDict:{label:e.lang.scayt.btn_dictionaries,group:"scaytButton",command:"scaytDict"}},e.plugins.wsc&&(s.WSC={label:e.lang.wsc.toolbar,group:"scaytButton",onClick:function(){var u=CKEDITOR.plugins.scayt,h=e.scayt,i=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?e.container.getText():e.document.getBody().getText();(i=i.replace(/\s/g,""))?(h&&u.state[e.name]&&h.setMarkupPaused&&h.setMarkupPaused(!0),e.lockSelection(),e.execCommand("checkspell")):alert("Nothing to check!")}}),e.addMenuItems(s)},bindEvents:function(e){function c(){var o=e.scayt;o&&(o.removeMarkupInSelectionNode(),o.fire("startSpellCheck"))}var r=CKEDITOR.plugins.scayt,s=e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE,a=function(){r.destroy(e)},u=function(){!r.state[e.name]||e.readOnly||e.scayt||r.createScayt(e)},h=function(){var o=e.editable();o.attachListener(o,"focus",function(n){CKEDITOR.plugins.scayt&&!e.scayt&&setTimeout(u,0),n=CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state[e.name]&&e.scayt;var t,l;if((s||n)&&e._.savedSelection){n=e._.savedSelection.getSelectedElement(),n=!n&&e._.savedSelection.getRanges();for(var f=0;f<n.length;f++)l=n[f],typeof l.startContainer.$.nodeValue=="string"&&(t=l.startContainer.getText().length,(t<l.startOffset||t<l.endOffset)&&e.unlockSelection(!1))}},this,null,-10)},i=function(){s?(e.on("blur",a),e.on("focus",u),e.focusManager.hasFocus&&u()):u(),h()};e.on("contentDom",i),e.on("beforeCommandExec",function(o){var n;o.data.name in r.options.disablingCommandExec&&e.mode=="wysiwyg"?(n=e.scayt)&&(r.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)):(o.data.name==="bold"||o.data.name==="italic"||o.data.name==="underline"||o.data.name==="strike"||o.data.name==="subscript"||o.data.name==="superscript"||o.data.name==="enter")&&(n=e.scayt)&&(n.removeMarkupInSelectionNode(),setTimeout(function(){n.fire("startSpellCheck")},0))}),e.on("beforeSetMode",function(o){o.data=="source"&&((o=e.scayt)&&(r.destroy(e),e.fire("scaytButtonState",CKEDITOR.TRISTATE_DISABLED)),e.document&&e.document.getBody().removeAttribute("_jquid"))}),e.on("afterCommandExec",function(o){var n;e.mode!="wysiwyg"||o.data.name!="undo"&&o.data.name!="redo"||(n=e.scayt)&&setTimeout(function(){n.fire("startSpellCheck")},250)}),e.on("readOnly",function(o){var n;o&&(n=e.scayt,o.editor.readOnly===!0?n&&n.fire("removeMarkupInDocument",{}):n?n.fire("startSpellCheck"):o.editor.mode=="wysiwyg"&&r.state[o.editor.name]===!0&&(r.createScayt(e),o.editor.fire("scaytButtonState",CKEDITOR.TRISTATE_ON)))}),e.on("beforeDestroy",a),e.on("setData",function(){a(),(e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE||e.plugins.divarea)&&i()},this,null,50),e.on("insertElement",function(){CKEDITOR.env.ie?setTimeout(function(){c()},50):c()},this,null,50),e.on("insertHtml",function(){c()},this,null,50),e.on("insertText",function(){c()},this,null,50),e.on("scaytDialogShown",function(o){o.data.selectPage(e.scayt.tabToOpen)}),e.on("paste",function(o){(o=e.scayt)&&o.removeMarkupInSelectionNode()},null,null,0)},parseConfig:function(e){var c=CKEDITOR.plugins.scayt;if(c.replaceOldOptionsNames(e.config),typeof e.config.scayt_autoStartup!="boolean"&&(e.config.scayt_autoStartup=!1),c.state[e.name]=e.config.scayt_autoStartup,e.config.scayt_contextCommands||(e.config.scayt_contextCommands="ignore|ignoreall|add"),e.config.scayt_contextMenuItemsOrder||(e.config.scayt_contextMenuItemsOrder="suggest|moresuggest|control"),e.config.scayt_sLang||(e.config.scayt_sLang="en_US"),(e.config.scayt_maxSuggestions===void 0||typeof e.config.scayt_maxSuggestions!="number"||0>e.config.scayt_maxSuggestions)&&(e.config.scayt_maxSuggestions=5),(e.config.scayt_minWordLength===void 0||typeof e.config.scayt_minWordLength!="number"||1>e.config.scayt_minWordLength)&&(e.config.scayt_minWordLength=4),(e.config.scayt_customDictionaryIds===void 0||typeof e.config.scayt_customDictionaryIds!="string")&&(e.config.scayt_customDictionaryIds=""),(e.config.scayt_userDictionaryName===void 0||typeof e.config.scayt_userDictionaryName!="string")&&(e.config.scayt_userDictionaryName=null),typeof e.config.scayt_uiTabs=="string"&&e.config.scayt_uiTabs.split(",").length===3){var r=[],s=[];e.config.scayt_uiTabs=e.config.scayt_uiTabs.split(","),CKEDITOR.tools.search(e.config.scayt_uiTabs,function(o){Number(o)===1||Number(o)===0?(s.push(!0),r.push(Number(o))):s.push(!1)}),CKEDITOR.tools.search(s,!1)===null?e.config.scayt_uiTabs=r:e.config.scayt_uiTabs=[1,1,1]}else e.config.scayt_uiTabs=[1,1,1];if(typeof e.config.scayt_serviceProtocol!="string"&&(e.config.scayt_serviceProtocol=null),typeof e.config.scayt_serviceHost!="string"&&(e.config.scayt_serviceHost=null),typeof e.config.scayt_servicePort!="string"&&(e.config.scayt_servicePort=null),typeof e.config.scayt_servicePath!="string"&&(e.config.scayt_servicePath=null),e.config.scayt_moreSuggestions||(e.config.scayt_moreSuggestions="on"),typeof e.config.scayt_customerId!="string"&&(e.config.scayt_customerId="1:WvF0D4-UtPqN1-43nkD4-NKvUm2-daQqk3-LmNiI-z7Ysb4-mwry24-T8YrS3-Q2tpq2"),typeof e.config.scayt_srcUrl!="string"&&(c=document.location.protocol,c=c.search(/https?:/)!=-1?c:"http:",e.config.scayt_srcUrl=c+"//svc.webspellchecker.net/spellcheck31/lf/scayt3/ckscayt/ckscayt.js"),typeof CKEDITOR.config.scayt_handleCheckDirty!="boolean"&&(CKEDITOR.config.scayt_handleCheckDirty=!0),typeof CKEDITOR.config.scayt_handleUndoRedo!="boolean"&&(CKEDITOR.config.scayt_handleUndoRedo=!0),e.config.scayt_disableOptionsStorage){var c=CKEDITOR.tools.isArray(e.config.scayt_disableOptionsStorage)?e.config.scayt_disableOptionsStorage:typeof e.config.scayt_disableOptionsStorage=="string"?[e.config.scayt_disableOptionsStorage]:void 0,a="all options lang ignore-all-caps-words ignore-domain-names ignore-words-with-mixed-cases ignore-words-with-numbers".split(" "),u=["lang","ignore-all-caps-words","ignore-domain-names","ignore-words-with-mixed-cases","ignore-words-with-numbers"],h=CKEDITOR.tools.search,i=CKEDITOR.tools.indexOf;e.config.scayt_disableOptionsStorage=function(n){for(var t=[],l=0;l<n.length;l++){var f=n[l],E=!!h(n,"options");if(!h(a,f)||E&&h(u,function(C){if(C==="lang")return!1}))return;if(h(u,f)&&u.splice(i(u,f),1),f==="all"||E&&h(n,"lang"))return[];f==="options"&&(u=["lang"])}return t=t.concat(u)}(c)}},addRule:function(e){var s=e.dataProcessor,c=s&&s.htmlFilter,r=e._.elementsPath&&e._.elementsPath.filters,s=s&&s.dataFilter,a=e.addRemoveFormatFilter,u=function(i){var o=CKEDITOR.plugins.scayt;if(e.scayt&&i.hasAttribute(o.options.data_attribute_name))return!1},h=function(i){var o=CKEDITOR.plugins.scayt,n=!0;return e.scayt&&i.hasAttribute(o.options.data_attribute_name)&&(n=!1),n};r&&r.push(u),s&&s.addRules({elements:{span:function(i){var o=CKEDITOR.plugins.scayt;return o&&o.state[e.name]&&i.classes&&CKEDITOR.tools.search(i.classes,o.options.misspelled_word_class)&&(i.classes&&i.parent.type===CKEDITOR.NODE_DOCUMENT_FRAGMENT?(delete i.attributes.style,delete i.name):delete i.classes[CKEDITOR.tools.indexOf(i.classes,o.options.misspelled_word_class)]),i}}}),c&&c.addRules({elements:{span:function(i){var o=CKEDITOR.plugins.scayt;return o&&o.state[e.name]&&i.hasClass(o.options.misspelled_word_class)&&i.attributes[o.options.data_attribute_name]&&(i.removeClass(o.options.misspelled_word_class),delete i.attributes[o.options.data_attribute_name],delete i.name),i}}}),a&&a.call(e,h)},scaytMenuDefinition:function(e){var c=this;return e=e.scayt,{scayt_ignore:{label:e.getLocal("btn_ignore"),group:"scayt_control",order:1,exec:function(r){r.scayt.ignoreWord()}},scayt_ignoreall:{label:e.getLocal("btn_ignoreAll"),group:"scayt_control",order:2,exec:function(r){r.scayt.ignoreAllWords()}},scayt_add:{label:e.getLocal("btn_addWord"),group:"scayt_control",order:3,exec:function(r){var s=r.scayt;setTimeout(function(){s.addWordToUserDictionary()},10)}},option:{label:e.getLocal("btn_options"),group:"scayt_control",order:4,exec:function(r){r.scayt.tabToOpen="options",r.lockSelection(),r.openDialog(c.dialogName)},verification:function(r){return r.config.scayt_uiTabs[0]==1}},language:{label:e.getLocal("btn_langs"),group:"scayt_control",order:5,exec:function(r){r.scayt.tabToOpen="langs",r.lockSelection(),r.openDialog(c.dialogName)},verification:function(r){return r.config.scayt_uiTabs[1]==1}},dictionary:{label:e.getLocal("btn_dictionaries"),group:"scayt_control",order:6,exec:function(r){r.scayt.tabToOpen="dictionaries",r.lockSelection(),r.openDialog(c.dialogName)},verification:function(r){return r.config.scayt_uiTabs[2]==1}},about:{label:e.getLocal("btn_about"),group:"scayt_control",order:7,exec:function(r){r.scayt.tabToOpen="about",r.lockSelection(),r.openDialog(c.dialogName)}}}},buildSuggestionMenuItems:function(e,c){var r={},s={},a=e.scayt;if(0<c.length&&c[0]!=="no_any_suggestions")for(var u=0;u<c.length;u++){var h="scayt_suggest_"+CKEDITOR.plugins.scayt.suggestions[u].replace(" ","_");e.addCommand(h,this.createCommand(CKEDITOR.plugins.scayt.suggestions[u])),u<e.config.scayt_maxSuggestions?(e.addMenuItem(h,{label:c[u],command:h,group:"scayt_suggest",order:u+1}),r[h]=CKEDITOR.TRISTATE_OFF):(e.addMenuItem(h,{label:c[u],command:h,group:"scayt_moresuggest",order:u+1}),s[h]=CKEDITOR.TRISTATE_OFF,e.config.scayt_moreSuggestions==="on"&&(e.addMenuItem("scayt_moresuggest",{label:a.getLocal("btn_moreSuggestions"),group:"scayt_moresuggest",order:10,getItems:function(){return s}}),r.scayt_moresuggest=CKEDITOR.TRISTATE_OFF))}else r.no_scayt_suggest=CKEDITOR.TRISTATE_DISABLED,e.addCommand("no_scayt_suggest",{exec:function(){}}),e.addMenuItem("no_scayt_suggest",{label:a.getLocal("btn_noSuggestions")||"no_scayt_suggest",command:"no_scayt_suggest",group:"scayt_suggest",order:0});return r},menuGenerator:function(e,c){var r=e.scayt,s=this.scaytMenuDefinition(e),a={},u=e.config.scayt_contextCommands.split("|");if(r.fire("getSuggestionsList",{lang:r.getLang(),word:c}),a=this.buildSuggestionMenuItems(e,CKEDITOR.plugins.scayt.suggestions),e.config.scayt_contextCommands=="off")return a;for(var h in s)(CKEDITOR.tools.indexOf(u,h.replace("scayt_",""))!=-1||e.config.scayt_contextCommands=="all")&&(a[h]=CKEDITOR.TRISTATE_OFF,typeof s[h].verification!="function"||s[h].verification(e)||delete a[h],e.addCommand(h,{exec:s[h].exec}),e.addMenuItem(h,{label:e.lang.scayt[s[h].label]||s[h].label,command:h,group:s[h].group,order:s[h].order}));return a},createCommand:function(e){return{exec:function(c){c.scayt.replaceSelectionNode({word:e})}}}}),CKEDITOR.plugins.scayt={state:{},suggestions:[],loadingHelper:{loadOrder:[]},isLoading:!1,options:{disablingCommandExec:{source:!0,newpage:!0,templates:!0},data_attribute_name:"data-scayt-word",misspelled_word_class:"scayt-misspell-word"},backCompatibilityMap:{scayt_service_protocol:"scayt_serviceProtocol",scayt_service_host:"scayt_serviceHost",scayt_service_port:"scayt_servicePort",scayt_service_path:"scayt_servicePath",scayt_customerid:"scayt_customerId"},replaceOldOptionsNames:function(e){for(var c in e)c in this.backCompatibilityMap&&(e[this.backCompatibilityMap[c]]=e[c],delete e[c])},createScayt:function(e){var c=this;this.loadScaytLibrary(e,function(r){var s={lang:r.config.scayt_sLang,container:r.editable().$.nodeName=="BODY"?r.document.getWindow().$.frameElement:r.editable().$,customDictionary:r.config.scayt_customDictionaryIds,userDictionaryName:r.config.scayt_userDictionaryName,localization:r.langCode,customer_id:r.config.scayt_customerId,debug:r.config.scayt_debug,data_attribute_name:c.options.data_attribute_name,misspelled_word_class:c.options.misspelled_word_class,"options-to-restore":r.config.scayt_disableOptionsStorage,focused:r.editable().hasFocus,ignoreElementsRegex:r.config.scayt_elementsToIgnore,minWordLength:r.config.scayt_minWordLength};r.config.scayt_serviceProtocol&&(s.service_protocol=r.config.scayt_serviceProtocol),r.config.scayt_serviceHost&&(s.service_host=r.config.scayt_serviceHost),r.config.scayt_servicePort&&(s.service_port=r.config.scayt_servicePort),r.config.scayt_servicePath&&(s.service_path=r.config.scayt_servicePath),s=new SCAYT.CKSCAYT(s,function(){},function(){}),s.subscribe("suggestionListSend",function(a){for(var u={},h=[],i=0;i<a.suggestionList.length;i++)u["word_"+a.suggestionList[i]]||(u["word_"+a.suggestionList[i]]=a.suggestionList[i],h.push(a.suggestionList[i]));CKEDITOR.plugins.scayt.suggestions=h}),s.subscribe("selectionIsChanged",function(a){r.getSelection().isLocked&&r.lockSelection()}),r.scayt=s,r.fire("scaytButtonState",r.readOnly?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_ON)})},destroy:function(e){e.scayt&&e.scayt.destroy(),delete e.scayt,e.fire("scaytButtonState",CKEDITOR.TRISTATE_OFF)},loadScaytLibrary:function(e,c){var r=this,s;typeof window.SCAYT>"u"||typeof window.SCAYT.CKSCAYT!="function"?this.loadingHelper[e.name]||(this.loadingHelper[e.name]=c,this.loadingHelper.loadOrder.push(e.name),s=new Date,s=s.getTime(),s=e.config.scayt_srcUrl+"?"+s,CKEDITOR.scriptLoader.load(s,function(a){CKEDITOR.fireOnce("scaytReady");for(var u=0;u<r.loadingHelper.loadOrder.length;u++)a=r.loadingHelper.loadOrder[u],typeof r.loadingHelper[a]=="function"&&r.loadingHelper[a](CKEDITOR.instances[a]),delete r.loadingHelper[a];r.loadingHelper.loadOrder=[]})):window.SCAYT&&typeof window.SCAYT.CKSCAYT=="function"&&(CKEDITOR.fireOnce("scaytReady"),e.scayt||typeof c=="function"&&c(e))}},CKEDITOR.on("dialogDefinition",function(e){e.data.name==="scaytDialog"&&e.data.definition.dialog.on("cancel",function(c){return!1},this,null,-1)}),CKEDITOR.on("scaytReady",function(){if(CKEDITOR.config.scayt_handleCheckDirty===!0){var e=CKEDITOR.editor.prototype;e.checkDirty=CKEDITOR.tools.override(e.checkDirty,function(r){return function(){var s=null,a=this.scayt;if(CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state[this.name]&&this.scayt){if(s=this.status=="ready")var u=a.removeMarkupFromString(this.getSnapshot()),a=a.removeMarkupFromString(this._.previousValue),s=s&&a!==u}else s=r.call(this);return s}}),e.resetDirty=CKEDITOR.tools.override(e.resetDirty,function(r){return function(){var s=this.scayt;CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state[this.name]&&this.scayt?this._.previousValue=s.removeMarkupFromString(this.getSnapshot()):r.call(this)}})}if(CKEDITOR.config.scayt_handleUndoRedo===!0){var e=CKEDITOR.plugins.undo.Image.prototype,c=typeof e.equalsContent=="function"?"equalsContent":"equals";e[c]=CKEDITOR.tools.override(e[c],function(s){return function(a){var u=a.editor.scayt,h=this.contents,i=a.contents,o=null;return CKEDITOR.plugins.scayt&&CKEDITOR.plugins.scayt.state[a.editor.name]&&a.editor.scayt&&(this.contents=u.removeMarkupFromString(h)||"",a.contents=u.removeMarkupFromString(i)||""),o=s.apply(this,arguments),this.contents=h,a.contents=i,o}})}}),function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(e){var c=e.config,r=e.lang.stylescombo,s={},a=[],u=[];e.on("stylesSet",function(h){if(h=h.data.styles){for(var i,o,n,t=0,l=h.length;t<l;t++)i=h[t],e.blockless&&i.element in CKEDITOR.dtd.$block||(o=i.name,i=new CKEDITOR.style(i),e.filter.customConfig&&!e.filter.check(i))||(i._name=o,i._.enterMode=c.enterMode,i._.type=n=i.assignedTo||i.type,i._.weight=t+1e3*(n==CKEDITOR.STYLE_OBJECT?1:n==CKEDITOR.STYLE_BLOCK?2:3),s[o]=i,a.push(i),u.push(i));a.sort(function(f,E){return f._.weight-E._.weight})}}),e.ui.addRichCombo("Styles",{label:r.label,title:r.panelTitle,toolbar:"styles,10",allowedContent:u,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(c.contentsCss),multiSelect:!0,attributes:{"aria-label":r.panelTitle}},init:function(){var h,i,o,n,t,l;for(t=0,l=a.length;t<l;t++)h=a[t],i=h._name,n=h._.type,n!=o&&(this.startGroup(r["panelTitle"+String(n)]),o=n),this.add(i,h.type==CKEDITOR.STYLE_OBJECT?i:h.buildPreview(),i);this.commit()},onClick:function(h){e.focus(),e.fire("saveSnapshot"),h=s[h];var i=e.elementPath();e[h.checkActive(i,e)?"removeStyle":"applyStyle"](h),e.fire("saveSnapshot")},onRender:function(){e.on("selectionChange",function(h){var i=this.getValue();h=h.data.path.elements;for(var o=0,n=h.length,t;o<n;o++){t=h[o];for(var l in s)if(s[l].checkElementRemovable(t,!0,e)){l!=i&&this.setValue(l);return}}this.setValue("")},this)},onOpen:function(){var h=e.getSelection().getSelectedElement(),h=e.elementPath(h),i=[0,0,0,0];this.showAll(),this.unmarkAll();for(var o in s){var n=s[o],t=n._.type;n.checkApplicable(h,e,e.activeFilter)?i[t]++:this.hideItem(o),n.checkActive(h,e)&&this.mark(o)}i[CKEDITOR.STYLE_BLOCK]||this.hideGroup(r["panelTitle"+String(CKEDITOR.STYLE_BLOCK)]),i[CKEDITOR.STYLE_INLINE]||this.hideGroup(r["panelTitle"+String(CKEDITOR.STYLE_INLINE)]),i[CKEDITOR.STYLE_OBJECT]||this.hideGroup(r["panelTitle"+String(CKEDITOR.STYLE_OBJECT)])},refresh:function(){var h=e.elementPath();if(h){for(var i in s)if(s[i].checkApplicable(h,e,e.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){s={},a=[]}})}})}(),function(){function e(a){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(u){if(u.editable().hasFocus){var h=u.getSelection(),i;if(i=new CKEDITOR.dom.elementPath(h.getCommonAncestor(),h.root).contains({td:1,th:1},1)){var h=u.createRange(),o=CKEDITOR.tools.tryThese(function(){var E=i.getParent().$.cells[i.$.cellIndex+(a?-1:1)];return E.parentNode.parentNode,E},function(){var E=i.getParent(),E=E.getAscendant("table").$.rows[E.$.rowIndex+(a?-1:1)];return E.cells[a?E.cells.length-1:0]});if(o||a)if(o)o=new CKEDITOR.dom.element(o),h.moveToElementEditStart(o),h.checkStartOfBlock()&&h.checkEndOfBlock()||h.selectNodeContents(o);else return!0;else{for(var n=i.getAscendant("table").$,o=i.getParent().$.cells,n=new CKEDITOR.dom.element(n.insertRow(-1),u.document),t=0,l=o.length;t<l;t++)n.append(new CKEDITOR.dom.element(o[t],u.document).clone(!1,!1)).appendBogus();h.moveToElementEditStart(n)}return h.select(!0),!0}}return!1}}}var c={editorFocus:!1,modes:{wysiwyg:1,source:1}},r={exec:function(a){a.container.focusNext(!0,a.tabIndex)}},s={exec:function(a){a.container.focusPrevious(!0,a.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(a){for(var u=a.config.enableTabKeyTools!==!1,h=a.config.tabSpaces||0,i="";h--;)i+=" ";i&&a.on("key",function(o){o.data.keyCode==9&&(a.insertText(i),o.cancel())}),u&&a.on("key",function(o){(o.data.keyCode==9&&a.execCommand("selectNextCell")||o.data.keyCode==CKEDITOR.SHIFT+9&&a.execCommand("selectPreviousCell"))&&o.cancel()}),a.addCommand("blur",CKEDITOR.tools.extend(r,c)),a.addCommand("blurBack",CKEDITOR.tools.extend(s,c)),a.addCommand("selectNextCell",e()),a.addCommand("selectPreviousCell",e(!0))}})}(),CKEDITOR.dom.element.prototype.focusNext=function(e,c){var r=c===void 0?this.getTabIndex():c,s,a,u,h,i,o;if(0>=r)for(i=this.getNextSourceNode(e,CKEDITOR.NODE_ELEMENT);i;){if(i.isVisible()&&i.getTabIndex()===0){u=i;break}i=i.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(i=this.getDocument().getBody().getFirst();i=i.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!s)if(!a&&i.equals(this)){if(a=!0,e){if(!(i=i.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;s=1}}else a&&!this.contains(i)&&(s=1);if(i.isVisible()&&!(0>(o=i.getTabIndex()))){if(s&&o==r){u=i;break}o>r&&(!u||!h||o<h)?(u=i,h=o):u||o!==0||(u=i,h=o)}}u&&u.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(e,c){for(var r=c===void 0?this.getTabIndex():c,s,a,u,h=0,i,o=this.getDocument().getBody().getLast();o=o.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!s)if(!a&&o.equals(this)){if(a=!0,e){if(!(o=o.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;s=1}}else a&&!this.contains(o)&&(s=1);if(o.isVisible()&&!(0>(i=o.getTabIndex())))if(0>=r){if(s&&i===0){u=o;break}i>h&&(u=o,h=i)}else{if(s&&i==r){u=o;break}i<r&&(!u||i>h)&&(u=o,h=i)}}u&&u.focus()},CKEDITOR.plugins.add("table",{requires:"dialog",init:function(e){function c(s){return CKEDITOR.tools.extend(s||{},{contextSensitive:1,refresh:function(a,u){this.setState(u.contains("table",1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}if(!e.blockless){var r=e.lang.table;e.addCommand("table",new CKEDITOR.dialogCommand("table",{context:"table",allowedContent:"table{width,height}[align,border,cellpadding,cellspacing,summary];caption tbody thead tfoot;th td tr[scope];"+(e.plugins.dialogadvtab?"table"+e.plugins.dialogadvtab.allowedContent():""),requiredContent:"table",contentTransformations:[["table{width}: sizeToStyle","table[width]: sizeToAttribute"]]})),e.addCommand("tableProperties",new CKEDITOR.dialogCommand("tableProperties",c())),e.addCommand("tableDelete",c({exec:function(s){var a=s.elementPath().contains("table",1);if(a){var u=a.getParent(),h=s.editable();u.getChildCount()!=1||u.is("td","th")||u.equals(h)||(a=u),s=s.createRange(),s.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START),a.remove(),s.select()}}})),e.ui.addButton&&e.ui.addButton("Table",{label:r.toolbar,command:"table",toolbar:"insert,30"}),CKEDITOR.dialog.add("table",this.path+"dialogs/table.js"),CKEDITOR.dialog.add("tableProperties",this.path+"dialogs/table.js"),e.addMenuItems&&e.addMenuItems({table:{label:r.menu,command:"tableProperties",group:"table",order:5},tabledelete:{label:r.deleteTable,command:"tableDelete",group:"table",order:1}}),e.on("doubleclick",function(s){s.data.element.is("table")&&(s.data.dialog="tableProperties")}),e.contextMenu&&e.contextMenu.addListener(function(){return{tabledelete:CKEDITOR.TRISTATE_OFF,table:CKEDITOR.TRISTATE_OFF}})}}}),function(){function e(E){function C(g){0<d.length||g.type!=CKEDITOR.NODE_ELEMENT||!f.test(g.getName())||g.getCustomData("selected_cell")||(CKEDITOR.dom.element.setMarker(p,g,"selected_cell",!0),d.push(g))}E=E.getRanges();for(var d=[],p={},I=0;I<E.length;I++){var _=E[I];if(_.collapsed)_=_.getCommonAncestor(),(_=_.getAscendant("td",!0)||_.getAscendant("th",!0))&&d.push(_);else{var _=new CKEDITOR.dom.walker(_),m;for(_.guard=C;m=_.next();)m.type==CKEDITOR.NODE_ELEMENT&&m.is(CKEDITOR.dtd.table)||(m=m.getAscendant("td",!0)||m.getAscendant("th",!0))&&!m.getCustomData("selected_cell")&&(CKEDITOR.dom.element.setMarker(p,m,"selected_cell",!0),d.push(m))}}return CKEDITOR.dom.element.clearAllMarkers(p),d}function c(E,C){for(var _=e(E),m=_[0],p=m.getAscendant("table"),m=m.getDocument(),d=_[0].getParent(),I=d.$.rowIndex,_=_[_.length-1],g=_.getParent().$.rowIndex+_.$.rowSpan-1,_=new CKEDITOR.dom.element(p.$.rows[g]),I=C?I:g,d=C?d:_,_=CKEDITOR.tools.buildTableMap(p),p=_[I],I=C?_[I-1]:_[I+1],_=_[0].length,m=m.createElement("tr"),g=0;p[g]&&g<_;g++){var D;1<p[g].rowSpan&&I&&p[g]==I[g]?(D=p[g],D.rowSpan+=1):(D=new CKEDITOR.dom.element(p[g]).clone(),D.removeAttribute("rowSpan"),D.appendBogus(),m.append(D),D=D.$),g+=D.colSpan-1}C?m.insertBefore(d):m.insertAfter(d)}function r(E){if(E instanceof CKEDITOR.dom.selection){var C=e(E),d=C[0].getAscendant("table"),p=CKEDITOR.tools.buildTableMap(d);E=C[0].getParent().$.rowIndex;for(var C=C[C.length-1],I=C.getParent().$.rowIndex+C.$.rowSpan-1,C=[],_=E;_<=I;_++){for(var m=p[_],g=new CKEDITOR.dom.element(d.$.rows[_]),D=0;D<m.length;D++){var O=new CKEDITOR.dom.element(m[D]),v=O.getParent().$.rowIndex;O.$.rowSpan==1?O.remove():(--O.$.rowSpan,v==_&&(v=p[_+1],v[D-1]?O.insertAfter(new CKEDITOR.dom.element(v[D-1])):new CKEDITOR.dom.element(d.$.rows[_+1]).append(O,1))),D+=O.$.colSpan-1}C.push(g)}for(p=d.$.rows,d=new CKEDITOR.dom.element(p[I+1]||(0<E?p[E-1]:null)||d.$.parentNode),_=C.length;0<=_;_--)r(C[_]);return d}return E instanceof CKEDITOR.dom.element&&(d=E.getAscendant("table"),d.$.rows.length==1?d.remove():E.remove()),null}function s(E,C){for(var d=C?1/0:0,p=0;p<E.length;p++){var I;I=E[p];for(var _=C,m=I.getParent().$.cells,g=0,D=0;D<m.length;D++){var O=m[D],g=g+(_?1:O.colSpan);if(O==I.$)break}I=g-1,(C?I<d:I>d)&&(d=I)}return d}function a(E,C){for(var _=e(E),I=_[0].getAscendant("table"),d=s(_,1),_=s(_),d=C?d:_,p=CKEDITOR.tools.buildTableMap(I),I=[],_=[],m=p.length,g=0;g<m;g++)I.push(p[g][d]),_.push(C?p[g][d-1]:p[g][d+1]);for(g=0;g<m;g++)I[g]&&(1<I[g].colSpan&&_[g]==I[g]?(d=I[g],d.colSpan+=1):(d=new CKEDITOR.dom.element(I[g]).clone(),d.removeAttribute("colSpan"),d.appendBogus(),d[C?"insertBefore":"insertAfter"].call(d,new CKEDITOR.dom.element(I[g])),d=d.$),g+=d.rowSpan-1)}function u(E,C){var d=E.getStartElement();if(d=d.getAscendant("td",1)||d.getAscendant("th",1)){var p=d.clone();p.appendBogus(),C?p.insertBefore(d):p.insertAfter(d)}}function h(E){if(E instanceof CKEDITOR.dom.selection){E=e(E);var C=E[0]&&E[0].getAscendant("table"),d;e:{var p=0;d=E.length-1;for(var I={},_,m;_=E[p++];)CKEDITOR.dom.element.setMarker(I,_,"delete_cell",!0);for(p=0;_=E[p++];)if((m=_.getPrevious())&&!m.getCustomData("delete_cell")||(m=_.getNext())&&!m.getCustomData("delete_cell")){CKEDITOR.dom.element.clearAllMarkers(I),d=m;break e}CKEDITOR.dom.element.clearAllMarkers(I),m=E[0].getParent(),(m=m.getPrevious())?d=m.getLast():(m=E[d].getParent(),d=(m=m.getNext())?m.getChild(0):null)}for(m=E.length-1;0<=m;m--)h(E[m]);d?i(d,!0):C&&C.remove()}else E instanceof CKEDITOR.dom.element&&(C=E.getParent(),C.getChildCount()==1?C.remove():E.remove())}function i(E,C){var d=E.getDocument(),p=CKEDITOR.document;CKEDITOR.env.ie&&CKEDITOR.env.version==10&&(p.focus(),d.focus()),d=new CKEDITOR.dom.range(d),d["moveToElementEdit"+(C?"End":"Start")](E)||(d.selectNodeContents(E),d.collapse(!C)),d.select(!0)}function o(E,C,d){if(E=E[C],typeof d>"u")return E;for(C=0;E&&C<E.length;C++){if(d.is&&E[C]==d.$)return C;if(C==d)return new CKEDITOR.dom.element(E[C])}return d.is?-1:null}function n(E,C,d){var p=e(E),I;if((C?p.length!=1:2>p.length)||(I=E.getCommonAncestor())&&I.type==CKEDITOR.NODE_ELEMENT&&I.is("table"))return!1;var _;E=p[0],I=E.getAscendant("table");var m=CKEDITOR.tools.buildTableMap(I),g=m.length,D=m[0].length,O=E.getParent().$.rowIndex,v=o(m,O,E);if(C){var K;try{var L=parseInt(E.getAttribute("rowspan"),10)||1;_=parseInt(E.getAttribute("colspan"),10)||1,K=m[C=="up"?O-L:C=="down"?O+L:O][C=="left"?v-_:C=="right"?v+_:v]}catch{return!1}if(!K||E.$==K)return!1;p[C=="up"||C=="left"?"unshift":"push"](new CKEDITOR.dom.element(K))}C=E.getDocument();var k=O,L=K=0,B=!d&&new CKEDITOR.dom.documentFragment(C),F=0;for(C=0;C<p.length;C++){_=p[C];var x=_.getParent(),H=_.getFirst(),z=_.$.colSpan,T=_.$.rowSpan,x=x.$.rowIndex,S=o(m,x,_),F=F+z*T,L=Math.max(L,S-v+z);K=Math.max(K,x-O+T),d||(z=_,(T=z.getBogus())&&T.remove(),z.trim(),_.getChildren().count()&&(x==k||!H||H.isBlockBoundary&&H.isBlockBoundary({br:1})||(k=B.getLast(CKEDITOR.dom.walker.whitespaces(!0)),!k||k.is&&k.is("br")||B.append("br")),_.moveChildren(B)),C?_.remove():_.setHtml("")),k=x}if(d)return K*L==F;for(B.moveChildren(E),E.appendBogus(),L>=D?E.removeAttribute("rowSpan"):E.$.rowSpan=K,K>=g?E.removeAttribute("colSpan"):E.$.colSpan=L,d=new CKEDITOR.dom.nodeList(I.$.rows),p=d.count(),C=p-1;0<=C;C--)I=d.getItem(C),I.$.cells.length||(I.remove(),p++);return E}function t(E,C){var d=e(E);if(1<d.length)return!1;if(C)return!0;var d=d[0],p=d.getParent(),I=p.getAscendant("table"),_=CKEDITOR.tools.buildTableMap(I),m=p.$.rowIndex,g=o(_,m,d),D=d.$.rowSpan,O;if(1<D){O=Math.ceil(D/2);for(var D=Math.floor(D/2),p=m+O,I=new CKEDITOR.dom.element(I.$.rows[p]),_=o(_,p),v,p=d.clone(),m=0;m<_.length;m++)if(v=_[m],v.parentNode==I.$&&m>g){p.insertBefore(new CKEDITOR.dom.element(v));break}else v=null;v||I.append(p)}else for(D=O=1,I=p.clone(),I.insertAfter(p),I.append(p=d.clone()),v=o(_,m),g=0;g<v.length;g++)v[g].rowSpan++;return p.appendBogus(),d.$.rowSpan=O,p.$.rowSpan=D,O==1&&d.removeAttribute("rowSpan"),D==1&&p.removeAttribute("rowSpan"),p}function l(E,C){var d=e(E);if(1<d.length)return!1;if(C)return!0;var d=d[0],p=d.getParent(),I=p.getAscendant("table"),I=CKEDITOR.tools.buildTableMap(I),_=o(I,p.$.rowIndex,d),m=d.$.colSpan;if(1<m)p=Math.ceil(m/2),m=Math.floor(m/2);else{for(var m=p=1,g=[],D=0;D<I.length;D++){var O=I[D];g.push(O[_]),1<O[_].rowSpan&&(D+=O[_].rowSpan-1)}for(I=0;I<g.length;I++)g[I].colSpan++}return I=d.clone(),I.insertAfter(d),I.appendBogus(),d.$.colSpan=p,I.$.colSpan=m,p==1&&d.removeAttribute("colSpan"),m==1&&I.removeAttribute("colSpan"),I}var f=/^(?:td|th)$/;CKEDITOR.plugins.tabletools={requires:"table,dialog,contextmenu",init:function(E){function C(I){return CKEDITOR.tools.extend(I||{},{contextSensitive:1,refresh:function(_,m){this.setState(m.contains({td:1,th:1},1)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)}})}function d(I,_){var m=E.addCommand(I,_);E.addFeature(m)}var p=E.lang.table;d("cellProperties",new CKEDITOR.dialogCommand("cellProperties",C({allowedContent:"td th{width,height,border-color,background-color,white-space,vertical-align,text-align}[colspan,rowspan]",requiredContent:"table"}))),CKEDITOR.dialog.add("cellProperties",this.path+"dialogs/tableCell.js"),d("rowDelete",C({requiredContent:"table",exec:function(I){I=I.getSelection(),i(r(I))}})),d("rowInsertBefore",C({requiredContent:"table",exec:function(I){I=I.getSelection(),c(I,!0)}})),d("rowInsertAfter",C({requiredContent:"table",exec:function(I){I=I.getSelection(),c(I)}})),d("columnDelete",C({requiredContent:"table",exec:function(I){I=I.getSelection(),I=e(I);var _=I[0],m=I[I.length-1];I=_.getAscendant("table");for(var g=CKEDITOR.tools.buildTableMap(I),D,O,v=[],K=0,k=g.length;K<k;K++)for(var L=0,B=g[K].length;L<B;L++)g[K][L]==_.$&&(D=L),g[K][L]==m.$&&(O=L);for(K=D;K<=O;K++)for(L=0;L<g.length;L++)m=g[L],_=new CKEDITOR.dom.element(I.$.rows[L]),m=new CKEDITOR.dom.element(m[K]),m.$&&(m.$.colSpan==1?m.remove():--m.$.colSpan,L+=m.$.rowSpan-1,_.$.cells.length||v.push(_));O=I.$.rows[0]&&I.$.rows[0].cells,D=new CKEDITOR.dom.element(O[D]||(D?O[D-1]:I.$.parentNode)),v.length==k&&I.remove(),D&&i(D,!0)}})),d("columnInsertBefore",C({requiredContent:"table",exec:function(I){I=I.getSelection(),a(I,!0)}})),d("columnInsertAfter",C({requiredContent:"table",exec:function(I){I=I.getSelection(),a(I)}})),d("cellDelete",C({requiredContent:"table",exec:function(I){I=I.getSelection(),h(I)}})),d("cellMerge",C({allowedContent:"td[colspan,rowspan]",requiredContent:"td[colspan,rowspan]",exec:function(I){i(n(I.getSelection()),!0)}})),d("cellMergeRight",C({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(I){i(n(I.getSelection(),"right"),!0)}})),d("cellMergeDown",C({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(I){i(n(I.getSelection(),"down"),!0)}})),d("cellVerticalSplit",C({allowedContent:"td[rowspan]",requiredContent:"td[rowspan]",exec:function(I){i(l(I.getSelection()))}})),d("cellHorizontalSplit",C({allowedContent:"td[colspan]",requiredContent:"td[colspan]",exec:function(I){i(t(I.getSelection()))}})),d("cellInsertBefore",C({requiredContent:"table",exec:function(I){I=I.getSelection(),u(I,!0)}})),d("cellInsertAfter",C({requiredContent:"table",exec:function(I){I=I.getSelection(),u(I)}})),E.addMenuItems&&E.addMenuItems({tablecell:{label:p.cell.menu,group:"tablecell",order:1,getItems:function(){var I=E.getSelection(),_=e(I);return{tablecell_insertBefore:CKEDITOR.TRISTATE_OFF,tablecell_insertAfter:CKEDITOR.TRISTATE_OFF,tablecell_delete:CKEDITOR.TRISTATE_OFF,tablecell_merge:n(I,null,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_right:n(I,"right",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_merge_down:n(I,"down",!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_vertical:l(I,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_split_horizontal:t(I,!0)?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,tablecell_properties:0<_.length?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED}}},tablecell_insertBefore:{label:p.cell.insertBefore,group:"tablecell",command:"cellInsertBefore",order:5},tablecell_insertAfter:{label:p.cell.insertAfter,group:"tablecell",command:"cellInsertAfter",order:10},tablecell_delete:{label:p.cell.deleteCell,group:"tablecell",command:"cellDelete",order:15},tablecell_merge:{label:p.cell.merge,group:"tablecell",command:"cellMerge",order:16},tablecell_merge_right:{label:p.cell.mergeRight,group:"tablecell",command:"cellMergeRight",order:17},tablecell_merge_down:{label:p.cell.mergeDown,group:"tablecell",command:"cellMergeDown",order:18},tablecell_split_horizontal:{label:p.cell.splitHorizontal,group:"tablecell",command:"cellHorizontalSplit",order:19},tablecell_split_vertical:{label:p.cell.splitVertical,group:"tablecell",command:"cellVerticalSplit",order:20},tablecell_properties:{label:p.cell.title,group:"tablecellproperties",command:"cellProperties",order:21},tablerow:{label:p.row.menu,group:"tablerow",order:1,getItems:function(){return{tablerow_insertBefore:CKEDITOR.TRISTATE_OFF,tablerow_insertAfter:CKEDITOR.TRISTATE_OFF,tablerow_delete:CKEDITOR.TRISTATE_OFF}}},tablerow_insertBefore:{label:p.row.insertBefore,group:"tablerow",command:"rowInsertBefore",order:5},tablerow_insertAfter:{label:p.row.insertAfter,group:"tablerow",command:"rowInsertAfter",order:10},tablerow_delete:{label:p.row.deleteRow,group:"tablerow",command:"rowDelete",order:15},tablecolumn:{label:p.column.menu,group:"tablecolumn",order:1,getItems:function(){return{tablecolumn_insertBefore:CKEDITOR.TRISTATE_OFF,tablecolumn_insertAfter:CKEDITOR.TRISTATE_OFF,tablecolumn_delete:CKEDITOR.TRISTATE_OFF}}},tablecolumn_insertBefore:{label:p.column.insertBefore,group:"tablecolumn",command:"columnInsertBefore",order:5},tablecolumn_insertAfter:{label:p.column.insertAfter,group:"tablecolumn",command:"columnInsertAfter",order:10},tablecolumn_delete:{label:p.column.deleteColumn,group:"tablecolumn",command:"columnDelete",order:15}}),E.contextMenu&&E.contextMenu.addListener(function(I,_,m){return(I=m.contains({td:1,th:1},1))&&!I.isReadOnly()?{tablecell:CKEDITOR.TRISTATE_OFF,tablerow:CKEDITOR.TRISTATE_OFF,tablecolumn:CKEDITOR.TRISTATE_OFF}:null})},getSelectedCells:e},CKEDITOR.plugins.add("tabletools",CKEDITOR.plugins.tabletools)}(),CKEDITOR.tools.buildTableMap=function(e){e=e.$.rows;for(var c=-1,r=[],s=0;s<e.length;s++){c++,!r[c]&&(r[c]=[]);for(var a=-1,u=0;u<e[s].cells.length;u++){var h=e[s].cells[u];for(a++;r[c][a];)a++;for(var i=isNaN(h.colSpan)?1:h.colSpan,h=isNaN(h.rowSpan)?1:h.rowSpan,o=0;o<h;o++){r[c+o]||(r[c+o]=[]);for(var n=0;n<i;n++)r[c+o][a+n]=e[s].cells[u]}a+=i-1}}return r},function(){var e=[CKEDITOR.CTRL+90,CKEDITOR.CTRL+89,CKEDITOR.CTRL+CKEDITOR.SHIFT+90],c={8:1,46:1};CKEDITOR.plugins.add("undo",{init:function(i){function o(C){t.enabled&&C.data.command.canUndo!==!1&&t.save()}function n(){t.enabled=i.readOnly?!1:i.mode=="wysiwyg",t.onChange()}var t=i.undoManager=new r(i),l=t.editingHandler=new u(t),f=i.addCommand("undo",{exec:function(){t.undo()&&(i.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),E=i.addCommand("redo",{exec:function(){t.redo()&&(i.selectionChange(),this.fire("afterRedo"))},startDisabled:!0,canUndo:!1});i.setKeystroke([[e[0],"undo"],[e[1],"redo"],[e[2],"redo"]]),t.onChange=function(){f.setState(t.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),E.setState(t.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},i.on("beforeCommandExec",o),i.on("afterCommandExec",o),i.on("saveSnapshot",function(C){t.save(C.data&&C.data.contentOnly)}),i.on("contentDom",l.attachListeners,l),i.on("instanceReady",function(){i.fire("saveSnapshot")}),i.on("beforeModeUnload",function(){i.mode=="wysiwyg"&&t.save(!0)}),i.on("mode",n),i.on("readOnly",n),i.ui.addButton&&(i.ui.addButton("Undo",{label:i.lang.undo.undo,command:"undo",toolbar:"undo,10"}),i.ui.addButton("Redo",{label:i.lang.undo.redo,command:"redo",toolbar:"undo,20"})),i.resetUndo=function(){t.reset(),i.fire("saveSnapshot")},i.on("updateSnapshot",function(){t.currentImage&&t.update()}),i.on("lockSnapshot",function(C){C=C.data,t.lock(C&&C.dontUpdate,C&&C.forceUpdate)}),i.on("unlockSnapshot",t.unlock,t)}}),CKEDITOR.plugins.undo={};var r=CKEDITOR.plugins.undo.UndoManager=function(i){this.strokesRecorded=[0,0],this.locked=null,this.previousKeyGroup=-1,this.limit=i.config.undoStackSize||20,this.strokesLimit=25,this.editor=i,this.reset()};r.prototype={type:function(i,o){var n=r.getKeyGroup(i),t=this.strokesRecorded[n]+1;o=o||t>=this.strokesLimit,this.typing||(this.hasUndo=this.typing=!0,this.hasRedo=!1,this.onChange()),o?(t=0,this.editor.fire("saveSnapshot")):this.editor.fire("change"),this.strokesRecorded[n]=t,this.previousKeyGroup=n},keyGroupChanged:function(i){return r.getKeyGroup(i)!=this.previousKeyGroup},reset:function(){this.snapshots=[],this.index=-1,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.strokesRecorded=[0,0],this.typing=!1,this.previousKeyGroup=-1},refreshState:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(i,o,n){var t=this.editor;if(this.locked||t.status!="ready"||t.mode!="wysiwyg")return!1;var l=t.editable();if(!l||l.status!="ready"||(l=this.snapshots,o||(o=new s(t)),o.contents===!1))return!1;if(this.currentImage)if(o.equalsContent(this.currentImage)){if(i||o.equalsSelection(this.currentImage))return!1}else n!==!1&&t.fire("change");return l.splice(this.index+1,l.length-this.index-1),l.length==this.limit&&l.shift(),this.index=l.push(o)-1,this.currentImage=o,n!==!1&&this.refreshState(),!0},restoreImage:function(i){var o=this.editor,n;i.bookmarks&&(o.focus(),n=o.getSelection()),this.locked={level:999},this.editor.loadSnapshot(i.contents),i.bookmarks?n.selectBookmarks(i.bookmarks):CKEDITOR.env.ie&&(n=this.editor.document.getBody().$.createTextRange(),n.collapse(!0),n.select()),this.locked=null,this.index=i.index,this.currentImage=this.snapshots[this.index],this.update(),this.refreshState(),o.fire("change")},getNextImage:function(i){var o=this.snapshots,n=this.currentImage,t;if(n){if(i){for(t=this.index-1;0<=t;t--)if(i=o[t],!n.equalsContent(i))return i.index=t,i}else for(t=this.index+1;t<o.length;t++)if(i=o[t],!n.equalsContent(i))return i.index=t,i}return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var i=this.getNextImage(!0);if(i)return this.restoreImage(i),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var i=this.getNextImage(!1);if(i)return this.restoreImage(i),!0}return!1},update:function(i){if(!this.locked){i||(i=new s(this.editor));for(var o=this.index,n=this.snapshots;0<o&&this.currentImage.equalsContent(n[o-1]);)--o;n.splice(o,this.index-o+1,i),this.index=o,this.currentImage=i}},updateSelection:function(i){if(!this.snapshots.length)return!1;var o=this.snapshots,n=o[o.length-1];return n.equalsContent(i)&&!n.equalsSelection(i)?(this.currentImage=o[o.length-1]=i,!0):!1},lock:function(i,o){if(this.locked)this.locked.level++;else if(i)this.locked={level:1};else{var n=null;if(o)n=!0;else{var t=new s(this.editor,!0);this.currentImage&&this.currentImage.equalsContent(t)&&(n=t)}this.locked={update:n,level:1}}},unlock:function(){if(this.locked&&!--this.locked.level){var i=this.locked.update;if(this.locked=null,i===!0)this.update();else if(i){var o=new s(this.editor,!0);i.equalsContent(o)||this.update()}}}},r.navigationKeyCodes={37:1,38:1,39:1,40:1,36:1,35:1,33:1,34:1},r.keyGroups={PRINTABLE:0,FUNCTIONAL:1},r.isNavigationKey=function(i){return!!r.navigationKeyCodes[i]},r.getKeyGroup=function(i){var o=r.keyGroups;return c[i]?o.FUNCTIONAL:o.PRINTABLE},r.getOppositeKeyGroup=function(i){var o=r.keyGroups;return i==o.FUNCTIONAL?o.PRINTABLE:o.FUNCTIONAL},r.ieFunctionalKeysBug=function(i){return CKEDITOR.env.ie&&r.getKeyGroup(i)==r.keyGroups.FUNCTIONAL};var s=CKEDITOR.plugins.undo.Image=function(i,o){this.editor=i,i.fire("beforeUndoImage");var n=i.getSnapshot();CKEDITOR.env.ie&&n&&(n=n.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=n,o||(this.bookmarks=(n=n&&i.getSelection())&&n.createBookmarks2(!0)),i.fire("afterUndoImage")},a=/\b(?:href|src|name)="[^"]*?"/gi;s.prototype={equalsContent:function(i){var o=this.contents;return i=i.contents,CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks)&&(o=o.replace(a,""),i=i.replace(a,"")),o==i},equalsSelection:function(i){var o=this.bookmarks;if(i=i.bookmarks,o||i){if(!o||!i||o.length!=i.length)return!1;for(var n=0;n<o.length;n++){var t=o[n],l=i[n];if(t.startOffset!=l.startOffset||t.endOffset!=l.endOffset||!CKEDITOR.tools.arrayCompare(t.start,l.start)||!CKEDITOR.tools.arrayCompare(t.end,l.end))return!1}}return!0}};var u=CKEDITOR.plugins.undo.NativeEditingHandler=function(i){this.undoManager=i,this.ignoreInputEvent=!1,this.keyEventsStack=new h,this.lastKeydownImage=null};u.prototype={onKeydown:function(i){var o=i.data.getKey();o!==229&&(-1<CKEDITOR.tools.indexOf(e,i.data.getKeystroke())?i.data.preventDefault():(this.keyEventsStack.cleanUp(i),i=this.undoManager,this.keyEventsStack.getLast(o)||this.keyEventsStack.push(o),this.lastKeydownImage=new s(i.editor),(r.isNavigationKey(o)||this.undoManager.keyGroupChanged(o))&&(i.strokesRecorded[0]||i.strokesRecorded[1])&&(i.save(!1,this.lastKeydownImage,!1),i.resetType())))},onInput:function(){if(this.ignoreInputEvent)this.ignoreInputEvent=!1;else{var i=this.keyEventsStack.getLast();i||(i=this.keyEventsStack.push(0)),this.keyEventsStack.increment(i.keyCode),this.keyEventsStack.getTotalInputs()>=this.undoManager.strokesLimit&&(this.undoManager.type(i.keyCode,!0),this.keyEventsStack.resetInputs())}},onKeyup:function(i){var o=this.undoManager;i=i.data.getKey();var n=this.keyEventsStack.getTotalInputs();this.keyEventsStack.remove(i),r.ieFunctionalKeysBug(i)&&this.lastKeydownImage&&this.lastKeydownImage.equalsContent(new s(o.editor,!0))||(0<n?o.type(i):r.isNavigationKey(i)&&this.onNavigationKey(!0))},onNavigationKey:function(i){var o=this.undoManager;!i&&o.save(!0,null,!1)||o.updateSelection(new s(o.editor)),o.resetType()},ignoreInputEventListener:function(){this.ignoreInputEvent=!0},attachListeners:function(){var i=this.undoManager.editor,o=i.editable(),n=this;o.attachListener(o,"keydown",function(t){n.onKeydown(t),r.ieFunctionalKeysBug(t.data.getKey())&&n.onInput()},null,null,999),o.attachListener(o,CKEDITOR.env.ie?"keypress":"input",n.onInput,n,null,999),o.attachListener(o,"keyup",n.onKeyup,n,null,999),o.attachListener(o,"paste",n.ignoreInputEventListener,n,null,999),o.attachListener(o,"drop",n.ignoreInputEventListener,n,null,999),o.attachListener(o.isInline()?o:i.document.getDocumentElement(),"click",function(){n.onNavigationKey()},null,null,999),o.attachListener(this.undoManager.editor,"blur",function(){n.keyEventsStack.remove(9)},null,null,999)}};var h=CKEDITOR.plugins.undo.KeyEventsStack=function(){this.stack=[]};h.prototype={push:function(i){return i=this.stack.push({keyCode:i,inputs:0}),this.stack[i-1]},getLastIndex:function(i){if(typeof i!="number")return this.stack.length-1;for(var o=this.stack.length;o--;)if(this.stack[o].keyCode==i)return o;return-1},getLast:function(i){return i=this.getLastIndex(i),i!=-1?this.stack[i]:null},increment:function(i){this.getLast(i).inputs++},remove:function(i){i=this.getLastIndex(i),i!=-1&&this.stack.splice(i,1)},resetInputs:function(i){if(typeof i=="number")this.getLast(i).inputs=0;else for(i=this.stack.length;i--;)this.stack[i].inputs=0},getTotalInputs:function(){for(var i=this.stack.length,o=0;i--;)o+=this.stack[i].inputs;return o},cleanUp:function(i){i=i.data.$,i.ctrlKey||i.metaKey||this.remove(17),i.shiftKey||this.remove(16),i.altKey||this.remove(18)}}}(),CKEDITOR.plugins.add("wsc",{requires:"dialog",parseApi:function(e){e.config.wsc_onFinish=typeof e.config.wsc_onFinish=="function"?e.config.wsc_onFinish:function(){},e.config.wsc_onClose=typeof e.config.wsc_onClose=="function"?e.config.wsc_onClose:function(){}},parseConfig:function(e){e.config.wsc_customerId=e.config.wsc_customerId||CKEDITOR.config.wsc_customerId||"1:ua3xw1-2XyGJ3-GWruD3-6OFNT1-oXcuB1-nR6Bp4-hgQHc-EcYng3-sdRXG3-NOfFk",e.config.wsc_customDictionaryIds=e.config.wsc_customDictionaryIds||CKEDITOR.config.wsc_customDictionaryIds||"",e.config.wsc_userDictionaryName=e.config.wsc_userDictionaryName||CKEDITOR.config.wsc_userDictionaryName||"",e.config.wsc_customLoaderScript=e.config.wsc_customLoaderScript||CKEDITOR.config.wsc_customLoaderScript,CKEDITOR.config.wsc_cmd=e.config.wsc_cmd||CKEDITOR.config.wsc_cmd||"spell",CKEDITOR.config.wsc_version="v4.3.0-master-d769233",CKEDITOR.config.wsc_removeGlobalVariable=!0},init:function(e){var c=CKEDITOR.env;this.parseConfig(e),this.parseApi(e),e.addCommand("checkspell",new CKEDITOR.dialogCommand("checkspell")).modes={wysiwyg:!CKEDITOR.env.opera&&!CKEDITOR.env.air&&document.domain==window.location.hostname&&!(c.ie&&(8>c.version||c.quirks))},typeof e.plugins.scayt>"u"&&e.ui.addButton&&e.ui.addButton("SpellChecker",{label:e.lang.wsc.toolbar,click:function(r){var s=r.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?r.container.getText():r.document.getBody().getText();(s=s.replace(/\s/g,""))?r.execCommand("checkspell"):alert("Nothing to check!")},toolbar:"spellchecker,10"}),CKEDITOR.dialog.add("checkspell",this.path+(CKEDITOR.env.ie&&7>=CKEDITOR.env.version?"dialogs/wsc_ie.js":window.postMessage?"dialogs/wsc.js":"dialogs/wsc_ie.js"))}});var he={ace:"ace.js",aceExtWhitespace:"ext-whitespace.js",pbSyntaxHighlighter:CKEDITOR.plugins.getPath("pbckcode")+"dialogs/PBSyntaxHighlighter.js"},fe="pbckcode";CKEDITOR.plugins.add("pbckcode",{icons:"pbckcode",lang:["fr","en"],init:function(e){var c=this;e.config.pbckcode===void 0&&(e.config.pbckcode={}),e.settings=CKEDITOR.tools.extend({cls:"",modes:[["HTML","html"],["CSS","css"],["PHP","php"],["JS","javascript"]],theme:"textmate",tab_size:4,js:"https://cdn.jsdelivr.net//ace/1.1.4/noconflict///"},e.config.pbckcode,!0),e.settings.js=Ee(e.settings.js),e.on("instanceReady",function(){CKEDITOR.document.appendStyleSheet(c.path+"dialogs/style.css")}),e.ui.addButton("pbckcode",{label:e.lang.pbckcode.addCode,command:fe,toolbar:"pbckcode"}),e.addCommand(fe,new CKEDITOR.dialogCommand("pbckcodeDialog",{allowedContent:"pre[*]{*}(*)"})),e.getCommand(fe).disable(),CKEDITOR.dialog.add("pbckcodeDialog",c.path+"dialogs/pbckcode.js"),e.contextMenu&&(e.addMenuGroup("pbckcodeGroup"),e.addMenuItem("pbckcodeItem",{label:e.lang.pbckcode.editCode,icon:c.path+"icons/pbckcode.png",command:fe,group:"pbckcodeGroup"}),e.contextMenu.addListener(function(s){if(s.getAscendant("pre",!0))return{pbckcodeItem:CKEDITOR.TRISTATE_OFF}}));var r=[me(e.settings.js,he.ace),he.pbSyntaxHighlighter];CKEDITOR.scriptLoader.load(r,function(){e.getCommand(fe).enable(),CKEDITOR.scriptLoader.load([me(e.settings.js,he.aceExtWhitespace)])})}});function Ee(e){return e.concat("/").replace(RegExp("([^:]/)/+","g"),"$1")}function me(e,c){return e+c}CKEDITOR.plugins.add("forms",{requires:"dialog,fakeobjects",onLoad:function(){CKEDITOR.addCss(`.cke_editable form{border: 1px dotted #FF0000;padding: 2px;}
`),CKEDITOR.addCss("img.cke_hidden{background-image: url("+CKEDITOR.getUrl(this.path+"images/hiddenfield.gif")+");background-position: center center;background-repeat: no-repeat;border: 1px solid #a9a9a9;width: 16px !important;height: 16px !important;}")},init:function(e){var c=e.lang,r=0,s={email:1,password:1,search:1,tel:1,text:1,url:1},a={checkbox:"input[type,name,checked,required]",radio:"input[type,name,checked,required]",textfield:"input[type,name,value,size,maxlength,required]",textarea:"textarea[cols,rows,name,required]",select:"select[name,size,multiple,required]; option[value,selected]",button:"input[type,name,value]",form:"form[action,name,id,enctype,target,method]",hiddenfield:"input[type,name,value]",imagebutton:"input[type,alt,src]{width,height,border,border-width,border-style,margin,float}"},u={checkbox:"input",radio:"input",textfield:"input",textarea:"textarea",select:"select",button:"input",form:"form",hiddenfield:"input",imagebutton:"input"},h=function(n,t,l){var f={allowedContent:a[t],requiredContent:u[t]};t=="form"&&(f.context="form"),e.addCommand(t,new CKEDITOR.dialogCommand(t,f)),e.ui.addButton&&e.ui.addButton(n,{label:c.common[n.charAt(0).toLowerCase()+n.slice(1)],command:t,toolbar:"forms,"+(r+=10)}),CKEDITOR.dialog.add(t,l)},i=this.path+"dialogs/";!e.blockless&&h("Form","form",i+"form.js"),h("Checkbox","checkbox",i+"checkbox.js"),h("Radio","radio",i+"radio.js"),h("TextField","textfield",i+"textfield.js"),h("Textarea","textarea",i+"textarea.js"),h("Select","select",i+"select.js"),h("Button","button",i+"button.js");var o=e.plugins.image;o&&!e.plugins.image2&&h("ImageButton","imagebutton",CKEDITOR.plugins.getPath("image")+"dialogs/image.js"),h("HiddenField","hiddenfield",i+"hiddenfield.js"),e.addMenuItems&&(h={checkbox:{label:c.forms.checkboxAndRadio.checkboxTitle,command:"checkbox",group:"checkbox"},radio:{label:c.forms.checkboxAndRadio.radioTitle,command:"radio",group:"radio"},textfield:{label:c.forms.textfield.title,command:"textfield",group:"textfield"},hiddenfield:{label:c.forms.hidden.title,command:"hiddenfield",group:"hiddenfield"},button:{label:c.forms.button.title,command:"button",group:"button"},select:{label:c.forms.select.title,command:"select",group:"select"},textarea:{label:c.forms.textarea.title,command:"textarea",group:"textarea"}},o&&(h.imagebutton={label:c.image.titleButton,command:"imagebutton",group:"imagebutton"}),!e.blockless&&(h.form={label:c.forms.form.menu,command:"form",group:"form"}),e.addMenuItems(h)),e.contextMenu&&(!e.blockless&&e.contextMenu.addListener(function(n,t,l){if((n=l.contains("form",1))&&!n.isReadOnly())return{form:CKEDITOR.TRISTATE_OFF}}),e.contextMenu.addListener(function(n){if(n&&!n.isReadOnly()){var t=n.getName();if(t=="select")return{select:CKEDITOR.TRISTATE_OFF};if(t=="textarea")return{textarea:CKEDITOR.TRISTATE_OFF};if(t=="input"){var l=n.getAttribute("type")||"text";switch(l){case"button":case"submit":case"reset":return{button:CKEDITOR.TRISTATE_OFF};case"checkbox":return{checkbox:CKEDITOR.TRISTATE_OFF};case"radio":return{radio:CKEDITOR.TRISTATE_OFF};case"image":return o?{imagebutton:CKEDITOR.TRISTATE_OFF}:null}if(s[l])return{textfield:CKEDITOR.TRISTATE_OFF}}if(t=="img"&&n.data("cke-real-element-type")=="hiddenfield")return{hiddenfield:CKEDITOR.TRISTATE_OFF}}})),e.on("doubleclick",function(n){var t=n.data.element;if(!e.blockless&&t.is("form"))n.data.dialog="form";else if(t.is("select"))n.data.dialog="select";else if(t.is("textarea"))n.data.dialog="textarea";else if(t.is("img")&&t.data("cke-real-element-type")=="hiddenfield")n.data.dialog="hiddenfield";else if(t.is("input")){switch(t=t.getAttribute("type")||"text",t){case"button":case"submit":case"reset":n.data.dialog="button";break;case"checkbox":n.data.dialog="checkbox";break;case"radio":n.data.dialog="radio";break;case"image":n.data.dialog="imagebutton"}s[t]&&(n.data.dialog="textfield")}})},afterInit:function(e){var r=e.dataProcessor,c=r&&r.htmlFilter,r=r&&r.dataFilter;CKEDITOR.env.ie&&c&&c.addRules({elements:{input:function(s){s=s.attributes;var a=s.type;a||(s.type="text"),a!="checkbox"&&a!="radio"||s.value!="on"||delete s.value}}},{applyToAll:!0}),r&&r.addRules({elements:{input:function(s){if(s.attributes.type=="hidden")return e.createFakeParserElement(s,"cke_hidden","hiddenfield")}}},{applyToAll:!0})}}),CKEDITOR.config.plugins="dialogui,dialog,about,a11yhelp,basicstyles,blockquote,clipboard,panel,floatpanel,menu,contextmenu,resize,button,toolbar,elementspath,enterkey,entities,popup,filebrowser,floatingspace,listblock,richcombo,format,horizontalrule,htmlwriter,wysiwygarea,image,indent,indentlist,fakeobjects,link,list,magicline,maximize,pastetext,pastefromword,removeformat,showborders,sourcearea,specialchar,menubutton,scayt,stylescombo,tab,table,tabletools,undo,wsc,pbckcode,forms",CKEDITOR.config.skin="bootstrapck",function(){var e=function(c,r){var s=CKEDITOR.getUrl("plugins/"+r);c=c.split(",");for(var a=0;a<c.length;a++)CKEDITOR.skin.icons[c[a]]={path:s,offset:-c[++a],bgsize:c[++a]}};CKEDITOR.env.hidpi?e("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,blockquote,168,,copy-rtl,192,,copy,216,,cut-rtl,240,,cut,264,,paste-rtl,288,,paste,312,,horizontalrule,336,,image,360,,indent-rtl,384,,indent,408,,outdent-rtl,432,,outdent,456,,anchor-rtl,480,,anchor,504,,link,528,,unlink,552,,bulletedlist-rtl,576,,bulletedlist,600,,numberedlist-rtl,624,,numberedlist,648,,maximize,672,,pastetext-rtl,696,,pastetext,720,,pastefromword-rtl,744,,pastefromword,768,,removeformat,792,,source-rtl,816,,source,840,,specialchar,864,,scayt,888,,table,912,,redo-rtl,936,,redo,960,,undo-rtl,984,,undo,1008,,spellchecker,1032,,pbckcode,2112,auto,button,1080,,checkbox,1104,,form,1128,,hiddenfield,1152,,imagebutton,1176,,radio,1200,,select-rtl,1224,,select,1248,,textarea-rtl,1272,,textarea,1296,,textfield-rtl,1320,,textfield,1344,","icons_hidpi.png"):e("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,blockquote,168,auto,copy-rtl,192,auto,copy,216,auto,cut-rtl,240,auto,cut,264,auto,paste-rtl,288,auto,paste,312,auto,horizontalrule,336,auto,image,360,auto,indent-rtl,384,auto,indent,408,auto,outdent-rtl,432,auto,outdent,456,auto,anchor-rtl,480,auto,anchor,504,auto,link,528,auto,unlink,552,auto,bulletedlist-rtl,576,auto,bulletedlist,600,auto,numberedlist-rtl,624,auto,numberedlist,648,auto,maximize,672,auto,pastetext-rtl,696,auto,pastetext,720,auto,pastefromword-rtl,744,auto,pastefromword,768,auto,removeformat,792,auto,source-rtl,816,auto,source,840,auto,specialchar,864,auto,scayt,888,auto,table,912,auto,redo-rtl,936,auto,redo,960,auto,undo-rtl,984,auto,undo,1008,auto,spellchecker,1032,auto,pbckcode,1056,auto,button,1080,auto,checkbox,1104,auto,form,1128,auto,hiddenfield,1152,auto,imagebutton,1176,auto,radio,1200,auto,select-rtl,1224,auto,select,1248,auto,textarea-rtl,1272,auto,textarea,1296,auto,textfield-rtl,1320,auto,textfield,1344,auto","icons.png")}(),CKEDITOR.lang.languages={af:1,sq:1,ar:1,eu:1,bn:1,bs:1,bg:1,ca:1,"zh-cn":1,zh:1,hr:1,cs:1,da:1,nl:1,en:1,"en-au":1,"en-ca":1,"en-gb":1,eo:1,et:1,fo:1,fi:1,fr:1,"fr-ca":1,gl:1,ka:1,de:1,el:1,gu:1,he:1,hi:1,hu:1,is:1,id:1,it:1,ja:1,km:1,ko:1,ku:1,lv:1,lt:1,mk:1,ms:1,mn:1,no:1,nb:1,fa:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,sr:1,"sr-latn":1,si:1,sk:1,sl:1,es:1,sv:1,tt:1,th:1,tr:1,ug:1,uk:1,vi:1,cy:1}})();
